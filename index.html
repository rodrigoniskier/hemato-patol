<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patologia Geral e Hematologia - Curso Interativo Aprimorado</title>
    <style>
        /* Estilos originais do index(6).html para manter a identidade visual */
        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --highlight-color: #e74c3c;
            --success-color: #27ae60;
            --text-color: #333;
            --bg-color-light: #f8f9fa;
            --border-radius: 15px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: url('background3.png') center center/cover no-repeat fixed;
            display: flex;
            flex-direction: column;
        }

        .container {
            display: flex;
            flex: 1; /* Faz o container crescer para preencher o espa√ßo */
        }

        .sidebar {
            width: 300px;
            background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
            color: white;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .sidebar.hidden {
            transform: translateX(-100%);
        }

        .sidebar-header {
            padding: 2rem 1.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #ecf0f1;
        }

        .sidebar-header p {
            font-size: 0.9rem;
            color: #bdc3c7;
            line-height: 1.4;
        }

        .nav-menu {
            padding: 1rem 0;
        }

        .nav-item {
            display: block;
            padding: 1rem 1.5rem;
            color: #ecf0f1;
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            cursor: pointer;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.1);
            border-left-color: var(--highlight-color);
        }

        .nav-item.active {
            background: rgba(255,255,255,0.15);
            border-left-color: var(--highlight-color);
        }

        .nav-item .icon {
            margin-right: 0.5rem;
            font-size: 1.2rem;
        }

        .main-content {
            flex: 1;
            margin-left: 300px;
            padding: 2rem;
            transition: margin-left 0.3s ease;
        }

        .main-content.expanded {
            margin-left: 0;
        }

        .hamburger {
            display: none;
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 1001;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .content-box {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        h2 {
            color: var(--secondary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
        }

        h3 { color: var(--primary-color); margin-top: 20px; margin-bottom: 15px; }
        h4 { color: var(--secondary-color); margin-top: 15px; margin-bottom: 10px; }
        p { margin-bottom: 1em; }
        ul, ol { padding-left: 20px; margin-bottom: 1em; }

        .accordion {
            margin-bottom: 1rem;
        }

        .accordion-header {
            background: linear-gradient(135deg, var(--primary-color), #2980b9);
            color: white;
            padding: 1.5rem;
            cursor: pointer;
            border-radius: 10px;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .accordion-header:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .accordion-header.active {
            background: linear-gradient(135deg, var(--highlight-color), #c0392b);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background: white;
            border-radius: 0 0 10px 10px;
        }

        .accordion-content.active {
            max-height: 10000px; /* Aumentado para conte√∫do grande */
            padding: 2rem;
        }

        .tabs {
            margin: 2rem 0;
        }

        .tab-headers {
            display: flex;
            border-bottom: 2px solid #ecf0f1;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .tab-header {
            padding: 1rem 1.5rem;
            background: var(--bg-color-light);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 10px 10px 0 0;
            margin-right: 0.5rem;
            margin-bottom: -2px;
        }

        .tab-header.active {
            background: var(--primary-color);
            color: white;
            border-bottom: 2px solid var(--primary-color);
        }

        .tab-content {
            display: none;
            padding: 1.5rem;
            background: white;
            border-radius: 0 10px 10px 10px;
        }

        .tab-content.active {
            display: block;
        }

        .tooltip {
            position: relative;
            cursor: help;
            color: var(--primary-color);
            font-weight: bold;
            border-bottom: 1px dotted var(--primary-color);
        }

        .tooltip .tooltip-content {
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--secondary-color);
            color: white;
            padding: 0.8rem;
            border-radius: 8px;
            font-size: 0.9rem;
            width: 280px;
            white-space: normal;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .tooltip:hover .tooltip-content {
            opacity: 1;
            visibility: visible;
        }

        .tooltip .tooltip-content::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: var(--secondary-color);
        }
        
        .flashcard-container { display: flex; flex-direction: column; align-items: center; }
        .flashcard { width: 500px; height: 300px; perspective: 1000px; cursor: pointer; margin-bottom: 20px; }
        .flashcard-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
        .flashcard.flipped .flashcard-inner { transform: rotateY(180deg); }
        .flashcard-front, .flashcard-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; padding: 20px; border-radius: var(--border-radius); box-shadow: 0 4px 12px rgba(0,0,0,0.1); font-size: 1.5em; text-align: center; }
        .flashcard-front { background: linear-gradient(135deg, #f0f0f0, #ffffff); color: var(--secondary-color); }
        .flashcard-back { background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%); color: white; transform: rotateY(180deg); font-size: 1.2em; }
        .flashcard-nav { display: flex; gap: 15px; align-items: center; }

        .btn {
            background: linear-gradient(135deg, var(--primary-color), #2980b9);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin: 0.5rem;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
        }
        
        .table-container {
            overflow-x: auto;
            margin: 2rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }

        th {
            background: linear-gradient(135deg, #34495e, var(--secondary-color));
            color: white;
            font-weight: bold;
        }

        tr:hover {
            background: var(--bg-color-light);
        }

        .simulado-config {
            background: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            margin: 2rem 0;
        }

        .config-group {
            margin: 1.5rem 0;
        }

        .config-group > label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: var(--secondary-color);
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
        }

        .checkbox-item input {
            margin-right: 0.5rem;
        }

        .slider {
            width: 100%;
            cursor: pointer;
        }

        .modal {
            display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%;
            overflow: auto; background-color: rgba(0,0,0,0.7);
            align-items: center; justify-content: center;
        }
        .modal-content {
            background-color: #fefefe; margin: auto; padding: 30px;
            border-radius: var(--border-radius); width: 90%; max-width: 800px;
            position: relative; max-height: 90vh; overflow-y: auto;
        }
        .close-button {
            color: #aaa; position: absolute; top: 10px; right: 20px;
            font-size: 28px; font-weight: bold; cursor: pointer;
        }
        .quiz-question { margin-bottom: 20px; }
        .quiz-options label { display: block; margin-bottom: 10px; padding: 10px; border-radius: 5px; cursor: pointer; transition: background-color 0.2s; }
        .quiz-options label:hover { background-color: #f0f0f0; }
        .quiz-result div { margin-bottom: 10px; }
        .review-question { margin-bottom: 15px; padding: 15px; border-radius: 8px; }
        .review-question.correct { background-color: #d4edda; border-left: 5px solid var(--success-color); }
        .review-question.incorrect { background-color: #f8d7da; border-left: 5px solid var(--highlight-color); }

        .reference-list li { margin-bottom: 15px; list-style-type: none; padding-left: 0; }
        .reference-list a { color: var(--primary-color); text-decoration: none; font-weight: bold; }
        .reference-list a:hover { text-decoration: underline; }
        .reference-list p { margin-left: 20px; font-style: italic; color: #555; margin-top: 5px; margin-bottom: 0;}

        .profile-container {
            display: flex;
            align-items: flex-start;
            gap: 2rem;
            flex-wrap: wrap;
        }
        .profile-pic-container {
            flex-shrink: 0;
            text-align: center;
        }
        .profile-pic {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--primary-color);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .profile-text {
            flex-grow: 1;
        }

        .main-footer {
            text-align: center;
            padding: 1rem;
            background-color: rgba(44, 62, 80, 0.9);
            color: #ecf0f1;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }
            .sidebar {
                transform: translateX(-100%);
            }
            .sidebar.visible {
                transform: translateX(0);
            }
            .main-content {
                margin-left: 0;
                padding: 1rem;
            }
            .flashcard {
                width: 100%;
                max-width: 300px;
                height: 250px;
            }
            .tab-headers {
                flex-direction: column;
            }
            .tab-header {
                margin-right: 0;
                margin-bottom: 0.5rem;
                border-radius: 10px;
            }
            .profile-container {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="hamburger" onclick="toggleSidebar()">‚ò∞</button>

        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>ü©∫ Patologia & Hematologia</h1>
                <p>Curso interativo aprimorado, unindo design e funcionalidade avan√ßada.</p>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="#" class="nav-item active" onclick="showSection('home', this)">
                    <span class="icon">üè†</span> In√≠cio
                </a>
                <a href="#" class="nav-item" onclick="showSection('modulo1', this)">
                    <span class="icon">üî¨</span> M√≥dulo 1: A C√©lula Sob Amea√ßa
                </a>
                <a href="#" class="nav-item" onclick="showSection('modulo2', this)">
                    <span class="icon">üõ°Ô∏è</span> M√≥dulo 2: Resposta do Hospedeiro
                </a>
                <a href="#" class="nav-item" onclick="showSection('modulo3', this)">
                    <span class="icon">ü©∏</span> M√≥dulo 3: Fluidez e Conten√ß√£o
                </a>
                <a href="#" class="nav-item" onclick="showSection('modulo4', this)">
                    <span class="icon">‚ö°</span> M√≥dulo 4: Crescimento e Autoagress√£o
                </a>
                <a href="#" class="nav-item" onclick="showSection('flashcards', this)">
                    <span class="icon">üß†</span> Flashcards
                </a>
                <a href="#" class="nav-item" onclick="showSection('simulado', this)">
                    <span class="icon">üìù</span> Simulado
                </a>
                <a href="#" class="nav-item" onclick="showSection('glossario', this)">
                    <span class="icon">üìñ</span> Gloss√°rio
                </a>
                 <a href="#" class="nav-item" onclick="showSection('references', this)">
                    <span class="icon">üîó</span> Fontes
                </a>
            </div>
        </nav>

        <main class="main-content" id="mainContent">
            <!-- Se√ß√µes ser√£o preenchidas dinamicamente -->
        </main>
    </div>
    
    <footer class="main-footer">
        <p>&copy; 2024 Rodrigo Niskier Ferreira Barbosa. Todos os direitos reservados.</p>
    </footer>

    <!-- Modal para Quizzes -->
    <div id="quiz-modal" class="modal">
        <div class="modal-content" id="quiz-modal-content"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- ESTRUTURA DE DADOS CENTRAL (DO testes.html E PDF) ---
            const courseData = {
                modules: [
                    {
                        id: 'modulo1', title: 'M√≥dulo 1: A C√©lula Sob Amea√ßa: Les√£o, Adapta√ß√£o e Morte',
                        sections: [
                            {
                                id: 'sec1-1', title: 'Les√£o Celular e Toxicidade Medular',
                                content: `<h3>Fundamentos da Les√£o Celular</h3><p>A patologia estuda as rea√ß√µes de c√©lulas a est√≠mulos nocivos. A c√©lula opera em <span class="tooltip">homeostase<span class="tooltip-content">Estado de equil√≠brio din√¢mico da c√©lula.</span></span>, mas estresse severo ou prolongado causa les√£o. Inicialmente, a les√£o pode ser revers√≠vel, mas se o ponto de n√£o retorno for ultrapassado, torna-se irrevers√≠vel, culminando na morte celular.</p><h4>Mecanismos de Les√£o Celular</h4><ul><li><b>Deple√ß√£o de <span class="tooltip">ATP<span class="tooltip-content">Adenosina Trifosfato, a principal moeda energ√©tica da c√©lula.</span></span>:</b> A falta de energia por <span class="tooltip">hip√≥xia<span class="tooltip-content">Baixa concentra√ß√£o de oxig√™nio nos tecidos.</span></span> ou toxinas afeta bombas i√¥nicas (causando edema celular) e a s√≠ntese de prote√≠nas.</li><li><b>Dano Mitocondrial:</b> Leva √† falha na produ√ß√£o de ATP e √† libera√ß√£o de prote√≠nas que ativam a <span class="tooltip">apoptose<span class="tooltip-content">Morte celular programada, um processo organizado e sem inflama√ß√£o.</span></span>, como o citocromo c.</li><li><b>Influxo de C√°lcio (Ca¬≤+):</b> Ativa enzimas destrutivas (fosfolipases, proteases) que degradam membranas e prote√≠nas.</li><li><b>Estresse Oxidativo:</b> O ac√∫mulo de <span class="tooltip">EROs<span class="tooltip-content">Esp√©cies Reativas de Oxig√™nio, ou radicais livres, que causam dano celular.</span></span> danifica lip√≠dios, prote√≠nas e DNA.</li></ul><h4>Aplica√ß√£o Hematol√≥gica - Les√£o T√≥xica da Medula √ìssea</h4><p>A medula √≥ssea, por sua alta prolifera√ß√£o, √© muito sens√≠vel a les√µes. A <span class="tooltip">CTH<span class="tooltip-content">C√©lula-tronco hematopoi√©tica, respons√°vel por gerar todas as c√©lulas do sangue.</span></span> √© o alvo principal, e sua les√£o resulta em <span class="tooltip">pancitopenia<span class="tooltip-content">Redu√ß√£o de todas as linhagens celulares do sangue (eritr√≥citos, leuc√≥citos, plaquetas).</span></span>.</p><h4>Estudo de Caso 1: Hematotoxicidade do Benzeno</h4><p>O benzeno √© metabolizado no f√≠gado e seus metab√≥litos atacam as CTHs na medula atrav√©s de m√∫ltiplos mecanismos, incluindo estresse oxidativo, dano direto ao DNA e desregula√ß√£o do receptor <span class="tooltip">AhR<span class="tooltip-content">Receptor de Aril Hidrocarbonetos, um fator de transcri√ß√£o que ajuda a manter as CTHs em repouso.</span></span>, for√ßando as CTHs a se dividirem e se tornarem mais suscet√≠veis a danos.</p><h4>Estudo de Caso 2: Les√£o Medular por Cloranfenicol</h4><p>Este antibi√≥tico ilustra a dualidade da les√£o celular:<ul><li><b>Les√£o Revers√≠vel:</b> Em altas doses, inibe a s√≠ntese de prote√≠nas mitocondriais, especialmente nos precursores eritroides, causando uma les√£o que se reverte ap√≥s a suspens√£o do f√°rmaco.</li><li><b>Les√£o Irrevers√≠vel:</b> Em casos raros e idiossincr√°ticos, pode causar uma <span class="tooltip">aplasia medular<span class="tooltip-content">Condi√ß√£o rara e grave em que a medula √≥ssea para de produzir c√©lulas sangu√≠neas suficientes.</span></span> fatal, um exemplo de les√£o irrevers√≠vel com morte em massa das CTHs, possivelmente por dano irrepar√°vel ao DNA em indiv√≠duos geneticamente predispostos.</li></ul>`
                            },
                            {
                                id: 'sec1-2', title: 'Adapta√ß√£o Celular e Respostas Medulares',
                                content: `<h3>Fundamentos da Adapta√ß√£o Celular</h3><p>C√©lulas podem se adaptar a estresses, modificando sua estrutura e fun√ß√£o. As adapta√ß√µes incluem:</p><ul><li><span class="tooltip"><b>Hiperplasia</b><span class="tooltip-content">Aumento no N√öMERO de c√©lulas.</span></span></li><li><span class="tooltip"><b>Hipertrofia</b><span class="tooltip-content">Aumento no TAMANHO das c√©lulas.</span></span></li><li><span class="tooltip"><b>Atrofia</b><span class="tooltip-content">Redu√ß√£o no tamanho e atividade metab√≥lica de uma c√©lula.</span></span></li><li><span class="tooltip"><b>Metaplasia</b><span class="tooltip-content">Mudan√ßa revers√≠vel de um tipo celular diferenciado por outro.</span></span></li></ul><h4>Estudo de Caso 3: Hiperplasia Eritroide na Hip√≥xia Cr√¥nica</h4><p>Em condi√ß√µes de <span class="tooltip">hip√≥xia<span class="tooltip-content">Baixa concentra√ß√£o de oxig√™nio nos tecidos.</span></span> cr√¥nica (ex: grandes altitudes, DPOC), os rins detectam o baixo oxig√™nio e estabilizam o fator de transcri√ß√£o <span class="tooltip">HIF<span class="tooltip-content">Fator Induz√≠vel por Hip√≥xia, um 'termostato de oxig√™nio' molecular.</span></span>. O HIF-2Œ± ativo aumenta a produ√ß√£o do horm√¥nio <span class="tooltip">EPO<span class="tooltip-content">Eritropoietina, horm√¥nio que estimula a produ√ß√£o de gl√≥bulos vermelhos.</span></span>, que age na medula √≥ssea causando hiperplasia da linhagem eritroide. O resultado √© a policitemia secund√°ria, que, embora adaptativa, aumenta a viscosidade sangu√≠nea e o risco de <span class="tooltip">trombose<span class="tooltip-content">Forma√ß√£o patol√≥gica de um co√°gulo dentro de um vaso sangu√≠neo.</span></span>.</p><h4>Estudo de Caso 4: Atrofia Medular na Anemia Apl√°sica</h4><p>A anemia apl√°sica √© a atrofia do √≥rg√£o hematopoi√©tico. A causa mais comum √© um ataque autoimune mediado por linf√≥citos T citot√≥xicos (CD8+) contra as CTHs. Esses linf√≥citos destroem as CTHs liberando citocinas inibit√≥rias (IFN-Œ≥, TNF-Œ±) e induzindo apoptose, resultando em fal√™ncia medular completa.</p>`
                            },
                            {
                                id: 'sec1-3', title: 'Morte Celular e Hem√≥lise',
                                content: `<h3>Fundamentos da Morte Celular</h3><p>Existem duas vias principais de morte celular: apoptose e necrose.</p><ul><li><span class="tooltip"><b>Apoptose:</b><span class="tooltip-content">Morte celular programada, 'suic√≠dio celular' organizado, que n√£o causa inflama√ß√£o.</span></span> Processo ativo e regulado. A c√©lula encolhe e √© fagocitada sem inflama√ß√£o. Pode ser iniciada pela via intr√≠nseca (mitocondrial) ou extr√≠nseca (receptores de morte).</li><li><span class="tooltip"><b>Necrose:</b><span class="tooltip-content">Morte celular acidental, descontrolada, que sempre causa inflama√ß√£o.</span></span> Processo passivo, resultado de les√£o aguda. A c√©lula incha, sua membrana se rompe (lise) e o conte√∫do extravasa, causando inflama√ß√£o.</li></ul><div id="table1-container"></div><h4>Estudo de Caso 5: Anemia Falciforme</h4><p>Uma muta√ß√£o pontual no gene da Œ≤-globina cria a Hemoglobina S (HbS). Sob baixa tens√£o de oxig√™nio, a HbS se polimeriza, distorcendo os eritr√≥citos para a forma de foice (drepan√≥cito). Estes eritr√≥citos r√≠gidos s√£o destru√≠dos prematuramente (<span class="tooltip">hem√≥lise<span class="tooltip-content">Destrui√ß√£o de hem√°cias.</span></span>), com vida m√©dia de 10-20 dias, e podem bloquear pequenos vasos (<span class="tooltip">vaso-oclus√£o<span class="tooltip-content">Obstru√ß√£o de vasos sangu√≠neos.</span></span>), causando dor intensa e <span class="tooltip">isquemia<span class="tooltip-content">Falta de suprimento sangu√≠neo para um tecido, levando √† falta de oxig√™nio.</span></span> tecidual.</p>`
                            }
                        ]
                    },
                    {
                        id: 'modulo2', title: 'M√≥dulo 2: A Resposta do Hospedeiro: Inflama√ß√£o e Reparo',
                        sections: [
                            {
                                id: 'sec2-1', title: 'Inflama√ß√£o e o Leucograma',
                                content: `<h3>Fundamentos da Inflama√ß√£o</h3><p>A inflama√ß√£o √© uma resposta protetora a agentes agressores. A <b>inflama√ß√£o aguda</b> √© r√°pida, de curta dura√ß√£o, e marcada pela migra√ß√£o de <span class="tooltip">neutr√≥filos<span class="tooltip-content">Tipo de leuc√≥cito que √© a primeira linha de defesa contra infec√ß√µes bacterianas.</span></span>. A <b>inflama√ß√£o cr√¥nica</b> √© prolongada e envolve <span class="tooltip">linf√≥citos<span class="tooltip-content">Tipos de leuc√≥citos envolvidos na imunidade espec√≠fica e mem√≥ria imunol√≥gica.</span></span> e macr√≥fagos. O processo √© orquestrado por mediadores como <span class="tooltip">citocinas<span class="tooltip-content">Prote√≠nas que mediam e regulam a resposta imune e inflamat√≥ria (ex: TNF, IL-1, IL-6).</span></span> e <span class="tooltip">quimiocinas<span class="tooltip-content">Subfam√≠lia de citocinas que direcionam a migra√ß√£o de leuc√≥citos.</span></span>.</p><h4>O Hemograma como Janela da Inflama√ß√£o</h4><p>O leucograma reflete diretamente os processos inflamat√≥rios. A an√°lise deve ser feita com valores absolutos.</p><div id="table2-container"></div><div id="table3-container"></div><h4>An√°lise Laboratorial 2: Efeitos Sist√™micos e a CIVD na Sepse</h4><p>A <span class="tooltip">sepse<span class="tooltip-content">Resposta inflamat√≥ria sist√™mica desregulada a uma infec√ß√£o, que pode levar √† fal√™ncia de √≥rg√£os.</span></span> √© uma resposta inflamat√≥ria sist√™mica que pode levar √† <span class="tooltip">CIVD<span class="tooltip-content">Coagula√ß√£o Intravascular Disseminada: ativa√ß√£o sist√™mica da coagula√ß√£o, levando a trombose e hemorragia por consumo de fatores.</span></span>. Citocinas (TNF, IL-1) induzem a express√£o massiva do <span class="tooltip">Fator Tecidual<span class="tooltip-content">O principal iniciador da via extr√≠nseca da coagula√ß√£o.</span></span>, ativando a coagula√ß√£o de forma descontrolada. Simultaneamente, os sistemas anticoagulantes s√£o suprimidos. O resultado √© a forma√ß√£o de microtrombos, isquemia, e um consumo de plaquetas e fatores que leva a um risco paradoxal de sangramento grave.</p>`
                            },
                            {
                                id: 'sec2-2', title: 'Reparo Tecidual e Fibrose Medular',
                                content: `<h3>Fundamentos do Reparo</h3><p>O reparo tecidual pode ocorrer por <b>regenera√ß√£o</b> (restaura√ß√£o completa) ou <b>cicatriza√ß√£o</b> (<span class="tooltip">fibrose<span class="tooltip-content">Deposi√ß√£o de tecido conjuntivo, formando uma cicatriz.</span></span>). A fibrose √© orquestrada por fatores de crescimento como <span class="tooltip">TGF-Œ≤<span class="tooltip-content">Fator de Crescimento Transformador-beta, o principal indutor da fibrose.</span></span> e <span class="tooltip">PDGF<span class="tooltip-content">Fator de Crescimento Derivado de Plaquetas, que recruta e ativa fibroblastos.</span></span>.</p><h4>Estudo de Caso 6: Mielofibrose Prim√°ria (MFP)</h4><p>Na MFP, uma neoplasia mieloproliferativa, os megacari√≥citos clonais e at√≠picos liberam grandes quantidades de PDGF e TGF-Œ≤. Esses fatores estimulam fibroblastos normais a depositar col√°geno excessivamente na medula √≥ssea, levando √† fibrose reativa. A destrui√ß√£o do microambiente medular suprime a hematopoiese normal e a desloca para outros √≥rg√£os (hematopoiese extramedular). Isso resulta em <span class="tooltip">leucoeritroblastose<span class="tooltip-content">Presen√ßa de precursores de leuc√≥citos e eritr√≥citos no sangue perif√©rico.</span></span> e na forma√ß√£o de <span class="tooltip">dacri√≥citos<span class="tooltip-content">Hem√°cia em forma de l√°grima, um achado morfol√≥gico altamente sugestivo de fibrose medular.</span></span>.</p>`
                            }
                        ]
                    },
                    {
                        id: 'modulo3', title: 'M√≥dulo 3: Dist√∫rbios Hemodin√¢micos e da Coagula√ß√£o',
                        sections: [
                            {
                                id: 'sec3-1', title: 'Hemostasia e Trombose',
                                content: `<h3>Fundamentos da Hemostasia</h3><p>A <span class="tooltip">hemostasia<span class="tooltip-content">Processo fisiol√≥gico que impede o sangramento, formando um co√°gulo no local da les√£o.</span></span> √© o equil√≠brio entre manter o sangue fluido e formar co√°gulos. Ela se divide em:</p><ul><li><b>Hemostasia Prim√°ria:</b> Forma√ß√£o do tamp√£o plaquet√°rio. Envolve ades√£o (via <span class="tooltip">FvW<span class="tooltip-content">Fator de von Willebrand, uma prote√≠na que serve de ponte entre o col√°geno e as plaquetas.</span></span>), ativa√ß√£o (com libera√ß√£o de ADP e <span class="tooltip">TXA2<span class="tooltip-content">Potente ativador e recrutador de plaquetas.</span></span>) e agrega√ß√£o de plaquetas.</li><li><b>Hemostasia Secund√°ria:</b> Ativa√ß√£o da cascata da coagula√ß√£o para formar uma malha de fibrina est√°vel. As vias extr√≠nseca (iniciada pelo <span class="tooltip">TF<span class="tooltip-content">Fator Tecidual, o principal iniciador da via extr√≠nseca da coagula√ß√£o.</span></span>) e intr√≠nseca convergem para gerar a <span class="tooltip">trombina<span class="tooltip-content">Enzima central da coagula√ß√£o, que converte fibrinog√™nio em fibrina.</span></span>, a enzima central.</li></ul><p>A <span class="tooltip">trombose<span class="tooltip-content">Forma√ß√£o patol√≥gica de um co√°gulo dentro de um vaso sangu√≠neo intacto.</span></span> √© influenciada pela <span class="tooltip">Tr√≠ade de Virchow<span class="tooltip-content">Modelo que descreve os 3 fatores que contribuem para a trombose: les√£o endotelial, altera√ß√£o do fluxo sangu√≠neo e hipercoagulabilidade.</span></span>: (1) Les√£o endotelial, (2) Estase ou turbul√™ncia do fluxo, e (3) Hipercoagulabilidade.</p><h4>Falhas na Hemostasia</h4><ul><li><b>Estudo de Caso 7: PTI (P√∫rpura Trombocitop√™nica Imune):</b> Defeito na hemostasia prim√°ria. Autoanticorpos (IgG) opsonizam plaquetas, que s√£o destru√≠das no ba√ßo. Cl√≠nica: <span class="tooltip">pet√©quias<span class="tooltip-content">Pequenos pontos hemorr√°gicos (<2mm) na pele ou mucosas, caracter√≠sticos de problemas plaquet√°rios.</span></span> e equimoses.</li><li><b>Estudo de Caso 8: Hemofilia A:</b> Defeito na hemostasia secund√°ria. Defici√™ncia heredit√°ria do Fator VIII, essencial para a via intr√≠nseca. Cl√≠nica: sangramentos profundos em articula√ß√µes (<span class="tooltip">hemartroses<span class="tooltip-content">Sangramento dentro de uma articula√ß√£o, muito doloroso e destrutivo.</span></span>) e m√∫sculos. O TTPA √© prolongado.</li><li><b>Estudo de Caso 9: CIVD:</b> Falha sist√™mica e tempestade hemost√°tica. Ativa√ß√£o massiva da coagula√ß√£o consome plaquetas e fatores, gerando microtrombos e, paradoxalmente, hemorragia. O diagn√≥stico √© auxiliado pelo escore da ISTH.</li></ul><div id="table4-container"></div>`
                            }
                        ]
                    },
                    {
                        id: 'modulo4', title: 'M√≥dulo 4: Neoplasia e Autoimunidade',
                        sections: [
                            {
                                id: 'sec4-1', title: 'Neoplasia e as "Marcas do C√¢ncer"',
                                content: `<h3>Fundamentos da Biologia do C√¢ncer</h3><p>O c√¢ncer √© uma doen√ßa gen√©tica resultante do ac√∫mulo de muta√ß√µes em classes de genes:</p><ul><li><span class="tooltip"><b>Proto-oncogenes:</b><span class="tooltip-content">Genes normais que promovem o crescimento celular. Quando mutados, tornam-se oncogenes.</span></span> Atuam como 'aceleradores' presos quando se tornam <span class="tooltip">oncogenes<span class="tooltip-content">Vers√£o mutada de um proto-oncogene que impulsiona a prolifera√ß√£o celular de forma cont√≠nua.</span></span>.</li><li><span class="tooltip"><b>Genes Supressores de Tumor:</b><span class="tooltip-content">Genes que inibem a prolifera√ß√£o celular, atuando como 'freios'. Sua perda de fun√ß√£o promove o c√¢ncer.</span></span> Atuam como 'freios'. O mais famoso √© o <span class="tooltip">TP53<span class="tooltip-content">Gene supressor de tumor conhecido como 'guardi√£o do genoma', pois controla o ciclo celular e a apoptose.</span></span>, o 'guardi√£o do genoma'.</li><li><b>Genes de Reparo de DNA:</b> Sua inativa√ß√£o leva √† instabilidade gen√¥mica.</li></ul><p>As <span class="tooltip">"Marcas do C√¢ncer"<span class="tooltip-content">Conjunto de 8 capacidades biol√≥gicas fundamentais adquiridas pelas c√©lulas durante o desenvolvimento do c√¢ncer (prolifera√ß√£o, evas√£o da morte, etc.).</span></span> de Hanahan e Weinberg organizam a complexidade da biologia tumoral.</p><h4>As "Marcas" nas Neoplasias Hematol√≥gicas</h4><div id="table5-container"></div><ul><li><b>Exemplo 1: LMC (Leucemia Mieloide Cr√¥nica):</b> Ilustra a 'sinaliza√ß√£o proliferativa sustentada'. A transloca√ß√£o t(9;22) cria a quinase <span class="tooltip">BCR-ABL1<span class="tooltip-content">Oncoprote√≠na de fus√£o resultante da transloca√ß√£o t(9;22), definidora da LMC, que est√° permanentemente ativa.</span></span>, que ativa vias de prolifera√ß√£o de forma independente de fatores de crescimento.</li><li><b>Exemplo 2: Linfoma Folicular (LF):</b> Mostra a 'resist√™ncia √† morte celular'. A transloca√ß√£o t(14;18) causa a superexpress√£o da prote√≠na anti-apopt√≥tica <span class="tooltip">BCL2<span class="tooltip-content">Prote√≠na anti-apopt√≥tica. Sua superexpress√£o no Linfoma Folicular impede a morte celular programada, conferindo uma vantagem de sobreviv√™ncia.</span></span>, bloqueando a apoptose e permitindo o ac√∫mulo das c√©lulas do linfoma.</li><li><b>Exemplo 3: Mieloma M√∫ltiplo (MM):</b> Demonstra a import√¢ncia do microambiente tumoral. As c√©lulas de mieloma aderem √†s c√©lulas estromais, que secretam <span class="tooltip">IL-6<span class="tooltip-content">Interleucina-6, um potente fator de crescimento e sobreviv√™ncia para as c√©lulas de mieloma.</span></span>, um fator de crescimento para o mieloma. Em troca, o mieloma remodela o osso, criando um ciclo vicioso de suporte.</li></ul>`
                            },
                            {
                                id: 'sec4-2', title: 'Autoimunidade e Citotoxicidade',
                                content: `<h3>Fundamentos da Toler√¢ncia e Autoimunidade</h3><p>A <span class="tooltip">autoimunidade<span class="tooltip-content">Falha do sistema imune em reconhecer os pr√≥prios tecidos, levando a um ataque contra o 'pr√≥prio'.</span></span> √© a quebra da <span class="tooltip">toler√¢ncia imunol√≥gica<span class="tooltip-content">Capacidade do sistema imune de distinguir o 'pr√≥prio' do 'n√£o-pr√≥prio', evitando ataques ao pr√≥prio corpo.</span></span>. Esta toler√¢ncia √© estabelecida pela toler√¢ncia central (no timo e medula √≥ssea) e perif√©rica (nos tecidos). A <span class="tooltip">Hipersensibilidade do Tipo II<span class="tooltip-content">Rea√ß√£o imune mediada por anticorpos (IgG/IgM) que se ligam a ant√≠genos na superf√≠cie celular, causando destrui√ß√£o da c√©lula.</span></span> √© um mecanismo chave em doen√ßas autoimunes, onde anticorpos causam destrui√ß√£o celular via opsoniza√ß√£o, inflama√ß√£o mediada por complemento ou citotoxicidade celular.</p><h4>Estudo de Caso 10: Anemia Hemol√≠tica Autoimune (AHAI)</h4><p>A AHAI √© um exemplo cl√°ssico de hipersensibilidade tipo II, onde autoanticorpos destroem eritr√≥citos. O diagn√≥stico √© confirmado pelo <span class="tooltip">TAD (Teste de Coombs Direto)<span class="tooltip-content">Teste de Antiglobulina Direto, que detecta anticorpos e/ou complemento ligados √† superf√≠cie das hem√°cias do paciente.</span></span>.</p><div id="table6-container"></div><ul><li><b>AHAI por Anticorpos Quentes (WAIHA):</b> A forma mais comum, mediada por <b>IgG</b> que reage a 37¬∞C. A hem√≥lise √© principalmente <b>extravascular (no ba√ßo)</b>, onde macr√≥fagos fagocitam as hem√°cias opsonizadas. A remo√ß√£o parcial da membrana pelos macr√≥fagos cria <span class="tooltip">esfer√≥citos<span class="tooltip-content">Hem√°cias pequenas, esf√©ricas e sem palidez central, resultantes da perda de membrana.</span></span>. O TAD √© positivo para IgG (√†s vezes com C3).</li><li><b>Doen√ßa da Aglutinina a Frio (CAD):</b> Mediada por <b>IgM</b>, que se liga aos eritr√≥citos em temperaturas frias (<37¬∞C) nas extremidades. A IgM √© uma potente ativadora do <span class="tooltip">complemento<span class="tooltip-content">Sistema de prote√≠nas plasm√°ticas que, quando ativado, promove inflama√ß√£o e lise celular.</span></span>. A hem√≥lise tem um componente <b>intravascular</b> (pela lise direta via MAC) e <b>extravascular (no f√≠gado)</b>, onde macr√≥fagos reconhecem hem√°cias opsonizadas com C3b. O TAD √© caracteristicamente positivo apenas para <b>C3</b>.</li></ul>`
                            }
                        ]
                    }
                ],
                quizzes: {
                    'sec1-1': [ { q: "Qual o termo para o estado de equil√≠brio din√¢mico da c√©lula?", options: ["Metaplasia", "Homeostase", "Hip√≥xia", "Apoptose"], a: 1, d: 'F√°cil' }, { q: "O influxo excessivo de qual √≠on ativa enzimas destrutivas como fosfolipases e proteases durante a les√£o celular?", options: ["S√≥dio (Na+)", "Pot√°ssio (K+)", "C√°lcio (Ca¬≤+)", "Cloro (Cl-)"], a: 2, d: 'Dif√≠cil' } ],
                    'sec1-2': [ { q: "O aumento no TAMANHO das c√©lulas em resposta a um est√≠mulo √© chamado de:", options: ["Hiperplasia", "Atrofia", "Hipertrofia", "Metaplasia"], a: 2, d: 'F√°cil' }, { q: "Qual a principal consequ√™ncia patol√≥gica do aumento excessivo da viscosidade sangu√≠nea na policitemia secund√°ria?", options: ["Aumento do risco de infec√ß√µes", "Aumento do risco de eventos tromb√≥ticos", "Redu√ß√£o da press√£o arterial", "Insufici√™ncia renal aguda"], a: 1, d: 'Dif√≠cil' } ],
                    'sec1-3': [ { q: "Qual tipo de morte celular √© caracterizado por ser um processo programado e que N√ÉO causa inflama√ß√£o?", options: ["Necrose", "Apoptose", "Piroptose", "Oncrose"], a: 1, d: 'F√°cil' }, { q: "O que desencadeia o afoi√ßamento dos eritr√≥citos na Anemia Falciforme?", options: ["Alta tens√£o de oxig√™nio", "Baixa tens√£o de oxig√™nio", "Aumento da glicose no sangue", "Presen√ßa de anticorpos"], a: 1, d: 'M√©dio' } ],
                    'sec2-1': [ { q: "Qual c√©lula √© predominante na inflama√ß√£o aguda?", options: ["Linf√≥cito", "Macr√≥fago", "Neutr√≥filo", "Plasm√≥cito"], a: 2, d: 'F√°cil' }, { q: "Um desvio √† esquerda degenerativo (mais imaturos que maduros) indica:", options: ["Uma resposta medular robusta e bom progn√≥stico", "Uma infec√ß√£o viral leve", "Que a demanda excede a capacidade da medula, um mau progn√≥stico", "Uma rea√ß√£o al√©rgica"], a: 2, d: 'Dif√≠cil' } ],
                    'sec2-2': [ { q: "Qual fator de crescimento √© considerado o principal indutor da fibrose?", options: ["EPO", "G-CSF", "TGF-Œ≤", "PDGF"], a: 2, d: 'M√©dio' }, { q: "A presen√ßa de dacri√≥citos (hem√°cias em l√°grima) no sangue perif√©rico √© altamente sugestiva de:", options: ["Anemia falciforme", "Infec√ß√£o viral", "Fibrose medular", "Defici√™ncia de ferro"], a: 2, d: 'M√©dio' } ],
                    'sec3-1': [ { q: "Qual processo √© respons√°vel pela forma√ß√£o do tamp√£o plaquet√°rio inicial?", options: ["Hemostasia Secund√°ria", "Fibrin√≥lise", "Hemostasia Prim√°ria", "Inflama√ß√£o"], a: 2, d: 'F√°cil' }, { q: "Qual dos seguintes componentes N√ÉO faz parte da Tr√≠ade de Virchow?", options: ["Les√£o endotelial", "Hipercoagulabilidade", "Estase do fluxo sangu√≠neo", "Hipotens√£o arterial"], a: 3, d: 'M√©dio' } ],
                    'sec4-1': [ { q: "Genes que normalmente funcionam como 'freios' da prolifera√ß√£o celular s√£o chamados de:", options: ["Oncogenes", "Proto-oncogenes", "Genes Supressores de Tumor", "Genes de reparo"], a: 2, d: 'F√°cil' }, { q: "No Linfoma Folicular, a superexpress√£o da prote√≠na BCL2 confere qual 'marca do c√¢ncer' √†s c√©lulas neopl√°sicas?", options: ["Indu√ß√£o de angiog√™nese", "Resist√™ncia √† morte celular", "Sinaliza√ß√£o proliferativa sustentada", "Invas√£o e met√°stase"], a: 1, d: 'M√©dio' } ],
                    'sec4-2': [ { q: "Qual teste laboratorial √© crucial para confirmar o diagn√≥stico de Anemia Hemol√≠tica Autoimune (AHAI)?", options: ["Hemograma completo", "Contagem de reticul√≥citos", "Teste de Coombs Direto (TAD)", "Bi√≥psia de medula √≥ssea"], a: 2, d: 'F√°cil' }, { q: "Na AHAI por anticorpos quentes (WAIHA), qual classe de anticorpo est√° tipicamente envolvida e onde ocorre a principal destrui√ß√£o das hem√°cias?", options: ["IgM / F√≠gado", "IgA / Intestino", "IgG / Ba√ßo", "IgE / Pele"], a: 2, d: 'M√©dio' } ],
                },
                tables: {
                    table1: { title: "Tabela 1: Necrose vs. Apoptose", headers: ["Caracter√≠stica", "Apoptose", "Necrose"], rows: [ ["Est√≠mulo", "Fisiol√≥gico ou Patol√≥gico", "Sempre Patol√≥gico"], ["Escopo", "C√©lulas individuais ou pequenos grupos", "Grandes grupos de c√©lulas cont√≠guas"], ["Morfologia Celular", "Encolhimento celular, condensa√ß√£o da cromatina", "Edema celular (oncrose), desnatura√ß√£o de prote√≠nas"], ["Integridade da Membrana", "Mantida; forma√ß√£o de corpos apopt√≥ticos", "Perdida; ruptura da membrana e lise celular"], ["Mecanismo Bioqu√≠mico", "Processo ativo, dependente de ATP, mediado por caspases", "Processo passivo, falha na produ√ß√£o de ATP"], ["Resposta Tecidual", "Fagocitose silenciosa, sem inflama√ß√£o", "Inflama√ß√£o aguda com recrutamento de neutr√≥filos"], ["Marcadores Laboratoriais", "Nenhum espec√≠fico no soro", "Libera√ß√£o de enzimas (ex: LDH) para o soro"] ] },
                    table2: { title: "Tabela 2: Principais Citocinas na Inflama√ß√£o e Hematopoiese", headers: ["Citocina", "Principais Fontes", "Fun√ß√µes na Inflama√ß√£o", "Fun√ß√µes na Hematopoiese"], rows: [ ["IL-1, TNF-Œ±", "Macr√≥fagos, mon√≥citos", "Ativa√ß√£o endotelial, febre, ativa√ß√£o de leuc√≥citos", "Estimulam a produ√ß√£o de fatores de crescimento de col√¥nias (CSFs)"], ["IL-6", "Macr√≥fagos, linf√≥citos T", "Indu√ß√£o de prote√≠nas de fase aguda, prolifera√ß√£o de linf√≥citos B", "Estimula a produ√ß√£o de plaquetas, promove diferencia√ß√£o de c√©lulas B"], ["G-CSF", "Macr√≥fagos, fibroblastos", "Mobiliza√ß√£o e ativa√ß√£o de neutr√≥filos", "Principal fator para prolifera√ß√£o e diferencia√ß√£o de neutr√≥filos"], ["GM-CSF", "Linf√≥citos T, macr√≥fagos", "Ativa√ß√£o de macr√≥fagos e neutr√≥filos", "Estimula progenitores granuloc√≠ticos e monoc√≠ticos"], ["EPO", "C√©lulas renais, hepat√≥citos", "N/A", "Principal fator para prolifera√ß√£o e diferencia√ß√£o da linhagem eritroide"] ] },
                    table3: { title: "Tabela 3: Interpreta√ß√£o dos Padr√µes Leucocit√°rios", headers: ["Padr√£o Leucocit√°rio", "Defini√ß√£o", "Mecanismo Principal", "Interpreta√ß√£o Comum"], rows: [ ["Neutrofilia", "Aumento de neutr√≥filos", "Libera√ß√£o de reservas, aumento da produ√ß√£o, demargina√ß√£o", "Infec√ß√£o bacteriana aguda, inflama√ß√£o est√©ril, estresse"], ["Neutropenia", "Redu√ß√£o de neutr√≥filos", "Consumo aumentado, produ√ß√£o diminu√≠da, sequestro", "Sepse grave, quimioterapia, aplasia medular"], ["Desvio √† Esquerda Regenerativo", "Neutrofilia com maduros > imaturos", "Resposta medular robusta √† inflama√ß√£o", "Inflama√ß√£o aguda controlada, bom progn√≥stico"], ["Desvio √† Esquerda Degenerativo", "Imaturos > maduros", "Demanda excede a capacidade de produ√ß√£o da medula", "Inflama√ß√£o grave/sepse, progn√≥stico reservado"], ["Linfocitose", "Aumento de linf√≥citos", "Resposta imune a ant√≠genos, prolifera√ß√£o clonal", "Infec√ß√µes virais, inflama√ß√£o cr√¥nica, LLC"], ["Monocitose", "Aumento de mon√≥citos", "Demanda por macr√≥fagos teciduais", "Inflama√ß√£o cr√¥nica (ex: tuberculose), neoplasias mieloides"], ["Eosinofilia", "Aumento de eosin√≥filos", "Resposta a al√©rgenos ou parasitas (mediada por IL-5)", "Rea√ß√µes al√©rgicas, infec√ß√µes parasit√°rias"] ] },
                    table4: { title: "Tabela 4: Escore Diagn√≥stico da ISTH para CIVD Manifesta", headers: ["Par√¢metro Laboratorial", "Resultado", "Pontos"], rows: [ ["Contagem de Plaquetas", "> 100.000/ŒºL", "0"], ["", "50.000-100.000/ŒºL", "1"], ["", "< 50.000/ŒºL", "2"], ["Marcadores Relacionados √† Fibrina (ex: D-d√≠mero)", "Sem aumento", "0"], ["", "Aumento moderado", "2"], ["", "Aumento acentuado", "3"], ["Tempo de Protrombina (TP) - Aumento", "< 3 segundos", "0"], ["", "3-6 segundos", "1"], ["", "> 6 segundos", "2"], ["N√≠vel de Fibrinog√™nio", "> 1,0 g/L", "0"], ["", "< 1,0 g/L", "1"], ["<b>Interpreta√ß√£o</b>", "<b>< 5 pontos: Sugestivo de CIVD n√£o manifesta</b>", ""], ["", "<b>‚â• 5 pontos: Compat√≠vel com CIVD manifesta</b>", ""] ] },
                    table5: { title: "Tabela 5: As 'Marcas do C√¢ncer' em Neoplasias Hematol√≥gicas", headers: ["Marca do C√¢ncer", "Mecanismo Geral", "Exemplo Paradigm√°tico em Hematologia"], rows: [ ["Sinaliza√ß√£o Proliferativa Sustentada", "Ativa√ß√£o de vias de crescimento independentemente de est√≠mulos externos", "Tirosina quinase constitutivamente ativa; <b>BCR-ABL1</b> na Leucemia Mieloide Cr√¥nica (LMC)"], ["Evas√£o de Supressores de Crescimento", "Inativa√ß√£o de genes que freiam o ciclo celular", "Perda de fun√ß√£o do gene <b>TP53</b> em muitas leucemias agudas"], ["Resist√™ncia √† Morte Celular", "Inibi√ß√£o das vias de apoptose", "Superexpress√£o da prote√≠na anti-apopt√≥tica <b>BCL2</b> devido √† transloca√ß√£o t(14;18) no Linfoma Folicular (LF)"], ["Imortalidade Replicativa", "Manuten√ß√£o dos tel√¥meros para permitir divis√µes ilimitadas", "Reativa√ß√£o da enzima telomerase, comum em neoplasias avan√ßadas"], ["Indu√ß√£o de Angiog√™nese", "Est√≠mulo √† forma√ß√£o de novos vasos sangu√≠neos", "Secre√ß√£o de VEGF por c√©lulas leuc√™micas na Leucemia Mieloide Aguda (LMA)"], ["Ativa√ß√£o de Invas√£o e Met√°stase", "Capacidade de invadir tecidos e colonizar locais distantes", "Infiltra√ß√£o da medula √≥ssea, ba√ßo, f√≠gado e SNC por blastos leuc√™micos"], ["Reprograma√ß√£o do Metabolismo Energ√©tico", "Altera√ß√£o do metabolismo para suportar a prolifera√ß√£o r√°pida", "Aumento da capta√ß√£o de glicose em linfomas agressivos"], ["Evas√£o da Destrui√ß√£o Imune", "Capacidade de se esconder ou suprimir o sistema imunol√≥gico", "Intera√ß√£o com o microambiente (c√©lulas estromais) e secre√ß√£o de <b>IL-6</b> no Mieloma M√∫ltiplo (MM)"] ] },
                    table6: { title: "Tabela 6: Fisiopatologia e Achados na Anemia Hemol√≠tica Autoimune (AHAI)", headers: ["Caracter√≠stica", "AHAI por Anticorpos Quentes (WAIHA)", "Doen√ßa da Aglutinina a Frio (CAD)"], rows: [ ["Isotipo do Anticorpo", "Geralmente <b>IgG</b>", "Geralmente <b>IgM</b>"], ["Temperatura √ìtima", "<b>37¬∞C</b> (temperatura corporal)", "<b>< 37¬∞C</b> (temperaturas frias, extremidades)"], ["Principal Local de Hem√≥lise", "<b>Extravascular</b> (principalmente no ba√ßo)", "<b>Intravascular</b> e <b>Extravascular</b> (principalmente no f√≠gado)"], ["Mecanismo de Destrui√ß√£o", "Opsoniza√ß√£o por IgG e fagocitose por macr√≥fagos espl√™nicos", "Potente ativa√ß√£o do complemento (lise pelo MAC ou fagocitose de c√©lulas opsonizadas com C3b)"], ["Achados no Esfrega√ßo", "<b>Esfer√≥citos</b>, policromasia", "<b>Aglutina√ß√£o de hem√°cias</b>, policromasia"], ["Resultado T√≠pico do TAD", "Positivo para <b>IgG</b> (com ou sem C3)", "Positivo <b>apenas para C3</b>"], ["Sintomas Caracter√≠sticos", "Sinais de anemia (fadiga, palidez), icter√≠cia, esplenomegalia", "Acrocianose (extremidades azuladas), hemoglobin√∫ria induzida pelo frio"] ] }
                },
                references: [
                    { source: "PubMed Central (PMC7171462)", url: "https://pmc.ncbi.nlm.nih.gov/articles/PMC7171462/", comment: "Uma revis√£o aprofundada sobre os mecanismos e a morfologia da les√£o, adapta√ß√£o e morte celular." }, { source: "NCBI Bookshelf (NBK526045)", url: "https://www.ncbi.nlm.nih.gov/books/NBK526045/", comment: "Um cap√≠tulo de refer√™ncia sobre a histologia da morte celular, abordando apoptose e necrose." }, { source: "PubMed Central (PMC3271273)", url: "https://pmc.ncbi.nlm.nih.gov/articles/PMC3271273/", comment: "Artigo detalhado sobre o mecanismo da toxicidade do benzeno e seus efeitos hematol√≥gicos." }, { source: "American Society of Hematology (Blood)", url: "https://ashpublications.org/blood/article/139/16/2441/476633/Breakthrough-science-hypoxia-inducible-factors", comment: "Artigo de ponta sobre os fatores induz√≠veis por hip√≥xia (HIF) e sua regula√ß√£o da hematopoiese." }, { source: "Mayo Clinic (Aplastic Anemia)", url: "https://www.mayoclinic.org/diseases-conditions/aplastic-anemia/symptoms-causes/syc-20355015", comment: "Recurso cl√≠nico confi√°vel explicando as causas e sintomas da anemia apl√°sica." }, { source: "FSJ (Fisiopatologia da Anemia Falciforme)", url: "https://www.fsj.edu.br/transformar/index.php/transformar/article/download/60/56", comment: "Artigo em portugu√™s que detalha a fisiopatologia da anemia falciforme." }, { source: "PubMed Central (PMC10486945)", url: "https://pmc.ncbi.nlm.nih.gov/articles/PMC10486945/", comment: "Vis√£o geral da fisiopatologia da Coagula√ß√£o Intravascular Disseminada (CIVD)." }, { source: "Journal of Experimental Medicine", url: "https://rupress.org/jem/article/217/3/e20190103/133821/Transforming-growth-factor-in-tissue-fibrosisTGF", comment: "Investiga√ß√£o sobre o papel central do TGF-Œ≤ na fibrose tecidual." }, { source: "ARUP Consult (Disseminated Intravascular Coagulation)", url: "https://arupconsult.com/content/disseminated-intravascular-coagulation", comment: "Guia pr√°tico para o diagn√≥stico laboratorial da CIVD, incluindo o escore da ISTH." }, { source: "EPFL (Hallmarks of Cancer)", url: "https://www.epfl.ch/labs/hanahan-lab/wp-content/uploads/2019/02/HanahanWeinberg-CH_2-Oncology-DeVita2014.pdf", comment: "O cap√≠tulo fundamental de Hanahan e Weinberg que define as 'Marcas do C√¢ncer'." }, { source: "PubMed Central (PMC3461914)", url: "https://pmc.ncbi.nlm.nih.gov/articles/PMC3461914/", comment: "An√°lise da patog√™nese do Linfoma Folicular, com foco na transloca√ß√£o t(14;18) e no gene BCL2." }, { source: "Merck Manuals Professional (Autoimmune Hemolytic Anemia)", url: "https://www.merckmanuals.com/professional/hematology-and-oncology/anemias-caused-by-hemolysis/autoimmune-hemolytic-anemia", comment: "Refer√™ncia cl√≠nica completa sobre a AHAI, detalhando as formas quente e fria." }, { source: "NCBI Bookshelf (NBK547707)", url: "https://www.ncbi.nlm.nih.gov/books/NBK547707/", comment: "Explica√ß√£o detalhada sobre o Teste de Coombs (Antiglobulina)." }
                ],
                glossario: {
                    "ATP": "Adenosina Trifosfato - a moeda energ√©tica da c√©lula, essencial para todos os processos que requerem energia",
                    "Homeostase": "Estado de equil√≠brio din√¢mico mantido pelos sistemas biol√≥gicos para preservar condi√ß√µes internas est√°veis",
                    "Patologia": "Estudo das rea√ß√µes fundamentais de c√©lulas e tecidos a est√≠mulos nocivos, que s√£o a base de todas as doen√ßas",
                    "Apoptose": "Morte celular programada, processo ativo que requer energia e √© mediado por caspases",
                    "Necrose": "Morte celular acidental e descontrolada que ocorre ap√≥s les√£o aguda e severa",
                    "Hiperplasia": "Aumento no n√∫mero de c√©lulas em resposta a est√≠mulos fisiol√≥gicos ou patol√≥gicos",
                    "Hipertrofia": "Aumento no tamanho das c√©lulas sem aumento no n√∫mero",
                    "Atrofia": "Redu√ß√£o no tamanho e na atividade metab√≥lica de uma c√©lula",
                    "Metaplasia": "Mudan√ßa revers√≠vel na qual um tipo celular diferenciado √© substitu√≠do por outro",
                    "Eritropoietina (EPO)": "Horm√¥nio produzido pelos rins que estimula a produ√ß√£o de eritr√≥citos",
                    "HIF": "Fator Induz√≠vel por Hip√≥xia - regula a resposta celular √† baixa concentra√ß√£o de oxig√™nio",
                    "Anemia Falciforme": "Doen√ßa heredit√°ria causada por muta√ß√£o na Œ≤-globina, resultando em HbS",
                    "Inflama√ß√£o": "Resposta fundamental e protetora dos tecidos vascularizados a agentes agressores",
                    "Leucograma": "Contagem diferencial de leuc√≥citos que funciona como 'bi√≥psia l√≠quida' da resposta inflamat√≥ria",
                    "CIVD": "Coagula√ß√£o Intravascular Disseminada - ativa√ß√£o sist√™mica e descontrolada da coagula√ß√£o",
                    "Mielofibrose Prim√°ria": "Neoplasia mieloproliferativa caracterizada por fibrose medular reativa",
                    "Hemostasia": "Processo fisiol√≥gico que mant√©m o sangue fluido mas permite forma√ß√£o de tamp√£o hemost√°tico",
                    "PTI": "P√∫rpura Trombocitop√™nica Imune - doen√ßa autoimune com destrui√ß√£o de plaquetas por autoanticorpos",
                    "Hemofilia A": "Doen√ßa heredit√°ria ligada ao X causada por defici√™ncia do Fator VIII",
                    "LMC": "Leucemia Mieloide Cr√¥nica - neoplasia definida pela transloca√ß√£o t(9;22)",
                    "BCR-ABL1": "Gene de fus√£o que codifica tirosina quinase constitutivamente ativa na LMC",
                    "Linfoma Folicular": "Linfoma definido pela transloca√ß√£o t(14;18) e superexpress√£o de BCL2",
                    "AHAI": "Anemia Hemol√≠tica Autoimune - destrui√ß√£o prematura de eritr√≥citos por autoanticorpos",
                    "TAD": "Teste de Antiglobulina Direto - confirma a presen√ßa de anticorpos na superf√≠cie eritrocit√°ria"
                }
            };

            // --- VARI√ÅVEIS GLOBAIS DO APP ---
            const mainContent = document.getElementById('mainContent');
            const navMenu = document.getElementById('nav-menu');
            const sidebar = document.getElementById('sidebar');
            const hamburger = document.querySelector('.hamburger');
            const quizModal = document.getElementById('quiz-modal');
            const quizModalContent = document.getElementById('quiz-modal-content');

            // --- FUN√á√ïES DE RENDERIZA√á√ÉO ---

            const renderPage = (pageId) => {
                let html = '';
                // Adiciona a classe fade-in para a anima√ß√£o
                mainContent.classList.remove('fade-in');
                void mainContent.offsetWidth; // Trigger reflow para reiniciar a anima√ß√£o
                mainContent.classList.add('fade-in');

                if (pageId.startsWith('modulo')) {
                    html = renderModule(pageId);
                } else {
                    switch (pageId) {
                        case 'home': html = getHomePageHtml(); break;
                        case 'flashcards': html = getFlashcardsPageHtml(); break;
                        case 'simulado': html = getSimuladoPageHtml(); break;
                        case 'glossario': html = getGlossarioPageHtml(); break;
                        case 'references': html = getReferencesPageHtml(); break;
                        default: html = '<div class="content-box"><h2>P√°gina n√£o encontrada</h2></div>';
                    }
                }
                mainContent.innerHTML = html;
                attachPageEventListeners(pageId);
            };

            const getHomePageHtml = () => `
                <div class="content-box">
                    <h1>Bem-vindo ao Curso de Patologia e Hematologia</h1>
                    <p>Esta plataforma aprimorada combina um design familiar com funcionalidades avan√ßadas para uma experi√™ncia de aprendizado superior. Navegue pelos m√≥dulos, teste seus conhecimentos e explore os recursos interativos.</p>
                    <h2>Objetivos do Curso</h2>
                    <ul>
                        <li>Compreender os princ√≠pios fundamentais da patologia geral.</li>
                        <li>Aplicar esses princ√≠pios √† hematologia cl√≠nica e laboratorial.</li>
                        <li>Analisar casos cl√≠nicos paradigm√°ticos e interpretar achados laboratoriais.</li>
                        <li>Desenvolver racioc√≠nio cl√≠nico-patol√≥gico integrado.</li>
                    </ul>
                </div>
                <div class="content-box">
                    <div class="profile-container">
                        <div class="profile-pic-container">
                            <img src=foto.jpg" alt="Foto de Rodrigo Niskier Ferreira Barbosa" class="profile-pic">
                        </div>
                        <div class="profile-text">
                            <h2>Rodrigo Niskier Ferreira Barbosa</h2>
                            <p><strong>E-mail:</strong> niskier.rodrigo@gmail.com</p>
                            <p>Formado em Biomedicina (2003, UFPE), especialista em Biologia Molecular (2006, UPE), mestrado em Gen√©tica e Biologia Molecular (2007, UFRN), atua como professor do ensino superior desde 2007 (aprox. 18 anos).</p>
                            <p>Atualmente leciona Mecanismos de Agress√£o, Patol√≥gicos e de Defesa no curso de Medicina (UNIPE - Jo√£o Pessoa). Dedica-se a pesquisa acad√™mica te√≥rica em diversas √°reas, incluindo: Imunologia, Gen√©tica e Neoplasias.</p>
                            <p>Desde 2024 vem publicando e desenvolvendo aplica√ß√µes para Web em diversas √°reas, utilizando ferramentas de AI-LLM.</p>
                            <p style="margin-top: 1.5rem;"><strong>Conhe√ßa meu livro 'Autoimunidade: Conex√µes Essenciais: Bases gen√©ticas, neuroend√≥crinas e imunol√≥gicas da perda de toler√¢ncia'.</strong> <a href="https://amzn.to/3GDHw6K" target="_blank" rel="noopener noreferrer" style="color: var(--primary-color); font-weight: bold;">Acesse o link</a>.</p>
                        </div>
                    </div>
                </div>
            `;

            const renderModule = (moduleId) => {
                const module = courseData.modules.find(m => m.id === moduleId);
                if (!module) return '<div class="content-box"><h2>M√≥dulo n√£o encontrado</h2></div>';

                let accordionsHtml = module.sections.map(section => {
                    let sectionContent = section.content;
                    // Substituir placeholders de tabelas pelo HTML real da tabela
                    Object.keys(courseData.tables).forEach(tableId => {
                        if (sectionContent.includes(`<div id="${tableId}-container"></div>`)) {
                            sectionContent = sectionContent.replace(`<div id="${tableId}-container"></div>`, getTableHtml(tableId));
                        }
                    });

                    return `
                        <div class="accordion">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <span>${section.title}</span>
                                <span>‚ñº</span>
                            </div>
                            <div class="accordion-content">
                                ${sectionContent}
                                <button class="btn" data-quiz-id="${section.id}">üéØ Testar Conhecimentos</button>
                            </div>
                        </div>
                    `;
                }).join('');

                return `<div class="content-box"><h1>${module.title}</h1>${accordionsHtml}</div>`;
            };
            
            const getTableHtml = (tableId) => {
                const tableData = courseData.tables[tableId];
                if (!tableData) return '';
                let html = `<div class="table-container"><h4>${tableData.title}</h4><table><thead><tr>${tableData.headers.map(h => `<th>${h}</th>`).join('')}</tr></thead><tbody>`;
                tableData.rows.forEach(row => { html += `<tr>${row.map(cell => `<td>${cell}</td>`).join('')}</tr>`; });
                return html + '</tbody></table></div>';
            };

            const getFlashcardsPageHtml = () => {
                 return `<div class="content-box">
                    <h2>Flashcards de Revis√£o</h2>
                    <p>Flashcards s√£o gerados dinamicamente de todos os termos destacados no curso. Clique no card para virar. Use os bot√µes para navegar.</p>
                    <div class="flashcard-container" id="flashcard-container" style="display:none;">
                        <div class="flashcard" id="flashcard">
                            <div class="flashcard-inner">
                                <div class="flashcard-front"></div>
                                <div class="flashcard-back"></div>
                            </div>
                        </div>
                        <div class="flashcard-nav">
                            <button class="btn btn-secondary" id="prev-card">Anterior</button>
                            <span id="card-counter"></span>
                            <button class="btn btn-secondary" id="next-card">Pr√≥ximo</button>
                        </div>
                        <button class="btn" id="shuffle-cards" style="margin-top: 15px;">üîÑ Embaralhar</button>
                    </div>
                    <p id="no-flashcards-msg">Carregando flashcards...</p>
                </div>`;
            };

            const getSimuladoPageHtml = () => {
                let quizOptionsHtml = '';
                courseData.modules.forEach(mod => {
                    quizOptionsHtml += `<h4 style="margin-top: 1rem;">${mod.title}</h4>`;
                    mod.sections.forEach(sec => {
                        quizOptionsHtml += `<label class="checkbox-item"><input type="checkbox" name="topics" value="${sec.id}"> ${sec.title}</label>`;
                    });
                });

                return `<div class="content-box">
                    <h1>üìù Simulado Personalizado</h1>
                    <p>Selecione os assuntos para gerar um simulado. Ser√£o inclu√≠das 2 quest√µes para cada assunto selecionado.</p>
                    <div class="simulado-config" id="simulado-config">
                        <form id="custom-quiz-form">
                            <div class="config-group">
                                <label>1. Selecione os Assuntos:</label>
                                <div class="checkbox-group">
                                    ${quizOptionsHtml}
                                </div>
                            </div>
                            <div class="config-group">
                                <label>2. N√≠vel de Dificuldade:</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-item"><input type="checkbox" name="difficulty" value="F√°cil" checked> F√°cil</label>
                                    <label class="checkbox-item"><input type="checkbox" name="difficulty" value="M√©dio" checked> M√©dio</label>
                                    <label class="checkbox-item"><input type="checkbox" name="difficulty" value="Dif√≠cil" checked> Dif√≠cil</label>
                                </div>
                            </div>
                            <div style="text-align:center;">
                                <button type="submit" class="btn">üöÄ Gerar Simulado</button>
                            </div>
                        </form>
                    </div>
                    <div id="simulado-results"></div>
                </div>`;
            };
            
            const getGlossarioPageHtml = () => {
                const sortedTerms = Object.keys(courseData.glossario).sort();
                let glossarioHtml = sortedTerms.map(term => `
                    <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #eee;">
                        <h3>${term}</h3>
                        <p>${courseData.glossario[term]}</p>
                    </div>
                `).join('');
                return `<div class="content-box"><h1>üìñ Gloss√°rio</h1>${glossarioHtml}</div>`;
            };

            const getReferencesPageHtml = () => {
                let html = '<div class="content-box"><h2>üîó Aprofundamento e Fontes</h2><p>A seguir, uma lista comentada das principais refer√™ncias utilizadas na elabora√ß√£o do conte√∫do deste curso. Utilize estes links para estudos aprofundados.</p><ul class="reference-list">';
                courseData.references.forEach(ref => {
                    html += `<li><a href="${ref.url}" target="_blank" rel="noopener noreferrer">${ref.source}</a><p>${ref.comment}</p></li>`;
                });
                return html + '</ul></div>';
            };


            // --- L√ìGICA DE EVENTOS ---
            
            // Navega√ß√£o principal
            window.showSection = (sectionId, element) => {
                document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
                element.classList.add('active');
                renderPage(sectionId);
                if (window.innerWidth <= 768) {
                    sidebar.classList.remove('visible');
                    sidebar.classList.add('hidden');
                }
            };

            // Acorde√£o
            window.toggleAccordion = (header) => {
                const content = header.nextElementSibling;
                const isActive = content.classList.contains('active');
                
                document.querySelectorAll('.accordion-content.active').forEach(activeContent => {
                    if (activeContent !== content) {
                        activeContent.classList.remove('active');
                        activeContent.previousElementSibling.classList.remove('active');
                        activeContent.previousElementSibling.querySelector('span:last-child').textContent = '‚ñº';
                    }
                });

                if (!isActive) {
                    content.classList.add('active');
                    header.classList.add('active');
                    header.querySelector('span:last-child').textContent = '‚ñ≤';
                } else {
                    content.classList.remove('active');
                    header.classList.remove('active');
                    header.querySelector('span:last-child').textContent = '‚ñº';
                }
            };
            
            // Anexar listeners espec√≠ficos da p√°gina
            const attachPageEventListeners = (pageId) => {
                // Listener para quizzes de m√≥dulo
                if (pageId.startsWith('modulo')) {
                    mainContent.addEventListener('click', e => {
                        if (e.target.matches('[data-quiz-id]')) {
                            const sectionId = e.target.dataset.quizId;
                            const quizData = courseData.quizzes[sectionId];
                            const section = courseData.modules.flatMap(m => m.sections).find(s => s.id === sectionId);
                            if (quizData && section) {
                                startQuiz(quizData, `Quiz: ${section.title}`);
                            }
                        }
                    });
                } else if (pageId === 'flashcards') {
                    initializeFlashcards();
                } else if (pageId === 'simulado') {
                    // Listener para o formul√°rio do simulado
                    document.getElementById('custom-quiz-form').addEventListener('submit', e => {
                        e.preventDefault();
                        const formData = new FormData(e.target);
                        const selectedTopics = formData.getAll('topics');
                        const selectedDifficulties = formData.getAll('difficulty');
                        
                        if (selectedTopics.length === 0) { 
                            alert('Por favor, selecione pelo menos um assunto.'); 
                            return; 
                        }
                        
                        let questionPool = [];
                        selectedTopics.forEach(topicId => {
                            if (courseData.quizzes[topicId]) {
                                let topicQuestions = courseData.quizzes[topicId].filter(q => selectedDifficulties.includes(q.d));
                                topicQuestions.sort(() => 0.5 - Math.random()); // Embaralha as quest√µes do t√≥pico
                                questionPool.push(...topicQuestions.slice(0, 3)); // Pega as 3 primeiras
                            }
                        });

                        if (questionPool.length === 0) {
                            alert('Nenhuma quest√£o encontrada para os crit√©rios selecionados.');
                            return;
                        }

                        questionPool.sort(() => 0.5 - Math.random()); 
                        startQuiz(questionPool, 'Simulado Personalizado');
                    });
                }
                
                initializeTooltips();
            };

            // --- L√ìGICA DE TOOLTIPS ---
            const initializeTooltips = () => {
                const tooltips = document.querySelectorAll('.tooltip');
                tooltips.forEach(tooltip => {
                    tooltip.addEventListener('mouseenter', (e) => {
                        const tooltipContent = e.currentTarget.querySelector('.tooltip-content');
                        if (!tooltipContent) return;

                        tooltipContent.style.visibility = 'hidden';
                        tooltipContent.style.display = 'block';

                        const mainRect = mainContent.getBoundingClientRect();
                        const tipRect = tooltipContent.getBoundingClientRect();

                        tooltipContent.style.left = '50%';
                        tooltipContent.style.transform = 'translateX(-50%)';
                        tooltipContent.style.right = 'auto';

                        if (tipRect.right > mainRect.right - 16) {
                           tooltipContent.style.left = 'auto';
                           tooltipContent.style.right = '0';
                           tooltipContent.style.transform = 'translateX(0)';
                        }

                        if (tipRect.left < mainRect.left + 16) {
                           tooltipContent.style.left = '0';
                           tooltipContent.style.right = 'auto';
                           tooltipContent.style.transform = 'translateX(0)';
                        }
                        
                        tooltipContent.style.display = '';
                        tooltipContent.style.visibility = 'visible';
                    });

                    tooltip.addEventListener('mouseleave', (e) => {
                         const tooltipContent = e.currentTarget.querySelector('.tooltip-content');
                         if(tooltipContent) tooltipContent.style.visibility = 'hidden';
                    });
                });
            };

            // --- L√ìGICA DE FLASHCARDS ---
            const initializeFlashcards = () => {
                const allFlashcards = [];
                const tempDiv = document.createElement('div');
                
                courseData.modules.forEach(mod => {
                    mod.sections.forEach(sec => {
                        tempDiv.innerHTML = sec.content;
                        tempDiv.querySelectorAll('.tooltip').forEach(t => {
                            const term = t.firstChild.textContent.trim();
                            const definition = t.querySelector('.tooltip-content').textContent.trim();
                            allFlashcards.push({ term, definition });
                        });
                    });
                });

                const uniqueFlashcards = allFlashcards.filter((v, i, a) => a.findIndex(t => t.term === v.term) === i);
                const container = document.getElementById('flashcard-container');
                const noCardsMsg = document.getElementById('no-flashcards-msg');

                if (uniqueFlashcards.length > 0) {
                    container.style.display = 'flex';
                    noCardsMsg.style.display = 'none';
                    container.dataset.state = JSON.stringify({ cards: uniqueFlashcards, currentIndex: 0 });
                    updateFlashcardView();
                    
                    document.getElementById('flashcard').addEventListener('click', e => e.currentTarget.classList.toggle('flipped'));
                    document.getElementById('prev-card').addEventListener('click', () => navigateFlashcard(-1));
                    document.getElementById('next-card').addEventListener('click', () => navigateFlashcard(1));
                    document.getElementById('shuffle-cards').addEventListener('click', shuffleFlashcards);
                } else {
                    noCardsMsg.textContent = 'Nenhum flashcard dispon√≠vel.';
                }
            };

            const updateFlashcardView = () => {
                const container = document.getElementById('flashcard-container');
                if (!container || !container.dataset.state) return;
                let state = JSON.parse(container.dataset.state);
                const card = state.cards[state.currentIndex];
                if (card) {
                    document.querySelector('.flashcard-front').textContent = card.term;
                    document.querySelector('.flashcard-back').textContent = card.definition;
                    document.getElementById('card-counter').textContent = `${state.currentIndex + 1} / ${state.cards.length}`;
                    document.getElementById('flashcard').classList.remove('flipped');
                }
            };

            const navigateFlashcard = (direction) => {
                const container = document.getElementById('flashcard-container');
                if (!container || !container.dataset.state) return;
                let state = JSON.parse(container.dataset.state);
                state.currentIndex += direction;
                if (state.currentIndex < 0) state.currentIndex = state.cards.length - 1;
                if (state.currentIndex >= state.cards.length) state.currentIndex = 0;
                container.dataset.state = JSON.stringify(state);
                updateFlashcardView();
            };

            const shuffleFlashcards = () => {
                const container = document.getElementById('flashcard-container');
                if (!container || !container.dataset.state) return;
                let state = JSON.parse(container.dataset.state);
                for (let i = state.cards.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [state.cards[i], state.cards[j]] = [state.cards[j], state.cards[i]];
                }
                state.currentIndex = 0;
                container.dataset.state = JSON.stringify(state);
                updateFlashcardView();
            };

            // --- L√ìGICA DE QUIZZES ---
            const startQuiz = (quizData, title) => {
                let quizHtml = `<span class="close-button">&times;</span><h2>${title}</h2><form id="quiz-form">`;
                let startTime = Date.now();
                quizData.forEach((q, index) => {
                    quizHtml += `<div class="quiz-question"><p><b>${index + 1}. ${q.q}</b></p><div class="quiz-options">${q.options.map((opt, i) => `<label><input type="radio" name="question${index}" value="${i}"> ${opt}</label>`).join('')}</div></div>`;
                });
                quizHtml += `<button type="submit" class="btn">Finalizar</button></form>`;
                quizModalContent.innerHTML = quizHtml;
                quizModal.style.display = 'flex';

                quizModalContent.querySelector('.close-button').addEventListener('click', () => quizModal.style.display = 'none');
                
                document.getElementById('quiz-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    const endTime = Date.now();
                    const timeTaken = Math.round((endTime - startTime) / 1000);
                    const formData = new FormData(e.target);
                    let score = 0;
                    let results = [];
                    quizData.forEach((q, index) => {
                        const userAnswer = formData.get(`question${index}`);
                        const isCorrect = userAnswer !== null && parseInt(userAnswer) === q.a;
                        if (isCorrect) score++;
                        results.push({ question: q, userAnswer, isCorrect });
                    });
                    showQuizResult(score, quizData.length, results, title, timeTaken);
                });
            };

            const showQuizResult = (score, total, results, title, timeTaken) => {
                const percentage = total > 0 ? ((score / total) * 100).toFixed(1) : 0;
                const minutes = Math.floor(timeTaken / 60);
                const seconds = timeTaken % 60;
                let resultHtml = `<span class="close-button">&times;</span><h2>Resultado: ${title}</h2><div class="quiz-result"><h3>Sua pontua√ß√£o: ${score} de ${total} (${percentage}%)</h3><p><b>Tempo gasto:</b> ${minutes} min e ${seconds} seg</p><p>${percentage >= 70 ? 'Parab√©ns, √≥timo resultado!' : 'Continue estudando para melhorar!'}</p><hr><h4>Revis√£o das Quest√µes:</h4></div>`;
                results.forEach(res => {
                    resultHtml += `<div class="review-question ${res.isCorrect ? 'correct' : 'incorrect'}">
                        <p><b>${res.question.q}</b></p>
                        <p>Sua resposta: ${res.userAnswer !== null ? res.question.options[res.userAnswer] : 'N√£o respondida'}</p>
                        ${!res.isCorrect ? `<p>Resposta correta: <b>${res.question.options[res.question.a]}</b></p>` : ''}
                    </div>`;
                });
                quizModalContent.innerHTML = resultHtml;
                quizModalContent.querySelector('.close-button').addEventListener('click', () => quizModal.style.display = 'none');
            };

            // --- RESPONSIVIDADE ---
            window.toggleSidebar = () => {
                sidebar.classList.toggle('visible');
                if (window.innerWidth <= 768) {
                    sidebar.classList.toggle('hidden');
                }
            };

            window.addEventListener('resize', () => {
                if (window.innerWidth > 768) {
                    sidebar.classList.remove('hidden', 'visible');
                    mainContent.classList.remove('expanded');
                } else {
                    if (!sidebar.classList.contains('visible')) {
                        sidebar.classList.add('hidden');
                    }
                }
            });

            // --- INICIALIZA√á√ÉO ---
            renderPage('home');
            if (window.innerWidth <= 768) {
                sidebar.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
