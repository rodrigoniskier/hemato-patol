<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patologia Geral e Hematologia - Curso Interativo</title>
    <style>
        /* Reset e configurações básicas */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-attachment: fixed;
            min-height: 100vh;
        }

        /* Layout principal */
        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 300px;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .sidebar.hidden {
            transform: translateX(-100%);
        }

        .sidebar-header {
            padding: 2rem 1.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #ecf0f1;
        }

        .sidebar-header p {
            font-size: 0.9rem;
            color: #bdc3c7;
            line-height: 1.4;
        }

        .nav-menu {
            padding: 1rem 0;
        }

        .nav-item {
            display: block;
            padding: 1rem 1.5rem;
            color: #ecf0f1;
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            cursor: pointer;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.1);
            border-left-color: #e74c3c;
        }

        .nav-item.active {
            background: rgba(255,255,255,0.15);
            border-left-color: #e74c3c;
        }

        .nav-item .icon {
            margin-right: 0.5rem;
            font-size: 1.2rem;
        }

        /* Área principal */
        .main-content {
            flex: 1;
            margin-left: 300px;
            padding: 2rem;
            transition: margin-left 0.3s ease;
        }

        .main-content.expanded {
            margin-left: 0;
        }

        /* Botão hamburger */
        .hamburger {
            display: none;
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 1001;
            background: #3498db;
            color: white;
            border: none;
            padding: 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.2rem;
        }

        /* Caixas de conteúdo */
        .content-box {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* Acordeão */
        .accordion {
            margin-bottom: 1rem;
        }

        .accordion-header {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 1.5rem;
            cursor: pointer;
            border-radius: 10px;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .accordion-header:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .accordion-header.active {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: white;
            border-radius: 0 0 10px 10px;
        }

        .accordion-content.active {
            max-height: 5000px;
            padding: 2rem;
        }

        /* Abas */
        .tabs {
            margin: 2rem 0;
        }

        .tab-headers {
            display: flex;
            border-bottom: 2px solid #ecf0f1;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .tab-header {
            padding: 1rem 1.5rem;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 10px 10px 0 0;
            margin-right: 0.5rem;
            margin-bottom: -2px;
        }

        .tab-header.active {
            background: #3498db;
            color: white;
            border-bottom: 2px solid #3498db;
        }

        .tab-content {
            display: none;
            padding: 1.5rem;
            background: white;
            border-radius: 0 10px 10px 10px;
        }

        .tab-content.active {
            display: block;
        }

        /* Tooltips */
        .tooltip {
            position: relative;
            display: inline;
            cursor: help;
            color: #3498db;
            font-weight: bold;
            border-bottom: 1px dotted #3498db;
        }

        .tooltip-content {
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: #2c3e50;
            color: white;
            padding: 0.8rem;
            border-radius: 8px;
            font-size: 0.9rem;
            white-space: nowrap;
            max-width: 300px;
            white-space: normal;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .tooltip:hover .tooltip-content {
            opacity: 1;
            visibility: visible;
        }

        .tooltip-content::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: #2c3e50;
        }

        /* Flashcards */
        .flashcard {
            width: 300px;
            height: 200px;
            margin: 1rem;
            perspective: 1000px;
            display: inline-block;
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .flashcard-front {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .flashcard-back {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            transform: rotateY(180deg);
        }

        /* Quiz */
        .quiz-container {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .question {
            margin-bottom: 2rem;
        }

        .question h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .options {
            list-style: none;
        }

        .options li {
            margin: 0.5rem 0;
        }

        .options input[type="radio"] {
            margin-right: 0.5rem;
        }

        .options label {
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 5px;
            transition: background 0.3s ease;
        }

        .options label:hover {
            background: #ecf0f1;
        }

        /* Botões */
        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        /* Tabelas */
        .table-container {
            overflow-x: auto;
            margin: 2rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }

        th {
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white;
            font-weight: bold;
        }

        tr:hover {
            background: #f8f9fa;
        }

        /* Simulado */
        .simulado-config {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .config-group {
            margin: 1.5rem 0;
        }

        .config-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
        }

        .checkbox-item input {
            margin-right: 0.5rem;
        }

        .slider {
            width: 100%;
            height: 5px;
            border-radius: 5px;
            background: #ecf0f1;
            outline: none;
            margin: 1rem 0;
        }

        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }

            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.visible {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 1rem;
            }

            .flashcard {
                width: 100%;
                max-width: 300px;
            }

            .tab-headers {
                flex-direction: column;
            }

            .tab-header {
                margin-right: 0;
                margin-bottom: 0.5rem;
                border-radius: 10px;
            }
        }

        /* Animações */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        /* Estilo para casos clínicos */
        .case-study {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
        }

        .case-study h4 {
            margin-bottom: 1rem;
        }

        /* Progresso */
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #27ae60, #229954);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Botão Hamburger -->
        <button class="hamburger" onclick="toggleSidebar()">☰</button>

        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>🩺 Patologia & Hematologia</h1>
                <p>Curso interativo baseado nos princípios fundamentais da patologia geral aplicados à hematologia clínica e laboratorial.</p>
            </div>
            <div class="nav-menu">
                <a href="#" class="nav-item active" onclick="showSection('home')">
                    <span class="icon">🏠</span> Início
                </a>
                <a href="#" class="nav-item" onclick="showSection('modulo1')">
                    <span class="icon">🔬</span> Módulo 1: A Célula Sob Ameaça
                </a>
                <a href="#" class="nav-item" onclick="showSection('modulo2')">
                    <span class="icon">🛡️</span> Módulo 2: Resposta do Hospedeiro
                </a>
                <a href="#" class="nav-item" onclick="showSection('modulo3')">
                    <span class="icon">🩸</span> Módulo 3: Fluidez e Contenção
                </a>
                <a href="#" class="nav-item" onclick="showSection('modulo4')">
                    <span class="icon">⚡</span> Módulo 4: Crescimento Descontrolado
                </a>
                <a href="#" class="nav-item" onclick="showSection('flashcards')">
                    <span class="icon">📚</span> Flashcards
                </a>
                <a href="#" class="nav-item" onclick="showSection('simulado')">
                    <span class="icon">📝</span> Simulado
                </a>
                <a href="#" class="nav-item" onclick="showSection('glossario')">
                    <span class="icon">📖</span> Glossário
                </a>
            </div>
        </nav>

        <!-- Conteúdo Principal -->
        <main class="main-content" id="mainContent">
            <!-- Seção Inicial -->
            <div id="home" class="section active">
                <div class="content-box fade-in">
                    <h1>Bem-vindo ao Curso de Patologia Geral e Hematologia</h1>
                    <p>Este curso demonstra de forma sistemática que a compreensão da Hematologia Clínica e Laboratorial é indissociável dos princípios fundamentais da Patologia Geral.</p>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%" id="courseProgress"></div>
                    </div>
                    <p>Progresso do curso: <span id="progressText">0%</span></p>

                    <h2>Objetivos do Curso</h2>
                    <ul>
                        <li>Compreender os princípios fundamentais da patologia geral</li>
                        <li>Aplicar esses princípios à hematologia clínica</li>
                        <li>Analisar casos clínicos paradigmáticos</li>
                        <li>Interpretar achados laboratoriais</li>
                        <li>Desenvolver raciocínio clínico-patológico</li>
                    </ul>

                    <h2>Estrutura do Curso</h2>
                    <div class="tabs">
                        <div class="tab-headers">
                            <button class="tab-header active" onclick="showTab('overview', this)">Visão Geral</button>
                            <button class="tab-header" onclick="showTab('methodology', this)">Metodologia</button>
                            <button class="tab-header" onclick="showTab('resources', this)">Recursos</button>
                        </div>
                        <div id="overview" class="tab-content active">
                            <p>O curso está organizado em 4 módulos principais, cada um focando em um aspecto fundamental da patologia:</p>
                            <ul>
                                <li><strong>Módulo 1:</strong> Lesão, adaptação e morte celular no sistema hematopoiético</li>
                                <li><strong>Módulo 2:</strong> Inflamação e reparo no contexto hematológico</li>
                                <li><strong>Módulo 3:</strong> Distúrbios hemodinâmicos e da coagulação</li>
                                <li><strong>Módulo 4:</strong> Neoplasia e autoimunidade</li>
                            </ul>
                        </div>
                        <div id="methodology" class="tab-content">
                            <p>Nossa abordagem pedagógica combina:</p>
                            <ul>
                                <li>Estudos de caso clínicos reais</li>
                                <li>Análises laboratoriais detalhadas</li>
                                <li>Correlações fisiopatológicas</li>
                                <li>Avaliações interativas</li>
                                <li>Flashcards para revisão</li>
                            </ul>
                        </div>
                        <div id="resources" class="tab-content">
                            <p>Recursos disponíveis nesta plataforma:</p>
                            <ul>
                                <li>📚 Flashcards interativos com termos-chave</li>
                                <li>📝 Quiz por módulo para autoavaliação</li>
                                <li>🎯 Simulado personalizado configurável</li>
                                <li>📖 Glossário completo com tooltips</li>
                                <li>📊 Tabelas comparativas interativas</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Módulo 1 -->
            <div id="modulo1" class="section">
                <div class="content-box fade-in">
                    <h1>Módulo 1: A Célula Sob Ameaça</h1>
                    <p>Lesão, Adaptação e Morte no Sistema Hematopoiético</p>

                    <div class="accordion">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>Seção 1.1: O Princípio da Lesão Celular e a Toxicidade Medular</span>
                            <span>▼</span>
                        </div>
                        <div class="accordion-content">
                            <h3>1.1.1. Fundamentos da Lesão Celular</h3>
                            <p>A <span class="tooltip">patologia<span class="tooltip-content">Estudo das reações fundamentais de células e tecidos a estímulos nocivos, que são a base de todas as doenças</span></span>, em sua essência, estuda as reações fundamentais de células e tecidos a estímulos nocivos. A célula opera em um estado de equilíbrio dinâmico conhecido como <span class="tooltip">homeostase<span class="tooltip-content">Estado de equilíbrio dinâmico mantido pelos sistemas biológicos</span></span>.</p>

                            <p>Quatro mecanismos bioquímicos inter-relacionados são centrais para a maioria das formas de lesão celular:</p>
                            
                            <ol>
                                <li><strong>Depleção de <span class="tooltip">ATP<span class="tooltip-content">Adenosina Trifosfato - a moeda energética da célula</span></span>:</strong> O ATP é a moeda energética da célula. Sua depleção tem efeitos cascata, incluindo falha das bombas de íons dependentes de ATP.</li>
                                <li><strong>Dano <span class="tooltip">Mitocondrial<span class="tooltip-content">Organelas responsáveis pela produção de energia celular</span></span>:</strong> As mitocôndrias são alvos cruciais de lesão, podendo levar à falha na produção de ATP e ativação da morte celular.</li>
                                <li><strong>Influxo de Cálcio:</strong> A perda da homeostase do cálcio ativa enzimas destrutivas como fosfolipases e proteases.</li>
                                <li><strong>Estresse Oxidativo:</strong> O acúmulo de espécies reativas de oxigênio causa danos extensos às membranas e DNA.</li>
                            </ol>

                            <div class="case-study">
                                <h4>📋 Estudo de Caso 1: Hematotoxicidade do Benzeno</h4>
                                <p>O <span class="tooltip">benzeno<span class="tooltip-content">Contaminante ambiental e ocupacional, potente agente mielotóxico</span></span> é um potente agente mielotóxico que ataca as células-tronco hematopoiéticas através de múltiplos mecanismos:</p>
                                <ul>
                                    <li>Estresse oxidativo e dano mitocondrial</li>
                                    <li>Dano direto ao DNA</li>
                                    <li>Desregulação do receptor de aril hidrocarbonetos</li>
                                    <li>Indução de apoptose</li>
                                </ul>
                            </div>

                            <div class="case-study">
                                <h4>📋 Estudo de Caso 2: Lesão Medular por Cloranfenicol</h4>
                                <p>O <span class="tooltip">cloranfenicol<span class="tooltip-content">Antibiótico que pode causar lesão medular reversível ou irreversível</span></span> ilustra o espectro da lesão celular:</p>
                                <ul>
                                    <li><strong>Lesão Reversível:</strong> Supressão tóxica dose-dependente</li>
                                    <li><strong>Lesão Irreversível:</strong> Aplasia medular idiossincrática (1 em 20.000-40.000 tratamentos)</li>
                                </ul>
                            </div>

                            <button class="btn" onclick="startQuiz('modulo1_secao1')">🎯 Testar Conhecimentos</button>
                        </div>
                    </div>

                    <div class="accordion">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>Seção 1.2: O Princípio da Adaptação Celular e as Respostas Medulares</span>
                            <span>▼</span>
                        </div>
                        <div class="accordion-content">
                            <h3>1.2.1. Fundamentos da Adaptação Celular</h3>
                            <p>As células podem modificar sua estrutura e função para alcançar um novo estado de equilíbrio. Essas respostas incluem:</p>
                            
                            <ul>
                                <li><strong><span class="tooltip">Hiperplasia<span class="tooltip-content">Aumento no número de células</span></span>:</strong> Aumento no número de células</li>
                                <li><strong><span class="tooltip">Hipertrofia<span class="tooltip-content">Aumento no tamanho das células</span></span>:</strong> Aumento no tamanho das células</li>
                                <li><strong><span class="tooltip">Atrofia<span class="tooltip-content">Redução no tamanho e atividade metabólica de uma célula</span></span>:</strong> Redução no tamanho e atividade metabólica</li>
                                <li><strong><span class="tooltip">Metaplasia<span class="tooltip-content">Mudança reversível onde um tipo celular é substituído por outro</span></span>:</strong> Substituição de um tipo celular por outro</li>
                            </ul>

                            <div class="case-study">
                                <h4>📋 Estudo de Caso 3: Hiperplasia Eritroide na Hipóxia Crônica</h4>
                                <p>A <span class="tooltip">policitemia secundária<span class="tooltip-content">Aumento da massa eritrocitária em resposta à hipóxia crônica</span></span> é um exemplo de adaptação que se torna patológica:</p>
                                <ul>
                                    <li><strong>Estímulo:</strong> Hipóxia tecidual crônica</li>
                                    <li><strong>Mecanismo:</strong> Ativação do sistema HIF-EPO</li>
                                    <li><strong>Consequência:</strong> Eritrocitose excessiva e aumento da viscosidade sanguínea</li>
                                </ul>
                            </div>

                            <div class="case-study">
                                <h4>📋 Estudo de Caso 4: Atrofia Medular na Anemia Aplásica</h4>
                                <p>A <span class="tooltip">anemia aplásica<span class="tooltip-content">Falência da medula óssea com pancitopenia e medula hipocelular</span></span> representa a falha completa da adaptação medular:</p>
                                <ul>
                                    <li><strong>Mecanismo:</strong> Ataque imunológico às células-tronco hematopoiéticas</li>
                                    <li><strong>Resultado:</strong> Atrofia severa e falência medular completa</li>
                                </ul>
                            </div>

                            <button class="btn" onclick="startQuiz('modulo1_secao2')">🎯 Testar Conhecimentos</button>
                        </div>
                    </div>

                    <div class="accordion">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>Seção 1.3: O Princípio da Morte Celular e a Hemólise</span>
                            <span>▼</span>
                        </div>
                        <div class="accordion-content">
                            <h3>1.3.1. Fundamentos da Morte Celular</h3>
                            <p>Existem duas vias principais de morte celular:</p>

                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Característica</th>
                                            <th>Apoptose</th>
                                            <th>Necrose</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Estímulo</td>
                                            <td>Fisiológico ou Patológico</td>
                                            <td>Sempre Patológico</td>
                                        </tr>
                                        <tr>
                                            <td>Escopo</td>
                                            <td>Células individuais</td>
                                            <td>Grupos de células contíguas</td>
                                        </tr>
                                        <tr>
                                            <td>Morfologia</td>
                                            <td>Encolhimento, condensação da cromatina</td>
                                            <td>Edema celular, desnaturação de proteínas</td>
                                        </tr>
                                        <tr>
                                            <td>Integridade da Membrana</td>
                                            <td>Mantida</td>
                                            <td>Perdida</td>
                                        </tr>
                                        <tr>
                                            <td>Resposta Tecidual</td>
                                            <td>Fagocitose silenciosa</td>
                                            <td>Inflamação aguda</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="case-study">
                                <h4>📋 Estudo de Caso 5: Anemia Falciforme e a Crise Vaso-oclusiva</h4>
                                <p>A <span class="tooltip">anemia falciforme<span class="tooltip-content">Doença causada por mutação na β-globina, resultando em HbS</span></span> ilustra como uma alteração molecular desencadeia uma cascata patológica:</p>
                                <ul>
                                    <li><strong>Causa:</strong> Mutação no gene da β-globina (HbS)</li>
                                    <li><strong>Mecanismo:</strong> Polimerização da HbS desoxigenada</li>
                                    <li><strong>Consequências:</strong> Hemólise, vaso-oclusão, crises álgicas</li>
                                </ul>
                            </div>

                            <button class="btn" onclick="startQuiz('modulo1_secao3')">🎯 Testar Conhecimentos</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Módulo 2 -->
            <div id="modulo2" class="section">
                <div class="content-box fade-in">
                    <h1>Módulo 2: A Resposta do Hospedeiro</h1>
                    <p>Inflamação e Reparo no Contexto Hematológico</p>

                    <div class="accordion">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>Seção 2.1: O Princípio da Inflamação e o Leucograma</span>
                            <span>▼</span>
                        </div>
                        <div class="accordion-content">
                            <h3>2.1.1. Fundamentos da Resposta Inflamatória</h3>
                            <p>A <span class="tooltip">inflamação<span class="tooltip-content">Resposta protetora dos tecidos vascularizados a agentes agressores</span></span> é uma resposta fundamental e protetora dos tecidos vascularizados a agentes agressores.</p>

                            <ul>
                                <li><strong>Inflamação Aguda:</strong> Início rápido, curta duração, predomínio de neutrófilos</li>
                                <li><strong>Inflamação Crônica:</strong> Duração prolongada, presença de linfócitos e macrófagos</li>
                            </ul>

                            <h3>2.1.2. O Hemograma como Janela da Inflamação</h3>
                            <p>O <span class="tooltip">leucograma<span class="tooltip-content">Contagem diferencial de leucócitos que reflete processos inflamatórios</span></span> funciona como uma "biópsia líquida" da resposta inflamatória:</p>

                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Padrão Leucocitário</th>
                                            <th>Mecanismo</th>
                                            <th>Interpretação Clínica</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><span class="tooltip">Neutrofilia<span class="tooltip-content">Aumento da contagem absoluta de neutrófilos</span></span></td>
                                            <td>Liberação de reservas medulares</td>
                                            <td>Infecção bacteriana aguda</td>
                                        </tr>
                                        <tr>
                                            <td>Desvio à Esquerda Regenerativo</td>
                                            <td>Resposta medular robusta</td>
                                            <td>Inflamação controlada</td>
                                        </tr>
                                        <tr>
                                            <td>Desvio à Esquerda Degenerativo</td>
                                            <td>Demanda excede produção</td>
                                            <td>Sepse grave</td>
                                        </tr>
                                        <tr>
                                            <td><span class="tooltip">Linfocitose<span class="tooltip-content">Aumento da contagem absoluta de linfócitos</span></span></td>
                                            <td>Resposta a antígenos específicos</td>
                                            <td>Infecções virais</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="case-study">
                                <h4>📋 Análise Laboratorial: CIVD na Sepse</h4>
                                <p>A <span class="tooltip">CIVD<span class="tooltip-content">Coagulação Intravascular Disseminada - ativação sistêmica da coagulação</span></span> representa a intersecção catastrófica entre inflamação e distúrbios hemodinâmicos:</p>
                                <ul>
                                    <li><strong>Mecanismo:</strong> Ativação massiva da coagulação por citocinas</li>
                                    <li><strong>Resultado:</strong> Trombose microvascular e hemorragia sistêmica</li>
                                </ul>
                            </div>

                            <button class="btn" onclick="startQuiz('modulo2_secao1')">🎯 Testar Conhecimentos</button>
                        </div>
                    </div>

                    <div class="accordion">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>Seção 2.2: O Princípio do Reparo Tecidual e a Fibrose Medular</span>
                            <span>▼</span>
                        </div>
                        <div class="accordion-content">
                            <h3>2.2.1. Fundamentos do Reparo</h3>
                            <p>O reparo pode ocorrer de duas maneiras principais:</p>
                            <ul>
                                <li><strong>Regeneração:</strong> Substituição por células do mesmo tipo</li>
                                <li><strong>Cicatrização (Fibrose):</strong> Deposição de tecido conjuntivo fibroso</li>
                            </ul>

                            <div class="case-study">
                                <h4>📋 Estudo de Caso 6: Mielofibrose Primária</h4>
                                <p>A <span class="tooltip">mielofibrose primária<span class="tooltip-content">Neoplasia mieloproliferativa com fibrose medular reativa</span></span> exemplifica como o reparo pode ser sequestrado:</p>
                                <ul>
                                    <li><strong>Evento inicial:</strong> Proliferação megacariocítica neoplásica</li>
                                    <li><strong>Mecanismo:</strong> Liberação de citocinas fibrogênicas (TGF-β, PDGF)</li>
                                    <li><strong>Resultado:</strong> Fibrose medular progressiva e <span class="tooltip">leucoeritroblastose<span class="tooltip-content">Presença de precursores granulocíticos e eritroides no sangue periférico</span></span></li>
                                </ul>
                            </div>

                            <button class="btn" onclick="startQuiz('modulo2_secao2')">🎯 Testar Conhecimentos</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Módulo 3 -->
            <div id="modulo3" class="section">
                <div class="content-box fade-in">
                    <h1>Módulo 3: Fluidez e Contenção</h1>
                    <p>Distúrbios Hemodinâmicos e da Coagulação</p>

                    <div class="accordion">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>Seção 3.1: O Princípio da Hemostasia e Trombose</span>
                            <span>▼</span>
                        </div>
                        <div class="accordion-content">
                            <h3>3.1.1. Fundamentos da Hemostasia Normal</h3>
                            <p>A <span class="tooltip">hemostasia<span class="tooltip-content">Processo que mantém o sangue fluido mas permite formação de tampão hemostático</span></span> é o processo que mantém o sangue em estado fluido mas permite a formação rápida de um tampão hemostático.</p>

                            <ul>
                                <li><strong>Hemostasia Primária:</strong> Formação do tampão plaquetário</li>
                                <li><strong>Hemostasia Secundária:</strong> Cascata da coagulação e formação de fibrina</li>
                            </ul>

                            <h3>3.1.2. A Tríade de Virchow</h3>
                            <p>A trombose é promovida por três anormalidades principais:</p>
                            <ol>
                                <li>Lesão endotelial</li>
                                <li>Estase ou turbulência do fluxo sanguíneo</li>
                                <li>Hipercoagulabilidade do sangue</li>
                            </ol>

                            <div class="case-study">
                                <h4>📋 Estudo de Caso 7: Púrpura Trombocitopênica Imune (PTI)</h4>
                                <p>A <span class="tooltip">PTI<span class="tooltip-content">Doença autoimune com destruição de plaquetas por autoanticorpos</span></span> é um exemplo de distúrbio da hemostasia primária:</p>
                                <ul>
                                    <li><strong>Mecanismo:</strong> Autoanticorpos contra glicoproteínas plaquetárias</li>
                                    <li><strong>Manifestação:</strong> Petéquias e púrpuras, raramente sangramentos profundos</li>
                                </ul>
                            </div>

                            <div class="case-study">
                                <h4>📋 Estudo de Caso 8: Hemofilia A</h4>
                                <p>A <span class="tooltip">hemofilia A<span class="tooltip-content">Deficiência hereditária do Fator VIII da coagulação</span></span> ilustra defeito na hemostasia secundária:</p>
                                <ul>
                                    <li><strong>Causa:</strong> Mutações no gene do Fator VIII</li>
                                    <li><strong>Manifestação:</strong> Hemartroses e hematomas musculares</li>
                                </ul>
                            </div>

                            <div class="case-study">
                                <h4>📋 Estudo de Caso 9: CIVD - Falha Sistêmica</h4>
                                <p>Escore Diagnóstico da ISTH para CIVD:</p>
                                <div class="table-container">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Parâmetro</th>
                                                <th>Resultado</th>
                                                <th>Pontos</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Plaquetas</td>
                                                <td>&gt; 100.000/µL</td>
                                                <td>0</td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td>50.000-100.000/µL</td>
                                                <td>1</td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td>&lt; 50.000/µL</td>
                                                <td>2</td>
                                            </tr>
                                            <tr>
                                                <td>D-dímero</td>
                                                <td>Aumento acentuado</td>
                                                <td>3</td>
                                            </tr>
                                            <tr>
                                                <td>TP (aumento)</td>
                                                <td>&gt; 6 segundos</td>
                                                <td>2</td>
                                            </tr>
                                            <tr>
                                                <td>Fibrinogênio</td>
                                                <td>&lt; 1,0 g/L</td>
                                                <td>1</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <p><strong>Interpretação:</strong> ≥ 5 pontos = CIVD manifesta</p>
                            </div>

                            <button class="btn" onclick="startQuiz('modulo3_secao1')">🎯 Testar Conhecimentos</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Módulo 4 -->
            <div id="modulo4" class="section">
                <div class="content-box fade-in">
                    <h1>Módulo 4: Crescimento Descontrolado e Autoagressão</h1>
                    <p>Neoplasia e Autoimunidade</p>

                    <div class="accordion">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>Seção 4.1: O Princípio da Neoplasia e as "Marcas do Câncer"</span>
                            <span>▼</span>
                        </div>
                        <div class="accordion-content">
                            <h3>4.1.1. Fundamentos da Biologia do Câncer</h3>
                            <p>O câncer resulta do acúmulo de mutações em três classes principais de genes:</p>
                            <ul>
                                <li><strong>Proto-oncogenes:</strong> "Aceleradores" do crescimento celular</li>
                                <li><strong>Genes Supressores de Tumor:</strong> "Freios" da proliferação</li>
                                <li><strong>Genes de Reparo de DNA:</strong> Mantêm a estabilidade genômica</li>
                            </ul>

                            <h3>4.1.2. As "Marcas do Câncer"</h3>
                            <p>Hanahan e Weinberg propuseram oito capacidades fundamentais:</p>
                            <ol>
                                <li>Sinalização proliferativa sustentada</li>
                                <li>Evasão de supressores de crescimento</li>
                                <li>Resistência à morte celular</li>
                                <li>Imortalidade replicativa</li>
                                <li>Indução de angiogênese</li>
                                <li>Ativação de invasão e metástase</li>
                                <li>Reprogramação do metabolismo energético</li>
                                <li>Evasão da destruição imune</li>
                            </ol>

                            <div class="case-study">
                                <h4>📋 Exemplo 1: Leucemia Mieloide Crônica (LMC)</h4>
                                <p>A <span class="tooltip">LMC<span class="tooltip-content">Neoplasia definida pela translocação t(9;22) e gene BCR-ABL1</span></span> exemplifica sinalização proliferativa sustentada:</p>
                                <ul>
                                    <li><strong>Alteração:</strong> Translocação t(9;22) → BCR-ABL1</li>
                                    <li><strong>Mecanismo:</strong> Tirosina quinase constitutivamente ativa</li>
                                    <li><strong>Resultado:</strong> Proliferação independente de fatores externos</li>
                                </ul>
                            </div>

                            <div class="case-study">
                                <h4>📋 Exemplo 2: Linfoma Folicular</h4>
                                <p>O <span class="tooltip">linfoma folicular<span class="tooltip-content">Linfoma definido pela translocação t(14;18) e superexpressão de BCL2</span></span> ilustra resistência à morte celular:</p>
                                <ul>
                                    <li><strong>Alteração:</strong> Translocação t(14;18) → superexpressão BCL2</li>
                                    <li><strong>Mecanismo:</strong> Bloqueio da via intrínseca da apoptose</li>
                                    <li><strong>Resultado:</strong> Acúmulo de células neoplásicas</li>
                                </ul>
                            </div>

                            <button class="btn" onclick="startQuiz('modulo4_secao1')">🎯 Testar Conhecimentos</button>
                        </div>
                    </div>

                    <div class="accordion">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>Seção 4.2: O Princípio da Autoimunidade e a Citotoxicidade</span>
                            <span>▼</span>
                        </div>
                        <div class="accordion-content">
                            <h3>4.2.1. Fundamentos da Tolerância e Autoimunidade</h3>
                            <p>A <span class="tooltip">tolerância imunológica<span class="tooltip-content">Capacidade de distinguir o "próprio" do "não-próprio"</span></span> é estabelecida por dois mecanismos:</p>
                            <ul>
                                <li><strong>Tolerância Central:</strong> Eliminação de linfócitos autorreativos nos órgãos linfoides primários</li>
                                <li><strong>Tolerância Periférica:</strong> Controle de linfócitos autorreativos nos tecidos periféricos</li>
                            </ul>

                            <div class="case-study">
                                <h4>📋 Estudo de Caso 10: Anemia Hemolítica Autoimune (AHAI)</h4>
                                <p>A <span class="tooltip">AHAI<span class="tooltip-content">Destruição prematura de eritrócitos por autoanticorpos</span></span> exemplifica hipersensibilidade tipo II:</p>
                                
                                <div class="table-container">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Característica</th>
                                                <th>AHAI por Anticorpos Quentes</th>
                                                <th>Doença da Aglutinina a Frio</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Isotipo</td>
                                                <td>IgG</td>
                                                <td>IgM</td>
                                            </tr>
                                            <tr>
                                                <td>Temperatura</td>
                                                <td>37°C</td>
                                                <td>&lt; 37°C</td>
                                            </tr>
                                            <tr>
                                                <td>Local de Hemólise</td>
                                                <td>Extravascular (baço)</td>
                                                <td>Intravascular e Extravascular</td>
                                            </tr>
                                            <tr>
                                                <td>TAD</td>
                                                <td>Positivo para IgG</td>
                                                <td>Positivo apenas para C3</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <button class="btn" onclick="startQuiz('modulo4_secao2')">🎯 Testar Conhecimentos</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Flashcards -->
            <div id="flashcards" class="section">
                <div class="content-box fade-in">
                    <h1>📚 Flashcards de Revisão</h1>
                    <p>Clique nos cartões para revisar conceitos importantes</p>
                    
                    <div class="flashcards-container" id="flashcardsContainer">
                        <!-- Flashcards serão gerados dinamicamente -->
                    </div>
                    
                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="btn" onclick="shuffleFlashcards()">🔄 Embaralhar Cartões</button>
                        <button class="btn btn-secondary" onclick="resetFlashcards()">↺ Resetar Todos</button>
                    </div>
                </div>
            </div>

            <!-- Simulado -->
            <div id="simulado" class="section">
                <div class="content-box fade-in">
                    <h1>📝 Simulado Personalizado</h1>
                    
                    <div class="simulado-config">
                        <h2>Configurar Simulado</h2>
                        
                        <div class="config-group">
                            <label>Selecione os Módulos:</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="sim_modulo1" checked>
                                    <label for="sim_modulo1">Módulo 1: A Célula Sob Ameaça</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="sim_modulo2" checked>
                                    <label for="sim_modulo2">Módulo 2: Resposta do Hospedeiro</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="sim_modulo3" checked>
                                    <label for="sim_modulo3">Módulo 3: Fluidez e Contenção</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="sim_modulo4" checked>
                                    <label for="sim_modulo4">Módulo 4: Crescimento Descontrolado</label>
                                </div>
                            </div>
                        </div>

                        <div class="config-group">
                            <label for="numQuestions">Número de Questões: <span id="numQuestionsValue">20</span></label>
                            <input type="range" id="numQuestions" class="slider" min="10" max="50" value="20" oninput="updateSliderValue('numQuestions', 'numQuestionsValue')">
                        </div>

                        <div class="config-group">
                            <label>Nível de Dificuldade:</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="radio" id="facil" name="dificuldade" value="facil" checked>
                                    <label for="facil">Fácil (Conceitos básicos)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="radio" id="medio" name="dificuldade" value="medio">
                                    <label for="medio">Médio (Aplicação)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="radio" id="dificil" name="dificuldade" value="dificil">
                                    <label for="dificil">Difícil (Análise de casos)</label>
                                </div>
                            </div>
                        </div>

                        <div style="text-align: center;">
                            <button class="btn btn-success" onclick="startSimulado()">🚀 Iniciar Simulado</button>
                        </div>
                    </div>

                    <div id="simuladoQuiz" style="display: none;">
                        <!-- Quiz do simulado será gerado aqui -->
                    </div>
                </div>
            </div>

            <!-- Glossário -->
            <div id="glossario" class="section">
                <div class="content-box fade-in">
                    <h1>📖 Glossário</h1>
                    <p>Termos e conceitos importantes do curso</p>
                    
                    <div id="glossarioContent">
                        <!-- Glossário será gerado dinamicamente -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Dados do curso
        const courseData = {
            flashcards: [
                { front: "ATP", back: "Adenosina Trifosfato - a moeda energética da célula, essencial para processos celulares" },
                { front: "Homeostase", back: "Estado de equilíbrio dinâmico mantido pelos sistemas biológicos" },
                { front: "Apoptose", back: "Morte celular programada, processo ativo que requer energia" },
                { front: "Necrose", back: "Morte celular acidental e descontrolada após lesão severa" },
                { front: "Hiperplasia", back: "Aumento no número de células em resposta a estímulos" },
                { front: "Hipertrofia", back: "Aumento no tamanho das células" },
                { front: "Atrofia", back: "Redução no tamanho e atividade metabólica de uma célula" },
                { front: "Metaplasia", back: "Mudança reversível onde um tipo celular é substituído por outro" },
                { front: "Eritropoietina (EPO)", back: "Hormônio que estimula a produção de eritrócitos na medula óssea" },
                { front: "HIF", back: "Fator Induzível por Hipóxia - regula a resposta celular à baixa concentração de oxigênio" },
                { front: "Hemoglobina S (HbS)", back: "Hemoglobina anormal na anemia falciforme que polimeriza sob desoxigenação" },
                { front: "Inflamação", back: "Resposta protetora dos tecidos vascularizados a agentes agressores" },
                { front: "Leucograma", back: "Contagem diferencial de leucócitos que reflete processos inflamatórios" },
                { front: "Neutrofilia", back: "Aumento da contagem absoluta de neutrófilos, comum em infecções bacterianas" },
                { front: "Linfocitose", back: "Aumento da contagem absoluta de linfócitos, típico de infecções virais" },
                { front: "CIVD", back: "Coagulação Intravascular Disseminada - ativação sistêmica da coagulação" },
                { front: "Hemostasia", back: "Processo que mantém o sangue fluido mas permite formação de tampão hemostático" },
                { front: "Tríade de Virchow", back: "Lesão endotelial, estase sanguínea e hipercoagulabilidade - fatores de trombose" },
                { front: "PTI", back: "Púrpura Trombocitopênica Imune - doença autoimune com destruição de plaquetas" },
                { front: "Hemofilia A", back: "Deficiência hereditária do Fator VIII da coagulação" },
                { front: "BCR-ABL1", back: "Gene de fusão na LMC que codifica tirosina quinase constitutivamente ativa" },
                { front: "BCL2", back: "Proteína anti-apoptótica superexpressa no linfoma folicular" },
                { front: "Tolerância Imunológica", back: "Capacidade de distinguir o 'próprio' do 'não-próprio'" },
                { front: "AHAI", back: "Anemia Hemolítica Autoimune - destruição prematura de eritrócitos por autoanticorpos" },
                { front: "TAD", back: "Teste de Antiglobulina Direto - confirma a natureza imune da hemólise" }
            ],
            
            glossario: {
                "ATP": "Adenosina Trifosfato - a moeda energética da célula, essencial para todos os processos que requerem energia",
                "Homeostase": "Estado de equilíbrio dinâmico mantido pelos sistemas biológicos para preservar condições internas estáveis",
                "Patologia": "Estudo das reações fundamentais de células e tecidos a estímulos nocivos, que são a base de todas as doenças",
                "Mitocôndria": "Organelas responsáveis pela produção de energia celular através da fosforilação oxidativa",
                "Apoptose": "Morte celular programada, processo ativo que requer energia e é mediado por caspases",
                "Necrose": "Morte celular acidental e descontrolada que ocorre após lesão aguda e severa",
                "Hiperplasia": "Aumento no número de células em resposta a estímulos fisiológicos ou patológicos",
                "Hipertrofia": "Aumento no tamanho das células sem aumento no número",
                "Atrofia": "Redução no tamanho e na atividade metabólica de uma célula",
                "Metaplasia": "Mudança reversível na qual um tipo celular diferenciado é substituído por outro",
                "Benzeno": "Contaminante ambiental e ocupacional, potente agente mielotóxico capaz de induzir leucemia",
                "Cloranfenicol": "Antibiótico que pode causar lesão medular reversível ou irreversível",
                "Policitemia Secundária": "Aumento da massa eritrocitária em resposta à hipóxia crônica",
                "Anemia Aplásica": "Falência da medula óssea caracterizada por pancitopenia e medula hipocelular",
                "Eritropoietina": "Hormônio produzido pelos rins que estimula a produção de eritrócitos",
                "HIF": "Fator Induzível por Hipóxia - regula a resposta celular à baixa concentração de oxigênio",
                "Anemia Falciforme": "Doença hereditária causada por mutação na β-globina, resultando em HbS",
                "Hemoglobina S": "Hemoglobina anormal que polimeriza sob desoxigenação, causando deformação eritrocitária",
                "Inflamação": "Resposta fundamental e protetora dos tecidos vascularizados a agentes agressores",
                "Leucograma": "Contagem diferencial de leucócitos que funciona como 'biópsia líquida' da resposta inflamatória",
                "Neutrofilia": "Aumento da contagem absoluta de neutrófilos, resposta comum a infecções bacterianas",
                "Linfocitose": "Aumento da contagem absoluta de linfócitos, típico de infecções virais",
                "CIVD": "Coagulação Intravascular Disseminada - ativação sistêmica e descontrolada da coagulação",
                "Mielofibrose Primária": "Neoplasia mieloproliferativa caracterizada por fibrose medular reativa",
                "Leucoeritroblastose": "Presença simultânea de precursores granulocíticos e eritroides no sangue periférico",
                "Hemostasia": "Processo fisiológico que mantém o sangue fluido mas permite formação de tampão hemostático",
                "Tríade de Virchow": "Três fatores que promovem trombose: lesão endotelial, estase e hipercoagulabilidade",
                "PTI": "Púrpura Trombocitopênica Imune - doença autoimune com destruição de plaquetas por autoanticorpos",
                "Hemofilia A": "Doença hereditária ligada ao X causada por deficiência do Fator VIII",
                "LMC": "Leucemia Mieloide Crônica - neoplasia definida pela translocação t(9;22)",
                "BCR-ABL1": "Gene de fusão que codifica tirosina quinase constitutivamente ativa na LMC",
                "Linfoma Folicular": "Linfoma definido pela translocação t(14;18) e superexpressão de BCL2",
                "BCL2": "Proteína anti-apoptótica que bloqueia a via intrínseca da morte celular",
                "Tolerância Imunológica": "Capacidade do sistema imune de distinguir o 'próprio' do 'não-próprio'",
                "AHAI": "Anemia Hemolítica Autoimune - destruição prematura de eritrócitos por autoanticorpos",
                "TAD": "Teste de Antiglobulina Direto - confirma a presença de anticorpos na superfície eritrocitária"
            },

            questions: {
                modulo1_secao1: [
                    {
                        question: "Qual é a principal moeda energética da célula?",
                        options: ["ADP", "ATP", "AMP", "GTP"],
                        correct: 1,
                        explanation: "O ATP (Adenosina Trifosfato) é a principal moeda energética da célula, essencial para todos os processos que requerem energia."
                    },
                    {
                        question: "Qual mecanismo NÃO está entre os quatro centrais da lesão celular?",
                        options: ["Depleção de ATP", "Dano mitocondrial", "Síntese proteica aumentada", "Estresse oxidativo"],
                        correct: 2,
                        explanation: "A síntese proteica aumentada não é um mecanismo de lesão celular. Os quatro mecanismos centrais são: depleção de ATP, dano mitocondrial, influxo de cálcio e estresse oxidativo."
                    },
                    {
                        question: "O benzeno causa hematotoxicidade através de:",
                        options: ["Ação direta", "Metabólitos reativos", "Inibição ribossômica", "Todas as anteriores"],
                        correct: 1,
                        explanation: "O benzeno não é tóxico diretamente, mas seus metabólitos (quinonas e muconaldeídos) formados no fígado são transportados para a medula óssea onde causam toxicidade."
                    },
                    {
                        question: "A aplasia medular idiossincrática por cloranfenicol ocorre em:",
                        options: ["1 em 1.000 tratamentos", "1 em 10.000 tratamentos", "1 em 20.000-40.000 tratamentos", "1 em 100.000 tratamentos"],
                        correct: 2,
                        explanation: "A aplasia medular idiossincrática por cloranfenicol é rara, ocorrendo em 1 em 20.000 a 40.000 tratamentos, sendo independente da dose."
                    }
                ],
                modulo1_secao2: [
                    {
                        question: "Qual adaptação celular representa aumento no número de células?",
                        options: ["Hipertrofia", "Hiperplasia", "Atrofia", "Metaplasia"],
                        correct: 1,
                        explanation: "Hiperplasia é o aumento no número de células, enquanto hipertrofia é o aumento no tamanho das células."
                    },
                    {
                        question: "Na policitemia secundária, qual fator é o principal regulador?",
                        options: ["Eritropoietina", "Ferro", "Vitamina B12", "Ácido fólico"],
                        correct: 0,
                        explanation: "A eritropoietina (EPO) é o principal regulador da eritropoiese, sendo produzida pelos rins em resposta à hipóxia."
                    },
                    {
                        question: "O sistema HIF-EPO responde principalmente a:",
                        options: ["Temperatura", "pH", "Concentração de oxigênio", "Pressão arterial"],
                        correct: 2,
                        explanation: "O sistema HIF (Fator Induzível por Hipóxia) - EPO é o 'termostato de oxigênio' molecular que responde à baixa concentração de oxigênio."
                    },
                    {
                        question: "Na anemia aplásica, o principal mecanismo é:",
                        options: ["Deficiência nutricional", "Ataque imunológico às CTHs", "Infecção viral", "Toxicidade medicamentosa"],
                        correct: 1,
                        explanation: "A causa mais comum da anemia aplásica adquirida é o ataque imunológico mediado por linfócitos T contra as células-tronco hematopoiéticas."
                    }
                ],
                modulo1_secao3: [
                    {
                        question: "Qual característica distingue apoptose de necrose?",
                        options: ["Sempre patológica", "Mantém integridade da membrana", "Causa inflamação", "Afeta grupos de células"],
                        correct: 1,
                        explanation: "A apoptose mantém a integridade da membrana plasmática, formando corpos apoptóticos que são fagocitados sem causar inflamação."
                    },
                    {
                        question: "Na anemia falciforme, a mutação ocorre no:",
                        options: ["Gene da α-globina", "Gene da β-globina", "Gene da γ-globina", "Gene da δ-globina"],
                        correct: 1,
                        explanation: "A anemia falciforme é causada por uma mutação de ponto no gene da β-globina, substituindo ácido glutâmico por valina."
                    },
                    {
                        question: "A polimerização da HbS ocorre quando:",
                        options: ["Oxigenada", "Desoxigenada", "Em pH ácido", "Em temperatura baixa"],
                        correct: 1,
                        explanation: "A HbS polimeriza quando desoxigenada, formando fibras rígidas que deformam o eritrócito em forma de foice."
                    },
                    {
                        question: "A vida média do eritrócito na anemia falciforme é:",
                        options: ["120 dias (normal)", "60-80 dias", "10-20 dias", "5-10 dias"],
                        correct: 2,
                        explanation: "Na anemia falciforme, a vida média do eritrócito é drasticamente reduzida de 120 dias para cerca de 10-20 dias devido à hemólise."
                    }
                ],
                modulo2_secao1: [
                    {
                        question: "Qual célula predomina na inflamação aguda?",
                        options: ["Linfócitos", "Neutrófilos", "Macrófagos", "Eosinófilos"],
                        correct: 1,
                        explanation: "A inflamação aguda é caracterizada pelo predomínio de neutrófilos, que são rapidamente recrutados para o local da lesão."
                    },
                    {
                        question: "O desvio à esquerda degenerativo indica:",
                        options: ["Boa resposta medular", "Demanda excede produção", "Infecção viral", "Uso de corticoides"],
                        correct: 1,
                        explanation: "O desvio à esquerda degenerativo ocorre quando a demanda tecidual por neutrófilos supera a capacidade de produção da medula óssea."
                    },
                    {
                        question: "Na CIVD, o que caracteriza a coagulopatia de consumo?",
                        options: ["Aumento de plaquetas", "Consumo de fatores de coagulação", "Diminuição do D-dímero", "Aumento do fibrinogênio"],
                        correct: 1,
                        explanation: "Na CIVD, a formação disseminada de microtrombos consome plaquetas e fatores de coagulação em taxa maior que a produção."
                    },
                    {
                        question: "Qual citocina é considerada pró-inflamatória?",
                        options: ["IL-10", "TGF-β", "TNF-α", "IL-4"],
                        correct: 2,
                        explanation: "O TNF-α (Fator de Necrose Tumoral-alfa) é uma das principais citocinas pró-inflamatórias, junto com IL-1 e IL-6."
                    }
                ],
                modulo2_secao2: [
                    {
                        question: "Qual processo restaura completamente a arquitetura original?",
                        options: ["Fibrose", "Cicatrização", "Regeneração", "Metaplasia"],
                        correct: 2,
                        explanation: "A regeneração é a substituição ideal do tecido danificado por células do mesmo tipo, restaurando completamente a arquitetura e função originais."
                    },
                    {
                        question: "Na mielofibrose primária, qual célula é o alvo inicial?",
                        options: ["Eritroblastos", "Megacariócitos", "Mieloblastos", "Linfoblastos"],
                        correct: 1,
                        explanation: "Na mielofibrose primária, há proliferação clonal preferencial para a linhagem megacariocítica, que libera citocinas fibrogênicas."
                    },
                    {
                        question: "Qual citocina é o principal indutor da fibrose?",
                        options: ["TNF-α", "IL-6", "TGF-β", "IL-1"],
                        correct: 2,
                        explanation: "O TGF-β (Fator de Crescimento Transformador-beta) é o principal indutor da fibrose, estimulando fibroblastos e síntese de colágeno."
                    },
                    {
                        question: "Os dacriócitos (hemácias em lágrima) sugerem:",
                        options: ["Deficiência de ferro", "Fibrose medular", "Hemólise", "Infecção"],
                        correct: 1,
                        explanation: "Os dacriócitos são hemácias deformadas mecanicamente ao passar por medula fibrótica, sendo altamente sugestivos de fibrose medular."
                    }
                ],
                modulo3_secao1: [
                    {
                        question: "A hemostasia primária envolve principalmente:",
                        options: ["Cascata de coagulação", "Agregação plaquetária", "Fibrinólise", "Complemento"],
                        correct: 1,
                        explanation: "A hemostasia primária envolve a formação do tampão plaquetário através de adesão, ativação e agregação plaquetária."
                    },
                    {
                        question: "Na PTI, o principal mecanismo é:",
                        options: ["Produção diminuída", "Destruição aumentada", "Sequestro esplênico", "Diluição"],
                        correct: 1,
                        explanation: "Na PTI, autoanticorpos se ligam às plaquetas, que são então destruídas prematuramente por macrófagos, principalmente no baço."
                    },
                    {
                        question: "Na hemofilia A, qual teste estará alterado?",
                        options: ["TP", "TTPA", "Contagem de plaquetas", "Tempo de sangramento"],
                        correct: 1,
                        explanation: "Na hemofilia A, o TTPA (que avalia a via intrínseca) estará prolongado devido à deficiência do Fator VIII."
                    },
                    {
                        question: "No escore ISTH para CIVD, quantos pontos indicam CIVD manifesta?",
                        options: ["≥ 3 pontos", "≥ 4 pontos", "≥ 5 pontos", "≥ 6 pontos"],
                        correct: 2,
                        explanation: "Segundo o escore ISTH, ≥ 5 pontos é compatível com CIVD manifesta, enquanto < 5 pontos sugere CIVD não manifesta."
                    }
                ],
                modulo4_secao1: [
                    {
                        question: "Qual gene é conhecido como 'guardião do genoma'?",
                        options: ["RAS", "MYC", "TP53", "BCL2"],
                        correct: 2,
                        explanation: "O gene TP53 é conhecido como 'guardião do genoma' por sua função central em detectar danos ao DNA e induzir reparo ou apoptose."
                    },
                    {
                        question: "Na LMC, qual alteração é característica?",
                        options: ["t(14;18)", "t(9;22)", "t(8;14)", "t(15;17)"],
                        correct: 1,
                        explanation: "A LMC é definida pela translocação t(9;22) que cria o Cromossomo Filadélfia e o gene de fusão BCR-ABL1."
                    },
                    {
                        question: "Quantas 'marcas do câncer' foram propostas por Hanahan e Weinberg?",
                        options: ["6", "8", "10", "12"],
                        correct: 1,
                        explanation: "Hanahan e Weinberg propuseram 8 capacidades biológicas fundamentais que a maioria dos cânceres adquire durante seu desenvolvimento."
                    },
                    {
                        question: "No linfoma folicular, qual proteína está superexpressa?",
                        options: ["BCR-ABL1", "BCL2", "MYC", "p53"],
                        correct: 1,
                        explanation: "No linfoma folicular, a translocação t(14;18) leva à superexpressão da proteína anti-apoptótica BCL2."
                    }
                ],
                modulo4_secao2: [
                    {
                        question: "Onde ocorre a tolerância central para células T?",
                        options: ["Baço", "Linfonodos", "Timo", "Medula óssea"],
                        correct: 2,
                        explanation: "A tolerância central para células T ocorre no timo, onde linfócitos T imaturos que reconhecem fortemente autoantígenos são eliminados."
                    },
                    {
                        question: "Na AHAI por anticorpos quentes, qual isotipo predomina?",
                        options: ["IgM", "IgG", "IgA", "IgE"],
                        correct: 1,
                        explanation: "A AHAI por anticorpos quentes é mediada principalmente por autoanticorpos da classe IgG que reagem a 37°C."
                    },
                    {
                        question: "O TAD positivo apenas para C3 sugere:",
                        options: ["AHAI quente", "Doença da aglutinina a frio", "Hemólise mecânica", "Deficiência enzimática"],
                        correct: 1,
                        explanation: "TAD positivo apenas para C3 é característico da doença da aglutinina a frio, pois a IgM se dissocia a 37°C mas o complemento permanece."
                    },
                    {
                        question: "Qual tipo de hipersensibilidade caracteriza a AHAI?",
                        options: ["Tipo I", "Tipo II", "Tipo III", "Tipo IV"],
                        correct: 1,
                        explanation: "A AHAI é um exemplo clássico de hipersensibilidade do Tipo II, mediada por anticorpos que se ligam a antígenos celulares."
                    }
                ]
            }
        };

        // Estado da aplicação
        let currentSection = 'home';
        let currentQuiz = null;
        let quizAnswers = {};
        let simuladoData = null;
        let courseProgress = 0;

        // Funções de navegação
        function showSection(sectionId) {
            // Esconder todas as seções
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
                section.classList.remove('active');
            });

            // Mostrar seção selecionada
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.style.display = 'block';
                targetSection.classList.add('active');
                currentSection = sectionId;

                // Atualizar navegação ativa
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                event.target.classList.add('active');

                // Carregar conteúdo específico da seção
                if (sectionId === 'flashcards') {
                    loadFlashcards();
                } else if (sectionId === 'glossario') {
                    loadGlossario();
                }
            }
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            sidebar.classList.toggle('visible');
            if (window.innerWidth <= 768) {
                if (sidebar.classList.contains('visible')) {
                    sidebar.classList.remove('hidden');
                } else {
                    sidebar.classList.add('hidden');
                }
            }
        }

        // Funções de acordeão
        function toggleAccordion(header) {
            const content = header.nextElementSibling;
            const isActive = content.classList.contains('active');

            // Fechar todos os acordeões
            document.querySelectorAll('.accordion-content').forEach(acc => {
                acc.classList.remove('active');
            });
            document.querySelectorAll('.accordion-header').forEach(head => {
                head.classList.remove('active');
                head.querySelector('span:last-child').textContent = '▼';
            });

            // Abrir o clicado se não estava ativo
            if (!isActive) {
                content.classList.add('active');
                header.classList.add('active');
                header.querySelector('span:last-child').textContent = '▲';
            }
        }

        // Funções de abas
        function showTab(tabId, headerElement) {
            // Esconder todas as abas
            const tabContainer = headerElement.closest('.tabs');
            tabContainer.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            tabContainer.querySelectorAll('.tab-header').forEach(header => {
                header.classList.remove('active');
            });

            // Mostrar aba selecionada
            document.getElementById(tabId).classList.add('active');
            headerElement.classList.add('active');
        }

        // Funções de flashcards
        function loadFlashcards() {
            const container = document.getElementById('flashcardsContainer');
            container.innerHTML = '';

            courseData.flashcards.forEach((card, index) => {
                const flashcardElement = document.createElement('div');
                flashcardElement.className = 'flashcard';
                flashcardElement.innerHTML = `
                    <div class="flashcard-inner">
                        <div class="flashcard-front">
                            <h3>${card.front}</h3>
                        </div>
                        <div class="flashcard-back">
                            <p>${card.back}</p>
                        </div>
                    </div>
                `;
                
                flashcardElement.addEventListener('click', () => {
                    flashcardElement.classList.toggle('flipped');
                });

                container.appendChild(flashcardElement);
            });
        }

        function shuffleFlashcards() {
            const container = document.getElementById('flashcardsContainer');
            const cards = Array.from(container.children);
            
            // Embaralhar array
            for (let i = cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [cards[i], cards[j]] = [cards[j], cards[i]];
            }
            
            // Reordenar no DOM
            cards.forEach(card => container.appendChild(card));
        }

        function resetFlashcards() {
            document.querySelectorAll('.flashcard').forEach(card => {
                card.classList.remove('flipped');
            });
        }

        // Funções de glossário
        function loadGlossario() {
            const container = document.getElementById('glossarioContent');
            container.innerHTML = '';

            const sortedTerms = Object.keys(courseData.glossario).sort();
            
            sortedTerms.forEach(term => {
                const termElement = document.createElement('div');
                termElement.className = 'content-box';
                termElement.innerHTML = `
                    <h3>${term}</h3>
                    <p>${courseData.glossario[term]}</p>
                `;
                container.appendChild(termElement);
            });
        }

        // Funções de quiz
        function startQuiz(quizId) {
            if (!courseData.questions[quizId]) {
                alert('Quiz não encontrado!');
                return;
            }

            currentQuiz = quizId;
            quizAnswers = {};
            
            const questions = courseData.questions[quizId];
            let quizHtml = `
                <div class="quiz-container">
                    <h2>Quiz: ${getQuizTitle(quizId)}</h2>
                    <form id="quizForm">
            `;

            questions.forEach((q, index) => {
                quizHtml += `
                    <div class="question">
                        <h3>Questão ${index + 1}: ${q.question}</h3>
                        <ul class="options">
                `;
                
                q.options.forEach((option, optIndex) => {
                    quizHtml += `
                        <li>
                            <input type="radio" id="q${index}_${optIndex}" name="question${index}" value="${optIndex}">
                            <label for="q${index}_${optIndex}">${option}</label>
                        </li>
                    `;
                });

                quizHtml += `
                        </ul>
                    </div>
                `;
            });

            quizHtml += `
                    <button type="button" class="btn" onclick="submitQuiz()">Finalizar Quiz</button>
                    </form>
                </div>
            `;

            // Criar modal para o quiz
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                z-index: 2000;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 2rem;
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white;
                border-radius: 15px;
                padding: 2rem;
                max-width: 800px;
                max-height: 80vh;
                overflow-y: auto;
                position: relative;
            `;
            
            modalContent.innerHTML = `
                <button onclick="closeQuiz()" style="position: absolute; top: 1rem; right: 1rem; background: #e74c3c; color: white; border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer;">×</button>
                ${quizHtml}
            `;
            
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            modal.id = 'quizModal';
        }

        function getQuizTitle(quizId) {
            const titles = {
                'modulo1_secao1': 'Lesão Celular e Toxicidade Medular',
                'modulo1_secao2': 'Adaptação Celular e Respostas Medulares',
                'modulo1_secao3': 'Morte Celular e Hemólise',
                'modulo2_secao1': 'Inflamação e Leucograma',
                'modulo2_secao2': 'Reparo Tecidual e Fibrose Medular',
                'modulo3_secao1': 'Hemostasia e Trombose',
                'modulo4_secao1': 'Neoplasia e Marcas do Câncer',
                'modulo4_secao2': 'Autoimunidade e Citotoxicidade'
            };
            return titles[quizId] || 'Quiz';
        }

        function submitQuiz() {
            const form = document.getElementById('quizForm');
            const formData = new FormData(form);
            const questions = courseData.questions[currentQuiz];
            let score = 0;
            let results = [];

            questions.forEach((q, index) => {
                const answer = formData.get(`question${index}`);
                const isCorrect = answer == q.correct;
                if (isCorrect) score++;
                
                results.push({
                    question: q.question,
                    userAnswer: answer ? q.options[answer] : 'Não respondida',
                    correctAnswer: q.options[q.correct],
                    isCorrect: isCorrect,
                    explanation: q.explanation
                });
            });

            showQuizResults(score, questions.length, results);
            updateProgress();
        }

        function showQuizResults(score, total, results) {
            const percentage = Math.round((score / total) * 100);
            let resultHtml = `
                <div class="quiz-container">
                    <h2>Resultado do Quiz</h2>
                    <div style="text-align: center; margin: 2rem 0;">
                        <h3>Pontuação: ${score}/${total} (${percentage}%)</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${percentage}%"></div>
                        </div>
                    </div>
                    <h3>Revisão das Questões:</h3>
            `;

            results.forEach((result, index) => {
                const statusClass = result.isCorrect ? 'btn-success' : 'btn-danger';
                const statusText = result.isCorrect ? '✓ Correto' : '✗ Incorreto';
                
                resultHtml += `
                    <div class="question" style="border-left: 4px solid ${result.isCorrect ? '#27ae60' : '#e74c3c'}; padding-left: 1rem;">
                        <h4>Questão ${index + 1}: ${result.question}</h4>
                        <p><strong>Sua resposta:</strong> ${result.userAnswer}</p>
                        <p><strong>Resposta correta:</strong> ${result.correctAnswer}</p>
                        <p><strong>Explicação:</strong> ${result.explanation}</p>
                        <span class="btn ${statusClass}" style="font-size: 0.8rem; padding: 0.5rem 1rem;">${statusText}</span>
                    </div>
                `;
            });

            resultHtml += `
                <div style="text-align: center; margin-top: 2rem;">
                    <button class="btn" onclick="closeQuiz()">Fechar</button>
                </div>
                </div>
            `;

            document.querySelector('#quizModal .quiz-container').innerHTML = resultHtml;
        }

        function closeQuiz() {
            const modal = document.getElementById('quizModal');
            if (modal) {
                modal.remove();
            }
        }

        // Funções do simulado
        function updateSliderValue(sliderId, displayId) {
            const slider = document.getElementById(sliderId);
            const display = document.getElementById(displayId);
            display.textContent = slider.value;
        }

        function startSimulado() {
            // Coletar configurações
            const modulos = [];
            if (document.getElementById('sim_modulo1').checked) modulos.push('modulo1');
            if (document.getElementById('sim_modulo2').checked) modulos.push('modulo2');
            if (document.getElementById('sim_modulo3').checked) modulos.push('modulo3');
            if (document.getElementById('sim_modulo4').checked) modulos.push('modulo4');

            if (modulos.length === 0) {
                alert('Selecione pelo menos um módulo!');
                return;
            }

            const numQuestions = parseInt(document.getElementById('numQuestions').value);
            const dificuldade = document.querySelector('input[name="dificuldade"]:checked').value;

            // Gerar questões do simulado
            const allQuestions = [];
            modulos.forEach(modulo => {
                Object.keys(courseData.questions).forEach(key => {
                    if (key.startsWith(modulo)) {
                        allQuestions.push(...courseData.questions[key]);
                    }
                });
            });

            // Embaralhar e selecionar questões
            const shuffled = allQuestions.sort(() => 0.5 - Math.random());
            const selectedQuestions = shuffled.slice(0, Math.min(numQuestions, shuffled.length));

            simuladoData = {
                questions: selectedQuestions,
                startTime: Date.now(),
                config: { modulos, numQuestions, dificuldade }
            };

            showSimuladoQuiz(selectedQuestions);
        }

        function showSimuladoQuiz(questions) {
            let quizHtml = `
                <h2>Simulado Personalizado</h2>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <p><strong>Questões:</strong> ${questions.length}</p>
                    <p><strong>Tempo:</strong> <span id="timer">00:00</span></p>
                </div>
                <form id="simuladoForm">
            `;

            questions.forEach((q, index) => {
                quizHtml += `
                    <div class="question">
                        <h3>Questão ${index + 1}: ${q.question}</h3>
                        <ul class="options">
                `;
                
                q.options.forEach((option, optIndex) => {
                    quizHtml += `
                        <li>
                            <input type="radio" id="sim_q${index}_${optIndex}" name="question${index}" value="${optIndex}">
                            <label for="sim_q${index}_${optIndex}">${option}</label>
                        </li>
                    `;
                });

                quizHtml += `
                        </ul>
                    </div>
                `;
            });

            quizHtml += `
                <div style="text-align: center;">
                    <button type="button" class="btn btn-success" onclick="submitSimulado()">Finalizar Simulado</button>
                    <button type="button" class="btn btn-secondary" onclick="cancelSimulado()">Cancelar</button>
                </div>
                </form>
            `;

            document.getElementById('simuladoQuiz').innerHTML = quizHtml;
            document.getElementById('simuladoQuiz').style.display = 'block';
            document.querySelector('.simulado-config').style.display = 'none';

            // Iniciar cronômetro
            startTimer();
        }

        function startTimer() {
            const timerElement = document.getElementById('timer');
            const startTime = simuladoData.startTime;

            const updateTimer = () => {
                const elapsed = Date.now() - startTime;
                const minutes = Math.floor(elapsed / 60000);
                const seconds = Math.floor((elapsed % 60000) / 1000);
                timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            };

            updateTimer();
            simuladoData.timerInterval = setInterval(updateTimer, 1000);
        }

        function submitSimulado() {
            clearInterval(simuladoData.timerInterval);
            
            const form = document.getElementById('simuladoForm');
            const formData = new FormData(form);
            const questions = simuladoData.questions;
            let score = 0;
            let results = [];

            questions.forEach((q, index) => {
                const answer = formData.get(`question${index}`);
                const isCorrect = answer == q.correct;
                if (isCorrect) score++;
                
                results.push({
                    question: q.question,
                    userAnswer: answer ? q.options[answer] : 'Não respondida',
                    correctAnswer: q.options[q.correct],
                    isCorrect: isCorrect,
                    explanation: q.explanation
                });
            });

            const endTime = Date.now();
            const totalTime = Math.round((endTime - simuladoData.startTime) / 1000);

            showSimuladoResults(score, questions.length, results, totalTime);
        }

        function showSimuladoResults(score, total, results, timeInSeconds) {
            const percentage = Math.round((score / total) * 100);
            const minutes = Math.floor(timeInSeconds / 60);
            const seconds = timeInSeconds % 60;

            let resultHtml = `
                <h2>Resultado do Simulado</h2>
                <div class="content-box" style="text-align: center; margin: 2rem 0;">
                    <h3>Relatório de Desempenho</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 2rem 0;">
                        <div>
                            <h4>Pontuação</h4>
                            <p style="font-size: 2rem; color: #3498db;">${score}/${total}</p>
                        </div>
                        <div>
                            <h4>Percentual</h4>
                            <p style="font-size: 2rem; color: #27ae60;">${percentage}%</p>
                        </div>
                        <div>
                            <h4>Tempo Total</h4>
                            <p style="font-size: 2rem; color: #f39c12;">${minutes}:${seconds.toString().padStart(2, '0')}</p>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${percentage}%"></div>
                    </div>
                </div>

                <div class="tabs">
                    <div class="tab-headers">
                        <button class="tab-header active" onclick="showTab('resumo', this)">Resumo</button>
                        <button class="tab-header" onclick="showTab('questoes-erradas', this)">Questões Erradas</button>
                        <button class="tab-header" onclick="showTab('todas-questoes', this)">Todas as Questões</button>
                    </div>
                    
                    <div id="resumo" class="tab-content active">
                        <h3>Análise de Desempenho</h3>
                        <p><strong>Configuração do Simulado:</strong></p>
                        <ul>
                            <li>Módulos selecionados: ${simuladoData.config.modulos.join(', ')}</li>
                            <li>Número de questões: ${simuladoData.config.numQuestions}</li>
                            <li>Nível de dificuldade: ${simuladoData.config.dificuldade}</li>
                        </ul>
                        
                        <p><strong>Recomendações:</strong></p>
                        <ul>
            `;

            if (percentage >= 80) {
                resultHtml += '<li>Excelente desempenho! Continue estudando para manter o nível.</li>';
            } else if (percentage >= 60) {
                resultHtml += '<li>Bom desempenho, mas há espaço para melhorias. Revise os tópicos das questões erradas.</li>';
            } else {
                resultHtml += '<li>É recomendado revisar o conteúdo antes de tentar novamente.</li>';
            }

            resultHtml += `
                        </ul>
                    </div>
                    
                    <div id="questoes-erradas" class="tab-content">
                        <h3>Questões que Você Errou</h3>
            `;

            const wrongAnswers = results.filter(r => !r.isCorrect);
            if (wrongAnswers.length === 0) {
                resultHtml += '<p>Parabéns! Você acertou todas as questões!</p>';
            } else {
                wrongAnswers.forEach((result, index) => {
                    resultHtml += `
                        <div class="question" style="border-left: 4px solid #e74c3c; padding-left: 1rem; margin: 1rem 0;">
                            <h4>${result.question}</h4>
                            <p><strong>Sua resposta:</strong> ${result.userAnswer}</p>
                            <p><strong>Resposta correta:</strong> ${result.correctAnswer}</p>
                            <p><strong>Explicação:</strong> ${result.explanation}</p>
                        </div>
                    `;
                });
            }

            resultHtml += `
                    </div>
                    
                    <div id="todas-questoes" class="tab-content">
                        <h3>Revisão Completa</h3>
            `;

            results.forEach((result, index) => {
                const statusClass = result.isCorrect ? '#27ae60' : '#e74c3c';
                const statusText = result.isCorrect ? '✓ Correto' : '✗ Incorreto';
                
                resultHtml += `
                    <div class="question" style="border-left: 4px solid ${statusClass}; padding-left: 1rem; margin: 1rem 0;">
                        <h4>Questão ${index + 1}: ${result.question}</h4>
                        <p><strong>Sua resposta:</strong> ${result.userAnswer}</p>
                        <p><strong>Resposta correta:</strong> ${result.correctAnswer}</p>
                        <p><strong>Explicação:</strong> ${result.explanation}</p>
                        <span style="color: ${statusClass}; font-weight: bold;">${statusText}</span>
                    </div>
                `;
            });

            resultHtml += `
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 2rem;">
                    <button class="btn" onclick="resetSimulado()">Novo Simulado</button>
                </div>
            `;

            document.getElementById('simuladoQuiz').innerHTML = resultHtml;
            updateProgress();
        }

        function cancelSimulado() {
            if (simuladoData && simuladoData.timerInterval) {
                clearInterval(simuladoData.timerInterval);
            }
            resetSimulado();
        }

        function resetSimulado() {
            document.getElementById('simuladoQuiz').style.display = 'none';
            document.querySelector('.simulado-config').style.display = 'block';
            simuladoData = null;
        }

        // Função para atualizar progresso
        function updateProgress() {
            courseProgress = Math.min(courseProgress + 5, 100);
            document.getElementById('courseProgress').style.width = courseProgress + '%';
            document.getElementById('progressText').textContent = courseProgress + '%';
        }

        // Responsividade
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                document.getElementById('sidebar').classList.remove('hidden', 'visible');
                document.getElementById('mainContent').classList.remove('expanded');
            }
        });

        // Inicialização
        document.addEventListener('DOMContentLoaded', () => {
            // Mostrar seção inicial
            showSection('home');
            
            // Configurar responsividade inicial
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.add('hidden');
                document.getElementById('mainContent').classList.add('expanded');
            }
        });
    </script>
</body>
</html>

