<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patologia Geral e Hematologia - Curso Interativo Aprimorado</title>
    <style>
        /* Estilos originais do index(6).html para manter a identidade visual */
        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --highlight-color: #e74c3c;
            --success-color: #27ae60;
            --text-color: #333;
            --bg-color-light: #f8f9fa;
            --border-radius: 15px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: url('background3.png') center center/cover no-repeat fixed;
            display: flex;
            flex-direction: column;
        }

        .container {
            display: flex;
            flex: 1; /* Faz o container crescer para preencher o espaço */
        }

        .sidebar {
            width: 300px;
            background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
            color: white;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .sidebar.hidden {
            transform: translateX(-100%);
        }

        .sidebar-header {
            padding: 2rem 1.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #ecf0f1;
        }

        .sidebar-header p {
            font-size: 0.9rem;
            color: #bdc3c7;
            line-height: 1.4;
        }

        .nav-menu {
            padding: 1rem 0;
        }

        .nav-item {
            display: block;
            padding: 1rem 1.5rem;
            color: #ecf0f1;
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            cursor: pointer;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.1);
            border-left-color: var(--highlight-color);
        }

        .nav-item.active {
            background: rgba(255,255,255,0.15);
            border-left-color: var(--highlight-color);
        }

        .nav-item .icon {
            margin-right: 0.5rem;
            font-size: 1.2rem;
        }

        .main-content {
            flex: 1;
            margin-left: 300px;
            padding: 2rem;
            transition: margin-left 0.3s ease;
        }

        .main-content.expanded {
            margin-left: 0;
        }

        .hamburger {
            display: none;
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 1001;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .content-box {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        h2 {
            color: var(--secondary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
        }

        h3 { color: var(--primary-color); margin-top: 20px; margin-bottom: 15px; }
        h4 { color: var(--secondary-color); margin-top: 15px; margin-bottom: 10px; }
        p { margin-bottom: 1em; }
        ul, ol { padding-left: 20px; margin-bottom: 1em; }

        .accordion {
            margin-bottom: 1rem;
        }

        .accordion-header {
            background: linear-gradient(135deg, var(--primary-color), #2980b9);
            color: white;
            padding: 1.5rem;
            cursor: pointer;
            border-radius: 10px;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .accordion-header:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .accordion-header.active {
            background: linear-gradient(135deg, var(--highlight-color), #c0392b);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background: white;
            border-radius: 0 0 10px 10px;
        }

        .accordion-content.active {
            max-height: 10000px; /* Aumentado para conteúdo grande */
            padding: 2rem;
        }

        .tabs {
            margin: 2rem 0;
        }

        .tab-headers {
            display: flex;
            border-bottom: 2px solid #ecf0f1;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .tab-header {
            padding: 1rem 1.5rem;
            background: var(--bg-color-light);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 10px 10px 0 0;
            margin-right: 0.5rem;
            margin-bottom: -2px;
        }

        .tab-header.active {
            background: var(--primary-color);
            color: white;
            border-bottom: 2px solid var(--primary-color);
        }

        .tab-content {
            display: none;
            padding: 1.5rem;
            background: white;
            border-radius: 0 10px 10px 10px;
        }

        .tab-content.active {
            display: block;
        }

        .tooltip {
            position: relative;
            cursor: help;
            color: var(--primary-color);
            font-weight: bold;
            border-bottom: 1px dotted var(--primary-color);
        }

        .tooltip .tooltip-content {
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--secondary-color);
            color: white;
            padding: 0.8rem;
            border-radius: 8px;
            font-size: 0.9rem;
            width: 280px;
            white-space: normal;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .tooltip:hover .tooltip-content {
            opacity: 1;
            visibility: visible;
        }

        .tooltip .tooltip-content::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: var(--secondary-color);
        }
        
        .flashcard-container { display: flex; flex-direction: column; align-items: center; }
        .flashcard { width: 500px; height: 300px; perspective: 1000px; cursor: pointer; margin-bottom: 20px; }
        .flashcard-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
        .flashcard.flipped .flashcard-inner { transform: rotateY(180deg); }
        .flashcard-front, .flashcard-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; padding: 20px; border-radius: var(--border-radius); box-shadow: 0 4px 12px rgba(0,0,0,0.1); font-size: 1.5em; text-align: center; }
        .flashcard-front { background: linear-gradient(135deg, #f0f0f0, #ffffff); color: var(--secondary-color); }
        .flashcard-back { background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%); color: white; transform: rotateY(180deg); font-size: 1.2em; }
        .flashcard-nav { display: flex; gap: 15px; align-items: center; }

        .btn {
            background: linear-gradient(135deg, var(--primary-color), #2980b9);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin: 0.5rem;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
        }
        
        .table-container {
            overflow-x: auto;
            margin: 2rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }

        th {
            background: linear-gradient(135deg, #34495e, var(--secondary-color));
            color: white;
            font-weight: bold;
        }

        tr:hover {
            background: var(--bg-color-light);
        }

        .simulado-config {
            background: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            margin: 2rem 0;
        }

        .config-group {
            margin: 1.5rem 0;
        }

        .config-group > label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: var(--secondary-color);
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
        }

        .checkbox-item input {
            margin-right: 0.5rem;
        }

        .slider {
            width: 100%;
            cursor: pointer;
        }

        .modal {
            display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%;
            overflow: auto; background-color: rgba(0,0,0,0.7);
            align-items: center; justify-content: center;
        }
        .modal-content {
            background-color: #fefefe; margin: auto; padding: 30px;
            border-radius: var(--border-radius); width: 90%; max-width: 800px;
            position: relative; max-height: 90vh; overflow-y: auto;
        }
        .close-button {
            color: #aaa; position: absolute; top: 10px; right: 20px;
            font-size: 28px; font-weight: bold; cursor: pointer;
        }
        .quiz-question { margin-bottom: 20px; }
        .quiz-options label { display: block; margin-bottom: 10px; padding: 10px; border-radius: 5px; cursor: pointer; transition: background-color 0.2s; }
        .quiz-options label:hover { background-color: #f0f0f0; }
        .quiz-result div { margin-bottom: 10px; }
        .review-question { margin-bottom: 15px; padding: 15px; border-radius: 8px; }
        .review-question.correct { background-color: #d4edda; border-left: 5px solid var(--success-color); }
        .review-question.incorrect { background-color: #f8d7da; border-left: 5px solid var(--highlight-color); }

        .reference-list li { margin-bottom: 15px; list-style-type: none; padding-left: 0; }
        .reference-list a { color: var(--primary-color); text-decoration: none; font-weight: bold; }
        .reference-list a:hover { text-decoration: underline; }
        .reference-list p { margin-left: 20px; font-style: italic; color: #555; margin-top: 5px; margin-bottom: 0;}

        .profile-container {
            display: flex;
            align-items: flex-start;
            gap: 2rem;
            flex-wrap: wrap;
        }
        .profile-pic-container {
            flex-shrink: 0;
            text-align: center;
        }
        .profile-pic {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--primary-color);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .profile-text {
            flex-grow: 1;
        }

        .main-footer {
            text-align: center;
            padding: 1rem;
            background-color: rgba(44, 62, 80, 0.9);
            color: #ecf0f1;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }
            .sidebar {
                transform: translateX(-100%);
            }
            .sidebar.visible {
                transform: translateX(0);
            }
            .main-content {
                margin-left: 0;
                padding: 1rem;
            }
            .flashcard {
                width: 100%;
                max-width: 300px;
                height: 250px;
            }
            .tab-headers {
                flex-direction: column;
            }
            .tab-header {
                margin-right: 0;
                margin-bottom: 0.5rem;
                border-radius: 10px;
            }
            .profile-container {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="hamburger" onclick="toggleSidebar()">☰</button>

        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>🩺 Patologia & Hematologia</h1>
                <p>Curso interativo aprimorado, unindo design e funcionalidade avançada.</p>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="#" class="nav-item active" onclick="showSection('home', this)">
                    <span class="icon">🏠</span> Início
                </a>
                <a href="#" class="nav-item" onclick="showSection('modulo1', this)">
                    <span class="icon">🔬</span> Módulo 1: A Célula Sob Ameaça
                </a>
                <a href="#" class="nav-item" onclick="showSection('modulo2', this)">
                    <span class="icon">🛡️</span> Módulo 2: Resposta do Hospedeiro
                </a>
                <a href="#" class="nav-item" onclick="showSection('modulo3', this)">
                    <span class="icon">🩸</span> Módulo 3: Fluidez e Contenção
                </a>
                <a href="#" class="nav-item" onclick="showSection('modulo4', this)">
                    <span class="icon">⚡</span> Módulo 4: Crescimento e Autoagressão
                </a>
                <a href="#" class="nav-item" onclick="showSection('flashcards', this)">
                    <span class="icon">🧠</span> Flashcards
                </a>
                <a href="#" class="nav-item" onclick="showSection('simulado', this)">
                    <span class="icon">📝</span> Simulado
                </a>
                <a href="#" class="nav-item" onclick="showSection('glossario', this)">
                    <span class="icon">📖</span> Glossário
                </a>
                 <a href="#" class="nav-item" onclick="showSection('references', this)">
                    <span class="icon">🔗</span> Fontes
                </a>
            </div>
        </nav>

        <main class="main-content" id="mainContent">
            <!-- Seções serão preenchidas dinamicamente -->
        </main>
    </div>
    
    <footer class="main-footer">
        <p>&copy; 2024 Rodrigo Niskier Ferreira Barbosa. Todos os direitos reservados.</p>
    </footer>

    <!-- Modal para Quizzes -->
    <div id="quiz-modal" class="modal">
        <div class="modal-content" id="quiz-modal-content"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- ESTRUTURA DE DADOS CENTRAL (DO testes.html E PDF) ---
            const courseData = {
                modules: [
                    {
                        id: 'modulo1', title: 'Módulo 1: A Célula Sob Ameaça: Lesão, Adaptação e Morte',
                        sections: [
                            {
                                id: 'sec1-1', title: 'Lesão Celular e Toxicidade Medular',
                                content: `<h3>Fundamentos da Lesão Celular</h3><p>A patologia estuda as reações de células a estímulos nocivos. A célula opera em <span class="tooltip">homeostase<span class="tooltip-content">Estado de equilíbrio dinâmico da célula.</span></span>, mas estresse severo ou prolongado causa lesão. Inicialmente, a lesão pode ser reversível, mas se o ponto de não retorno for ultrapassado, torna-se irreversível, culminando na morte celular.</p><h4>Mecanismos de Lesão Celular</h4><ul><li><b>Depleção de <span class="tooltip">ATP<span class="tooltip-content">Adenosina Trifosfato, a principal moeda energética da célula.</span></span>:</b> A falta de energia por <span class="tooltip">hipóxia<span class="tooltip-content">Baixa concentração de oxigênio nos tecidos.</span></span> ou toxinas afeta bombas iônicas (causando edema celular) e a síntese de proteínas.</li><li><b>Dano Mitocondrial:</b> Leva à falha na produção de ATP e à liberação de proteínas que ativam a <span class="tooltip">apoptose<span class="tooltip-content">Morte celular programada, um processo organizado e sem inflamação.</span></span>, como o citocromo c.</li><li><b>Influxo de Cálcio (Ca²+):</b> Ativa enzimas destrutivas (fosfolipases, proteases) que degradam membranas e proteínas.</li><li><b>Estresse Oxidativo:</b> O acúmulo de <span class="tooltip">EROs<span class="tooltip-content">Espécies Reativas de Oxigênio, ou radicais livres, que causam dano celular.</span></span> danifica lipídios, proteínas e DNA.</li></ul><h4>Aplicação Hematológica - Lesão Tóxica da Medula Óssea</h4><p>A medula óssea, por sua alta proliferação, é muito sensível a lesões. A <span class="tooltip">CTH<span class="tooltip-content">Célula-tronco hematopoiética, responsável por gerar todas as células do sangue.</span></span> é o alvo principal, e sua lesão resulta em <span class="tooltip">pancitopenia<span class="tooltip-content">Redução de todas as linhagens celulares do sangue (eritrócitos, leucócitos, plaquetas).</span></span>.</p><h4>Estudo de Caso 1: Hematotoxicidade do Benzeno</h4><p>O benzeno é metabolizado no fígado e seus metabólitos atacam as CTHs na medula através de múltiplos mecanismos, incluindo estresse oxidativo, dano direto ao DNA e desregulação do receptor <span class="tooltip">AhR<span class="tooltip-content">Receptor de Aril Hidrocarbonetos, um fator de transcrição que ajuda a manter as CTHs em repouso.</span></span>, forçando as CTHs a se dividirem e se tornarem mais suscetíveis a danos.</p><h4>Estudo de Caso 2: Lesão Medular por Cloranfenicol</h4><p>Este antibiótico ilustra a dualidade da lesão celular:<ul><li><b>Lesão Reversível:</b> Em altas doses, inibe a síntese de proteínas mitocondriais, especialmente nos precursores eritroides, causando uma lesão que se reverte após a suspensão do fármaco.</li><li><b>Lesão Irreversível:</b> Em casos raros e idiossincráticos, pode causar uma <span class="tooltip">aplasia medular<span class="tooltip-content">Condição rara e grave em que a medula óssea para de produzir células sanguíneas suficientes.</span></span> fatal, um exemplo de lesão irreversível com morte em massa das CTHs, possivelmente por dano irreparável ao DNA em indivíduos geneticamente predispostos.</li></ul>`
                            },
                            {
                                id: 'sec1-2', title: 'Adaptação Celular e Respostas Medulares',
                                content: `<h3>Fundamentos da Adaptação Celular</h3><p>Células podem se adaptar a estresses, modificando sua estrutura e função. As adaptações incluem:</p><ul><li><span class="tooltip"><b>Hiperplasia</b><span class="tooltip-content">Aumento no NÚMERO de células.</span></span></li><li><span class="tooltip"><b>Hipertrofia</b><span class="tooltip-content">Aumento no TAMANHO das células.</span></span></li><li><span class="tooltip"><b>Atrofia</b><span class="tooltip-content">Redução no tamanho e atividade metabólica de uma célula.</span></span></li><li><span class="tooltip"><b>Metaplasia</b><span class="tooltip-content">Mudança reversível de um tipo celular diferenciado por outro.</span></span></li></ul><h4>Estudo de Caso 3: Hiperplasia Eritroide na Hipóxia Crônica</h4><p>Em condições de <span class="tooltip">hipóxia<span class="tooltip-content">Baixa concentração de oxigênio nos tecidos.</span></span> crônica (ex: grandes altitudes, DPOC), os rins detectam o baixo oxigênio e estabilizam o fator de transcrição <span class="tooltip">HIF<span class="tooltip-content">Fator Induzível por Hipóxia, um 'termostato de oxigênio' molecular.</span></span>. O HIF-2α ativo aumenta a produção do hormônio <span class="tooltip">EPO<span class="tooltip-content">Eritropoietina, hormônio que estimula a produção de glóbulos vermelhos.</span></span>, que age na medula óssea causando hiperplasia da linhagem eritroide. O resultado é a policitemia secundária, que, embora adaptativa, aumenta a viscosidade sanguínea e o risco de <span class="tooltip">trombose<span class="tooltip-content">Formação patológica de um coágulo dentro de um vaso sanguíneo.</span></span>.</p><h4>Estudo de Caso 4: Atrofia Medular na Anemia Aplásica</h4><p>A anemia aplásica é a atrofia do órgão hematopoiético. A causa mais comum é um ataque autoimune mediado por linfócitos T citotóxicos (CD8+) contra as CTHs. Esses linfócitos destroem as CTHs liberando citocinas inibitórias (IFN-γ, TNF-α) e induzindo apoptose, resultando em falência medular completa.</p>`
                            },
                            {
                                id: 'sec1-3', title: 'Morte Celular e Hemólise',
                                content: `<h3>Fundamentos da Morte Celular</h3><p>Existem duas vias principais de morte celular: apoptose e necrose.</p><ul><li><span class="tooltip"><b>Apoptose:</b><span class="tooltip-content">Morte celular programada, 'suicídio celular' organizado, que não causa inflamação.</span></span> Processo ativo e regulado. A célula encolhe e é fagocitada sem inflamação. Pode ser iniciada pela via intrínseca (mitocondrial) ou extrínseca (receptores de morte).</li><li><span class="tooltip"><b>Necrose:</b><span class="tooltip-content">Morte celular acidental, descontrolada, que sempre causa inflamação.</span></span> Processo passivo, resultado de lesão aguda. A célula incha, sua membrana se rompe (lise) e o conteúdo extravasa, causando inflamação.</li></ul><div id="table1-container"></div><h4>Estudo de Caso 5: Anemia Falciforme</h4><p>Uma mutação pontual no gene da β-globina cria a Hemoglobina S (HbS). Sob baixa tensão de oxigênio, a HbS se polimeriza, distorcendo os eritrócitos para a forma de foice (drepanócito). Estes eritrócitos rígidos são destruídos prematuramente (<span class="tooltip">hemólise<span class="tooltip-content">Destruição de hemácias.</span></span>), com vida média de 10-20 dias, e podem bloquear pequenos vasos (<span class="tooltip">vaso-oclusão<span class="tooltip-content">Obstrução de vasos sanguíneos.</span></span>), causando dor intensa e <span class="tooltip">isquemia<span class="tooltip-content">Falta de suprimento sanguíneo para um tecido, levando à falta de oxigênio.</span></span> tecidual.</p>`
                            }
                        ]
                    },
                    {
                        id: 'modulo2', title: 'Módulo 2: A Resposta do Hospedeiro: Inflamação e Reparo',
                        sections: [
                            {
                                id: 'sec2-1', title: 'Inflamação e o Leucograma',
                                content: `<h3>Fundamentos da Inflamação</h3><p>A inflamação é uma resposta protetora a agentes agressores. A <b>inflamação aguda</b> é rápida, de curta duração, e marcada pela migração de <span class="tooltip">neutrófilos<span class="tooltip-content">Tipo de leucócito que é a primeira linha de defesa contra infecções bacterianas.</span></span>. A <b>inflamação crônica</b> é prolongada e envolve <span class="tooltip">linfócitos<span class="tooltip-content">Tipos de leucócitos envolvidos na imunidade específica e memória imunológica.</span></span> e macrófagos. O processo é orquestrado por mediadores como <span class="tooltip">citocinas<span class="tooltip-content">Proteínas que mediam e regulam a resposta imune e inflamatória (ex: TNF, IL-1, IL-6).</span></span> e <span class="tooltip">quimiocinas<span class="tooltip-content">Subfamília de citocinas que direcionam a migração de leucócitos.</span></span>.</p><h4>O Hemograma como Janela da Inflamação</h4><p>O leucograma reflete diretamente os processos inflamatórios. A análise deve ser feita com valores absolutos.</p><div id="table2-container"></div><div id="table3-container"></div><h4>Análise Laboratorial 2: Efeitos Sistêmicos e a CIVD na Sepse</h4><p>A <span class="tooltip">sepse<span class="tooltip-content">Resposta inflamatória sistêmica desregulada a uma infecção, que pode levar à falência de órgãos.</span></span> é uma resposta inflamatória sistêmica que pode levar à <span class="tooltip">CIVD<span class="tooltip-content">Coagulação Intravascular Disseminada: ativação sistêmica da coagulação, levando a trombose e hemorragia por consumo de fatores.</span></span>. Citocinas (TNF, IL-1) induzem a expressão massiva do <span class="tooltip">Fator Tecidual<span class="tooltip-content">O principal iniciador da via extrínseca da coagulação.</span></span>, ativando a coagulação de forma descontrolada. Simultaneamente, os sistemas anticoagulantes são suprimidos. O resultado é a formação de microtrombos, isquemia, e um consumo de plaquetas e fatores que leva a um risco paradoxal de sangramento grave.</p>`
                            },
                            {
                                id: 'sec2-2', title: 'Reparo Tecidual e Fibrose Medular',
                                content: `<h3>Fundamentos do Reparo</h3><p>O reparo tecidual pode ocorrer por <b>regeneração</b> (restauração completa) ou <b>cicatrização</b> (<span class="tooltip">fibrose<span class="tooltip-content">Deposição de tecido conjuntivo, formando uma cicatriz.</span></span>). A fibrose é orquestrada por fatores de crescimento como <span class="tooltip">TGF-β<span class="tooltip-content">Fator de Crescimento Transformador-beta, o principal indutor da fibrose.</span></span> e <span class="tooltip">PDGF<span class="tooltip-content">Fator de Crescimento Derivado de Plaquetas, que recruta e ativa fibroblastos.</span></span>.</p><h4>Estudo de Caso 6: Mielofibrose Primária (MFP)</h4><p>Na MFP, uma neoplasia mieloproliferativa, os megacariócitos clonais e atípicos liberam grandes quantidades de PDGF e TGF-β. Esses fatores estimulam fibroblastos normais a depositar colágeno excessivamente na medula óssea, levando à fibrose reativa. A destruição do microambiente medular suprime a hematopoiese normal e a desloca para outros órgãos (hematopoiese extramedular). Isso resulta em <span class="tooltip">leucoeritroblastose<span class="tooltip-content">Presença de precursores de leucócitos e eritrócitos no sangue periférico.</span></span> e na formação de <span class="tooltip">dacriócitos<span class="tooltip-content">Hemácia em forma de lágrima, um achado morfológico altamente sugestivo de fibrose medular.</span></span>.</p>`
                            }
                        ]
                    },
                    {
                        id: 'modulo3', title: 'Módulo 3: Distúrbios Hemodinâmicos e da Coagulação',
                        sections: [
                            {
                                id: 'sec3-1', title: 'Hemostasia e Trombose',
                                content: `<h3>Fundamentos da Hemostasia</h3><p>A <span class="tooltip">hemostasia<span class="tooltip-content">Processo fisiológico que impede o sangramento, formando um coágulo no local da lesão.</span></span> é o equilíbrio entre manter o sangue fluido e formar coágulos. Ela se divide em:</p><ul><li><b>Hemostasia Primária:</b> Formação do tampão plaquetário. Envolve adesão (via <span class="tooltip">FvW<span class="tooltip-content">Fator de von Willebrand, uma proteína que serve de ponte entre o colágeno e as plaquetas.</span></span>), ativação (com liberação de ADP e <span class="tooltip">TXA2<span class="tooltip-content">Potente ativador e recrutador de plaquetas.</span></span>) e agregação de plaquetas.</li><li><b>Hemostasia Secundária:</b> Ativação da cascata da coagulação para formar uma malha de fibrina estável. As vias extrínseca (iniciada pelo <span class="tooltip">TF<span class="tooltip-content">Fator Tecidual, o principal iniciador da via extrínseca da coagulação.</span></span>) e intrínseca convergem para gerar a <span class="tooltip">trombina<span class="tooltip-content">Enzima central da coagulação, que converte fibrinogênio em fibrina.</span></span>, a enzima central.</li></ul><p>A <span class="tooltip">trombose<span class="tooltip-content">Formação patológica de um coágulo dentro de um vaso sanguíneo intacto.</span></span> é influenciada pela <span class="tooltip">Tríade de Virchow<span class="tooltip-content">Modelo que descreve os 3 fatores que contribuem para a trombose: lesão endotelial, alteração do fluxo sanguíneo e hipercoagulabilidade.</span></span>: (1) Lesão endotelial, (2) Estase ou turbulência do fluxo, e (3) Hipercoagulabilidade.</p><h4>Falhas na Hemostasia</h4><ul><li><b>Estudo de Caso 7: PTI (Púrpura Trombocitopênica Imune):</b> Defeito na hemostasia primária. Autoanticorpos (IgG) opsonizam plaquetas, que são destruídas no baço. Clínica: <span class="tooltip">petéquias<span class="tooltip-content">Pequenos pontos hemorrágicos (<2mm) na pele ou mucosas, característicos de problemas plaquetários.</span></span> e equimoses.</li><li><b>Estudo de Caso 8: Hemofilia A:</b> Defeito na hemostasia secundária. Deficiência hereditária do Fator VIII, essencial para a via intrínseca. Clínica: sangramentos profundos em articulações (<span class="tooltip">hemartroses<span class="tooltip-content">Sangramento dentro de uma articulação, muito doloroso e destrutivo.</span></span>) e músculos. O TTPA é prolongado.</li><li><b>Estudo de Caso 9: CIVD:</b> Falha sistêmica e tempestade hemostática. Ativação massiva da coagulação consome plaquetas e fatores, gerando microtrombos e, paradoxalmente, hemorragia. O diagnóstico é auxiliado pelo escore da ISTH.</li></ul><div id="table4-container"></div>`
                            }
                        ]
                    },
                    {
                        id: 'modulo4', title: 'Módulo 4: Neoplasia e Autoimunidade',
                        sections: [
                            {
                                id: 'sec4-1', title: 'Neoplasia e as "Marcas do Câncer"',
                                content: `<h3>Fundamentos da Biologia do Câncer</h3><p>O câncer é uma doença genética resultante do acúmulo de mutações em classes de genes:</p><ul><li><span class="tooltip"><b>Proto-oncogenes:</b><span class="tooltip-content">Genes normais que promovem o crescimento celular. Quando mutados, tornam-se oncogenes.</span></span> Atuam como 'aceleradores' presos quando se tornam <span class="tooltip">oncogenes<span class="tooltip-content">Versão mutada de um proto-oncogene que impulsiona a proliferação celular de forma contínua.</span></span>.</li><li><span class="tooltip"><b>Genes Supressores de Tumor:</b><span class="tooltip-content">Genes que inibem a proliferação celular, atuando como 'freios'. Sua perda de função promove o câncer.</span></span> Atuam como 'freios'. O mais famoso é o <span class="tooltip">TP53<span class="tooltip-content">Gene supressor de tumor conhecido como 'guardião do genoma', pois controla o ciclo celular e a apoptose.</span></span>, o 'guardião do genoma'.</li><li><b>Genes de Reparo de DNA:</b> Sua inativação leva à instabilidade genômica.</li></ul><p>As <span class="tooltip">"Marcas do Câncer"<span class="tooltip-content">Conjunto de 8 capacidades biológicas fundamentais adquiridas pelas células durante o desenvolvimento do câncer (proliferação, evasão da morte, etc.).</span></span> de Hanahan e Weinberg organizam a complexidade da biologia tumoral.</p><h4>As "Marcas" nas Neoplasias Hematológicas</h4><div id="table5-container"></div><ul><li><b>Exemplo 1: LMC (Leucemia Mieloide Crônica):</b> Ilustra a 'sinalização proliferativa sustentada'. A translocação t(9;22) cria a quinase <span class="tooltip">BCR-ABL1<span class="tooltip-content">Oncoproteína de fusão resultante da translocação t(9;22), definidora da LMC, que está permanentemente ativa.</span></span>, que ativa vias de proliferação de forma independente de fatores de crescimento.</li><li><b>Exemplo 2: Linfoma Folicular (LF):</b> Mostra a 'resistência à morte celular'. A translocação t(14;18) causa a superexpressão da proteína anti-apoptótica <span class="tooltip">BCL2<span class="tooltip-content">Proteína anti-apoptótica. Sua superexpressão no Linfoma Folicular impede a morte celular programada, conferindo uma vantagem de sobrevivência.</span></span>, bloqueando a apoptose e permitindo o acúmulo das células do linfoma.</li><li><b>Exemplo 3: Mieloma Múltiplo (MM):</b> Demonstra a importância do microambiente tumoral. As células de mieloma aderem às células estromais, que secretam <span class="tooltip">IL-6<span class="tooltip-content">Interleucina-6, um potente fator de crescimento e sobrevivência para as células de mieloma.</span></span>, um fator de crescimento para o mieloma. Em troca, o mieloma remodela o osso, criando um ciclo vicioso de suporte.</li></ul>`
                            },
                            {
                                id: 'sec4-2', title: 'Autoimunidade e Citotoxicidade',
                                content: `<h3>Fundamentos da Tolerância e Autoimunidade</h3><p>A <span class="tooltip">autoimunidade<span class="tooltip-content">Falha do sistema imune em reconhecer os próprios tecidos, levando a um ataque contra o 'próprio'.</span></span> é a quebra da <span class="tooltip">tolerância imunológica<span class="tooltip-content">Capacidade do sistema imune de distinguir o 'próprio' do 'não-próprio', evitando ataques ao próprio corpo.</span></span>. Esta tolerância é estabelecida pela tolerância central (no timo e medula óssea) e periférica (nos tecidos). A <span class="tooltip">Hipersensibilidade do Tipo II<span class="tooltip-content">Reação imune mediada por anticorpos (IgG/IgM) que se ligam a antígenos na superfície celular, causando destruição da célula.</span></span> é um mecanismo chave em doenças autoimunes, onde anticorpos causam destruição celular via opsonização, inflamação mediada por complemento ou citotoxicidade celular.</p><h4>Estudo de Caso 10: Anemia Hemolítica Autoimune (AHAI)</h4><p>A AHAI é um exemplo clássico de hipersensibilidade tipo II, onde autoanticorpos destroem eritrócitos. O diagnóstico é confirmado pelo <span class="tooltip">TAD (Teste de Coombs Direto)<span class="tooltip-content">Teste de Antiglobulina Direto, que detecta anticorpos e/ou complemento ligados à superfície das hemácias do paciente.</span></span>.</p><div id="table6-container"></div><ul><li><b>AHAI por Anticorpos Quentes (WAIHA):</b> A forma mais comum, mediada por <b>IgG</b> que reage a 37°C. A hemólise é principalmente <b>extravascular (no baço)</b>, onde macrófagos fagocitam as hemácias opsonizadas. A remoção parcial da membrana pelos macrófagos cria <span class="tooltip">esferócitos<span class="tooltip-content">Hemácias pequenas, esféricas e sem palidez central, resultantes da perda de membrana.</span></span>. O TAD é positivo para IgG (às vezes com C3).</li><li><b>Doença da Aglutinina a Frio (CAD):</b> Mediada por <b>IgM</b>, que se liga aos eritrócitos em temperaturas frias (<37°C) nas extremidades. A IgM é uma potente ativadora do <span class="tooltip">complemento<span class="tooltip-content">Sistema de proteínas plasmáticas que, quando ativado, promove inflamação e lise celular.</span></span>. A hemólise tem um componente <b>intravascular</b> (pela lise direta via MAC) e <b>extravascular (no fígado)</b>, onde macrófagos reconhecem hemácias opsonizadas com C3b. O TAD é caracteristicamente positivo apenas para <b>C3</b>.</li></ul>`
                            }
                        ]
                    }
                ],
                quizzes: {
                    'sec1-1': [ { q: "Qual o termo para o estado de equilíbrio dinâmico da célula?", options: ["Metaplasia", "Homeostase", "Hipóxia", "Apoptose"], a: 1, d: 'Fácil' }, { q: "O influxo excessivo de qual íon ativa enzimas destrutivas como fosfolipases e proteases durante a lesão celular?", options: ["Sódio (Na+)", "Potássio (K+)", "Cálcio (Ca²+)", "Cloro (Cl-)"], a: 2, d: 'Difícil' } ],
                    'sec1-2': [ { q: "O aumento no TAMANHO das células em resposta a um estímulo é chamado de:", options: ["Hiperplasia", "Atrofia", "Hipertrofia", "Metaplasia"], a: 2, d: 'Fácil' }, { q: "Qual a principal consequência patológica do aumento excessivo da viscosidade sanguínea na policitemia secundária?", options: ["Aumento do risco de infecções", "Aumento do risco de eventos trombóticos", "Redução da pressão arterial", "Insuficiência renal aguda"], a: 1, d: 'Difícil' } ],
                    'sec1-3': [ { q: "Qual tipo de morte celular é caracterizado por ser um processo programado e que NÃO causa inflamação?", options: ["Necrose", "Apoptose", "Piroptose", "Oncrose"], a: 1, d: 'Fácil' }, { q: "O que desencadeia o afoiçamento dos eritrócitos na Anemia Falciforme?", options: ["Alta tensão de oxigênio", "Baixa tensão de oxigênio", "Aumento da glicose no sangue", "Presença de anticorpos"], a: 1, d: 'Médio' } ],
                    'sec2-1': [ { q: "Qual célula é predominante na inflamação aguda?", options: ["Linfócito", "Macrófago", "Neutrófilo", "Plasmócito"], a: 2, d: 'Fácil' }, { q: "Um desvio à esquerda degenerativo (mais imaturos que maduros) indica:", options: ["Uma resposta medular robusta e bom prognóstico", "Uma infecção viral leve", "Que a demanda excede a capacidade da medula, um mau prognóstico", "Uma reação alérgica"], a: 2, d: 'Difícil' } ],
                    'sec2-2': [ { q: "Qual fator de crescimento é considerado o principal indutor da fibrose?", options: ["EPO", "G-CSF", "TGF-β", "PDGF"], a: 2, d: 'Médio' }, { q: "A presença de dacriócitos (hemácias em lágrima) no sangue periférico é altamente sugestiva de:", options: ["Anemia falciforme", "Infecção viral", "Fibrose medular", "Deficiência de ferro"], a: 2, d: 'Médio' } ],
                    'sec3-1': [ { q: "Qual processo é responsável pela formação do tampão plaquetário inicial?", options: ["Hemostasia Secundária", "Fibrinólise", "Hemostasia Primária", "Inflamação"], a: 2, d: 'Fácil' }, { q: "Qual dos seguintes componentes NÃO faz parte da Tríade de Virchow?", options: ["Lesão endotelial", "Hipercoagulabilidade", "Estase do fluxo sanguíneo", "Hipotensão arterial"], a: 3, d: 'Médio' } ],
                    'sec4-1': [ { q: "Genes que normalmente funcionam como 'freios' da proliferação celular são chamados de:", options: ["Oncogenes", "Proto-oncogenes", "Genes Supressores de Tumor", "Genes de reparo"], a: 2, d: 'Fácil' }, { q: "No Linfoma Folicular, a superexpressão da proteína BCL2 confere qual 'marca do câncer' às células neoplásicas?", options: ["Indução de angiogênese", "Resistência à morte celular", "Sinalização proliferativa sustentada", "Invasão e metástase"], a: 1, d: 'Médio' } ],
                    'sec4-2': [ { q: "Qual teste laboratorial é crucial para confirmar o diagnóstico de Anemia Hemolítica Autoimune (AHAI)?", options: ["Hemograma completo", "Contagem de reticulócitos", "Teste de Coombs Direto (TAD)", "Biópsia de medula óssea"], a: 2, d: 'Fácil' }, { q: "Na AHAI por anticorpos quentes (WAIHA), qual classe de anticorpo está tipicamente envolvida e onde ocorre a principal destruição das hemácias?", options: ["IgM / Fígado", "IgA / Intestino", "IgG / Baço", "IgE / Pele"], a: 2, d: 'Médio' } ],
                },
                tables: {
                    table1: { title: "Tabela 1: Necrose vs. Apoptose", headers: ["Característica", "Apoptose", "Necrose"], rows: [ ["Estímulo", "Fisiológico ou Patológico", "Sempre Patológico"], ["Escopo", "Células individuais ou pequenos grupos", "Grandes grupos de células contíguas"], ["Morfologia Celular", "Encolhimento celular, condensação da cromatina", "Edema celular (oncrose), desnaturação de proteínas"], ["Integridade da Membrana", "Mantida; formação de corpos apoptóticos", "Perdida; ruptura da membrana e lise celular"], ["Mecanismo Bioquímico", "Processo ativo, dependente de ATP, mediado por caspases", "Processo passivo, falha na produção de ATP"], ["Resposta Tecidual", "Fagocitose silenciosa, sem inflamação", "Inflamação aguda com recrutamento de neutrófilos"], ["Marcadores Laboratoriais", "Nenhum específico no soro", "Liberação de enzimas (ex: LDH) para o soro"] ] },
                    table2: { title: "Tabela 2: Principais Citocinas na Inflamação e Hematopoiese", headers: ["Citocina", "Principais Fontes", "Funções na Inflamação", "Funções na Hematopoiese"], rows: [ ["IL-1, TNF-α", "Macrófagos, monócitos", "Ativação endotelial, febre, ativação de leucócitos", "Estimulam a produção de fatores de crescimento de colônias (CSFs)"], ["IL-6", "Macrófagos, linfócitos T", "Indução de proteínas de fase aguda, proliferação de linfócitos B", "Estimula a produção de plaquetas, promove diferenciação de células B"], ["G-CSF", "Macrófagos, fibroblastos", "Mobilização e ativação de neutrófilos", "Principal fator para proliferação e diferenciação de neutrófilos"], ["GM-CSF", "Linfócitos T, macrófagos", "Ativação de macrófagos e neutrófilos", "Estimula progenitores granulocíticos e monocíticos"], ["EPO", "Células renais, hepatócitos", "N/A", "Principal fator para proliferação e diferenciação da linhagem eritroide"] ] },
                    table3: { title: "Tabela 3: Interpretação dos Padrões Leucocitários", headers: ["Padrão Leucocitário", "Definição", "Mecanismo Principal", "Interpretação Comum"], rows: [ ["Neutrofilia", "Aumento de neutrófilos", "Liberação de reservas, aumento da produção, demarginação", "Infecção bacteriana aguda, inflamação estéril, estresse"], ["Neutropenia", "Redução de neutrófilos", "Consumo aumentado, produção diminuída, sequestro", "Sepse grave, quimioterapia, aplasia medular"], ["Desvio à Esquerda Regenerativo", "Neutrofilia com maduros > imaturos", "Resposta medular robusta à inflamação", "Inflamação aguda controlada, bom prognóstico"], ["Desvio à Esquerda Degenerativo", "Imaturos > maduros", "Demanda excede a capacidade de produção da medula", "Inflamação grave/sepse, prognóstico reservado"], ["Linfocitose", "Aumento de linfócitos", "Resposta imune a antígenos, proliferação clonal", "Infecções virais, inflamação crônica, LLC"], ["Monocitose", "Aumento de monócitos", "Demanda por macrófagos teciduais", "Inflamação crônica (ex: tuberculose), neoplasias mieloides"], ["Eosinofilia", "Aumento de eosinófilos", "Resposta a alérgenos ou parasitas (mediada por IL-5)", "Reações alérgicas, infecções parasitárias"] ] },
                    table4: { title: "Tabela 4: Escore Diagnóstico da ISTH para CIVD Manifesta", headers: ["Parâmetro Laboratorial", "Resultado", "Pontos"], rows: [ ["Contagem de Plaquetas", "> 100.000/μL", "0"], ["", "50.000-100.000/μL", "1"], ["", "< 50.000/μL", "2"], ["Marcadores Relacionados à Fibrina (ex: D-dímero)", "Sem aumento", "0"], ["", "Aumento moderado", "2"], ["", "Aumento acentuado", "3"], ["Tempo de Protrombina (TP) - Aumento", "< 3 segundos", "0"], ["", "3-6 segundos", "1"], ["", "> 6 segundos", "2"], ["Nível de Fibrinogênio", "> 1,0 g/L", "0"], ["", "< 1,0 g/L", "1"], ["<b>Interpretação</b>", "<b>< 5 pontos: Sugestivo de CIVD não manifesta</b>", ""], ["", "<b>≥ 5 pontos: Compatível com CIVD manifesta</b>", ""] ] },
                    table5: { title: "Tabela 5: As 'Marcas do Câncer' em Neoplasias Hematológicas", headers: ["Marca do Câncer", "Mecanismo Geral", "Exemplo Paradigmático em Hematologia"], rows: [ ["Sinalização Proliferativa Sustentada", "Ativação de vias de crescimento independentemente de estímulos externos", "Tirosina quinase constitutivamente ativa; <b>BCR-ABL1</b> na Leucemia Mieloide Crônica (LMC)"], ["Evasão de Supressores de Crescimento", "Inativação de genes que freiam o ciclo celular", "Perda de função do gene <b>TP53</b> em muitas leucemias agudas"], ["Resistência à Morte Celular", "Inibição das vias de apoptose", "Superexpressão da proteína anti-apoptótica <b>BCL2</b> devido à translocação t(14;18) no Linfoma Folicular (LF)"], ["Imortalidade Replicativa", "Manutenção dos telômeros para permitir divisões ilimitadas", "Reativação da enzima telomerase, comum em neoplasias avançadas"], ["Indução de Angiogênese", "Estímulo à formação de novos vasos sanguíneos", "Secreção de VEGF por células leucêmicas na Leucemia Mieloide Aguda (LMA)"], ["Ativação de Invasão e Metástase", "Capacidade de invadir tecidos e colonizar locais distantes", "Infiltração da medula óssea, baço, fígado e SNC por blastos leucêmicos"], ["Reprogramação do Metabolismo Energético", "Alteração do metabolismo para suportar a proliferação rápida", "Aumento da captação de glicose em linfomas agressivos"], ["Evasão da Destruição Imune", "Capacidade de se esconder ou suprimir o sistema imunológico", "Interação com o microambiente (células estromais) e secreção de <b>IL-6</b> no Mieloma Múltiplo (MM)"] ] },
                    table6: { title: "Tabela 6: Fisiopatologia e Achados na Anemia Hemolítica Autoimune (AHAI)", headers: ["Característica", "AHAI por Anticorpos Quentes (WAIHA)", "Doença da Aglutinina a Frio (CAD)"], rows: [ ["Isotipo do Anticorpo", "Geralmente <b>IgG</b>", "Geralmente <b>IgM</b>"], ["Temperatura Ótima", "<b>37°C</b> (temperatura corporal)", "<b>< 37°C</b> (temperaturas frias, extremidades)"], ["Principal Local de Hemólise", "<b>Extravascular</b> (principalmente no baço)", "<b>Intravascular</b> e <b>Extravascular</b> (principalmente no fígado)"], ["Mecanismo de Destruição", "Opsonização por IgG e fagocitose por macrófagos esplênicos", "Potente ativação do complemento (lise pelo MAC ou fagocitose de células opsonizadas com C3b)"], ["Achados no Esfregaço", "<b>Esferócitos</b>, policromasia", "<b>Aglutinação de hemácias</b>, policromasia"], ["Resultado Típico do TAD", "Positivo para <b>IgG</b> (com ou sem C3)", "Positivo <b>apenas para C3</b>"], ["Sintomas Característicos", "Sinais de anemia (fadiga, palidez), icterícia, esplenomegalia", "Acrocianose (extremidades azuladas), hemoglobinúria induzida pelo frio"] ] }
                },
                references: [
                    { source: "PubMed Central (PMC7171462)", url: "https://pmc.ncbi.nlm.nih.gov/articles/PMC7171462/", comment: "Uma revisão aprofundada sobre os mecanismos e a morfologia da lesão, adaptação e morte celular." }, { source: "NCBI Bookshelf (NBK526045)", url: "https://www.ncbi.nlm.nih.gov/books/NBK526045/", comment: "Um capítulo de referência sobre a histologia da morte celular, abordando apoptose e necrose." }, { source: "PubMed Central (PMC3271273)", url: "https://pmc.ncbi.nlm.nih.gov/articles/PMC3271273/", comment: "Artigo detalhado sobre o mecanismo da toxicidade do benzeno e seus efeitos hematológicos." }, { source: "American Society of Hematology (Blood)", url: "https://ashpublications.org/blood/article/139/16/2441/476633/Breakthrough-science-hypoxia-inducible-factors", comment: "Artigo de ponta sobre os fatores induzíveis por hipóxia (HIF) e sua regulação da hematopoiese." }, { source: "Mayo Clinic (Aplastic Anemia)", url: "https://www.mayoclinic.org/diseases-conditions/aplastic-anemia/symptoms-causes/syc-20355015", comment: "Recurso clínico confiável explicando as causas e sintomas da anemia aplásica." }, { source: "FSJ (Fisiopatologia da Anemia Falciforme)", url: "https://www.fsj.edu.br/transformar/index.php/transformar/article/download/60/56", comment: "Artigo em português que detalha a fisiopatologia da anemia falciforme." }, { source: "PubMed Central (PMC10486945)", url: "https://pmc.ncbi.nlm.nih.gov/articles/PMC10486945/", comment: "Visão geral da fisiopatologia da Coagulação Intravascular Disseminada (CIVD)." }, { source: "Journal of Experimental Medicine", url: "https://rupress.org/jem/article/217/3/e20190103/133821/Transforming-growth-factor-in-tissue-fibrosisTGF", comment: "Investigação sobre o papel central do TGF-β na fibrose tecidual." }, { source: "ARUP Consult (Disseminated Intravascular Coagulation)", url: "https://arupconsult.com/content/disseminated-intravascular-coagulation", comment: "Guia prático para o diagnóstico laboratorial da CIVD, incluindo o escore da ISTH." }, { source: "EPFL (Hallmarks of Cancer)", url: "https://www.epfl.ch/labs/hanahan-lab/wp-content/uploads/2019/02/HanahanWeinberg-CH_2-Oncology-DeVita2014.pdf", comment: "O capítulo fundamental de Hanahan e Weinberg que define as 'Marcas do Câncer'." }, { source: "PubMed Central (PMC3461914)", url: "https://pmc.ncbi.nlm.nih.gov/articles/PMC3461914/", comment: "Análise da patogênese do Linfoma Folicular, com foco na translocação t(14;18) e no gene BCL2." }, { source: "Merck Manuals Professional (Autoimmune Hemolytic Anemia)", url: "https://www.merckmanuals.com/professional/hematology-and-oncology/anemias-caused-by-hemolysis/autoimmune-hemolytic-anemia", comment: "Referência clínica completa sobre a AHAI, detalhando as formas quente e fria." }, { source: "NCBI Bookshelf (NBK547707)", url: "https://www.ncbi.nlm.nih.gov/books/NBK547707/", comment: "Explicação detalhada sobre o Teste de Coombs (Antiglobulina)." }
                ],
                glossario: {
                    "ATP": "Adenosina Trifosfato - a moeda energética da célula, essencial para todos os processos que requerem energia",
                    "Homeostase": "Estado de equilíbrio dinâmico mantido pelos sistemas biológicos para preservar condições internas estáveis",
                    "Patologia": "Estudo das reações fundamentais de células e tecidos a estímulos nocivos, que são a base de todas as doenças",
                    "Apoptose": "Morte celular programada, processo ativo que requer energia e é mediado por caspases",
                    "Necrose": "Morte celular acidental e descontrolada que ocorre após lesão aguda e severa",
                    "Hiperplasia": "Aumento no número de células em resposta a estímulos fisiológicos ou patológicos",
                    "Hipertrofia": "Aumento no tamanho das células sem aumento no número",
                    "Atrofia": "Redução no tamanho e na atividade metabólica de uma célula",
                    "Metaplasia": "Mudança reversível na qual um tipo celular diferenciado é substituído por outro",
                    "Eritropoietina (EPO)": "Hormônio produzido pelos rins que estimula a produção de eritrócitos",
                    "HIF": "Fator Induzível por Hipóxia - regula a resposta celular à baixa concentração de oxigênio",
                    "Anemia Falciforme": "Doença hereditária causada por mutação na β-globina, resultando em HbS",
                    "Inflamação": "Resposta fundamental e protetora dos tecidos vascularizados a agentes agressores",
                    "Leucograma": "Contagem diferencial de leucócitos que funciona como 'biópsia líquida' da resposta inflamatória",
                    "CIVD": "Coagulação Intravascular Disseminada - ativação sistêmica e descontrolada da coagulação",
                    "Mielofibrose Primária": "Neoplasia mieloproliferativa caracterizada por fibrose medular reativa",
                    "Hemostasia": "Processo fisiológico que mantém o sangue fluido mas permite formação de tampão hemostático",
                    "PTI": "Púrpura Trombocitopênica Imune - doença autoimune com destruição de plaquetas por autoanticorpos",
                    "Hemofilia A": "Doença hereditária ligada ao X causada por deficiência do Fator VIII",
                    "LMC": "Leucemia Mieloide Crônica - neoplasia definida pela translocação t(9;22)",
                    "BCR-ABL1": "Gene de fusão que codifica tirosina quinase constitutivamente ativa na LMC",
                    "Linfoma Folicular": "Linfoma definido pela translocação t(14;18) e superexpressão de BCL2",
                    "AHAI": "Anemia Hemolítica Autoimune - destruição prematura de eritrócitos por autoanticorpos",
                    "TAD": "Teste de Antiglobulina Direto - confirma a presença de anticorpos na superfície eritrocitária"
                }
            };

            // --- VARIÁVEIS GLOBAIS DO APP ---
            const mainContent = document.getElementById('mainContent');
            const navMenu = document.getElementById('nav-menu');
            const sidebar = document.getElementById('sidebar');
            const hamburger = document.querySelector('.hamburger');
            const quizModal = document.getElementById('quiz-modal');
            const quizModalContent = document.getElementById('quiz-modal-content');

            // --- FUNÇÕES DE RENDERIZAÇÃO ---

            const renderPage = (pageId) => {
                let html = '';
                // Adiciona a classe fade-in para a animação
                mainContent.classList.remove('fade-in');
                void mainContent.offsetWidth; // Trigger reflow para reiniciar a animação
                mainContent.classList.add('fade-in');

                if (pageId.startsWith('modulo')) {
                    html = renderModule(pageId);
                } else {
                    switch (pageId) {
                        case 'home': html = getHomePageHtml(); break;
                        case 'flashcards': html = getFlashcardsPageHtml(); break;
                        case 'simulado': html = getSimuladoPageHtml(); break;
                        case 'glossario': html = getGlossarioPageHtml(); break;
                        case 'references': html = getReferencesPageHtml(); break;
                        default: html = '<div class="content-box"><h2>Página não encontrada</h2></div>';
                    }
                }
                mainContent.innerHTML = html;
                attachPageEventListeners(pageId);
            };

            const getHomePageHtml = () => `
                <div class="content-box">
                    <h1>Bem-vindo ao Curso de Patologia e Hematologia</h1>
                    <p>Esta plataforma aprimorada combina um design familiar com funcionalidades avançadas para uma experiência de aprendizado superior. Navegue pelos módulos, teste seus conhecimentos e explore os recursos interativos.</p>
                    <h2>Objetivos do Curso</h2>
                    <ul>
                        <li>Compreender os princípios fundamentais da patologia geral.</li>
                        <li>Aplicar esses princípios à hematologia clínica e laboratorial.</li>
                        <li>Analisar casos clínicos paradigmáticos e interpretar achados laboratoriais.</li>
                        <li>Desenvolver raciocínio clínico-patológico integrado.</li>
                    </ul>
                </div>
                <div class="content-box">
                    <div class="profile-container">
                        <div class="profile-pic-container">
                            <img src=foto.jpg" alt="Foto de Rodrigo Niskier Ferreira Barbosa" class="profile-pic">
                        </div>
                        <div class="profile-text">
                            <h2>Rodrigo Niskier Ferreira Barbosa</h2>
                            <p><strong>E-mail:</strong> niskier.rodrigo@gmail.com</p>
                            <p>Formado em Biomedicina (2003, UFPE), especialista em Biologia Molecular (2006, UPE), mestrado em Genética e Biologia Molecular (2007, UFRN), atua como professor do ensino superior desde 2007 (aprox. 18 anos).</p>
                            <p>Atualmente leciona Mecanismos de Agressão, Patológicos e de Defesa no curso de Medicina (UNIPE - João Pessoa). Dedica-se a pesquisa acadêmica teórica em diversas áreas, incluindo: Imunologia, Genética e Neoplasias.</p>
                            <p>Desde 2024 vem publicando e desenvolvendo aplicações para Web em diversas áreas, utilizando ferramentas de AI-LLM.</p>
                            <p style="margin-top: 1.5rem;"><strong>Conheça meu livro 'Autoimunidade: Conexões Essenciais: Bases genéticas, neuroendócrinas e imunológicas da perda de tolerância'.</strong> <a href="https://amzn.to/3GDHw6K" target="_blank" rel="noopener noreferrer" style="color: var(--primary-color); font-weight: bold;">Acesse o link</a>.</p>
                        </div>
                    </div>
                </div>
            `;

            const renderModule = (moduleId) => {
                const module = courseData.modules.find(m => m.id === moduleId);
                if (!module) return '<div class="content-box"><h2>Módulo não encontrado</h2></div>';

                let accordionsHtml = module.sections.map(section => {
                    let sectionContent = section.content;
                    // Substituir placeholders de tabelas pelo HTML real da tabela
                    Object.keys(courseData.tables).forEach(tableId => {
                        if (sectionContent.includes(`<div id="${tableId}-container"></div>`)) {
                            sectionContent = sectionContent.replace(`<div id="${tableId}-container"></div>`, getTableHtml(tableId));
                        }
                    });

                    return `
                        <div class="accordion">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <span>${section.title}</span>
                                <span>▼</span>
                            </div>
                            <div class="accordion-content">
                                ${sectionContent}
                                <button class="btn" data-quiz-id="${section.id}">🎯 Testar Conhecimentos</button>
                            </div>
                        </div>
                    `;
                }).join('');

                return `<div class="content-box"><h1>${module.title}</h1>${accordionsHtml}</div>`;
            };
            
            const getTableHtml = (tableId) => {
                const tableData = courseData.tables[tableId];
                if (!tableData) return '';
                let html = `<div class="table-container"><h4>${tableData.title}</h4><table><thead><tr>${tableData.headers.map(h => `<th>${h}</th>`).join('')}</tr></thead><tbody>`;
                tableData.rows.forEach(row => { html += `<tr>${row.map(cell => `<td>${cell}</td>`).join('')}</tr>`; });
                return html + '</tbody></table></div>';
            };

            const getFlashcardsPageHtml = () => {
                 return `<div class="content-box">
                    <h2>Flashcards de Revisão</h2>
                    <p>Flashcards são gerados dinamicamente de todos os termos destacados no curso. Clique no card para virar. Use os botões para navegar.</p>
                    <div class="flashcard-container" id="flashcard-container" style="display:none;">
                        <div class="flashcard" id="flashcard">
                            <div class="flashcard-inner">
                                <div class="flashcard-front"></div>
                                <div class="flashcard-back"></div>
                            </div>
                        </div>
                        <div class="flashcard-nav">
                            <button class="btn btn-secondary" id="prev-card">Anterior</button>
                            <span id="card-counter"></span>
                            <button class="btn btn-secondary" id="next-card">Próximo</button>
                        </div>
                        <button class="btn" id="shuffle-cards" style="margin-top: 15px;">🔄 Embaralhar</button>
                    </div>
                    <p id="no-flashcards-msg">Carregando flashcards...</p>
                </div>`;
            };

            const getSimuladoPageHtml = () => {
                let quizOptionsHtml = '';
                courseData.modules.forEach(mod => {
                    quizOptionsHtml += `<h4 style="margin-top: 1rem;">${mod.title}</h4>`;
                    mod.sections.forEach(sec => {
                        quizOptionsHtml += `<label class="checkbox-item"><input type="checkbox" name="topics" value="${sec.id}"> ${sec.title}</label>`;
                    });
                });

                return `<div class="content-box">
                    <h1>📝 Simulado Personalizado</h1>
                    <p>Selecione os assuntos para gerar um simulado. Serão incluídas 2 questões para cada assunto selecionado.</p>
                    <div class="simulado-config" id="simulado-config">
                        <form id="custom-quiz-form">
                            <div class="config-group">
                                <label>1. Selecione os Assuntos:</label>
                                <div class="checkbox-group">
                                    ${quizOptionsHtml}
                                </div>
                            </div>
                            <div class="config-group">
                                <label>2. Nível de Dificuldade:</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-item"><input type="checkbox" name="difficulty" value="Fácil" checked> Fácil</label>
                                    <label class="checkbox-item"><input type="checkbox" name="difficulty" value="Médio" checked> Médio</label>
                                    <label class="checkbox-item"><input type="checkbox" name="difficulty" value="Difícil" checked> Difícil</label>
                                </div>
                            </div>
                            <div style="text-align:center;">
                                <button type="submit" class="btn">🚀 Gerar Simulado</button>
                            </div>
                        </form>
                    </div>
                    <div id="simulado-results"></div>
                </div>`;
            };
            
            const getGlossarioPageHtml = () => {
                const sortedTerms = Object.keys(courseData.glossario).sort();
                let glossarioHtml = sortedTerms.map(term => `
                    <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #eee;">
                        <h3>${term}</h3>
                        <p>${courseData.glossario[term]}</p>
                    </div>
                `).join('');
                return `<div class="content-box"><h1>📖 Glossário</h1>${glossarioHtml}</div>`;
            };

            const getReferencesPageHtml = () => {
                let html = '<div class="content-box"><h2>🔗 Aprofundamento e Fontes</h2><p>A seguir, uma lista comentada das principais referências utilizadas na elaboração do conteúdo deste curso. Utilize estes links para estudos aprofundados.</p><ul class="reference-list">';
                courseData.references.forEach(ref => {
                    html += `<li><a href="${ref.url}" target="_blank" rel="noopener noreferrer">${ref.source}</a><p>${ref.comment}</p></li>`;
                });
                return html + '</ul></div>';
            };


            // --- LÓGICA DE EVENTOS ---
            
            // Navegação principal
            window.showSection = (sectionId, element) => {
                document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
                element.classList.add('active');
                renderPage(sectionId);
                if (window.innerWidth <= 768) {
                    sidebar.classList.remove('visible');
                    sidebar.classList.add('hidden');
                }
            };

            // Acordeão
            window.toggleAccordion = (header) => {
                const content = header.nextElementSibling;
                const isActive = content.classList.contains('active');
                
                document.querySelectorAll('.accordion-content.active').forEach(activeContent => {
                    if (activeContent !== content) {
                        activeContent.classList.remove('active');
                        activeContent.previousElementSibling.classList.remove('active');
                        activeContent.previousElementSibling.querySelector('span:last-child').textContent = '▼';
                    }
                });

                if (!isActive) {
                    content.classList.add('active');
                    header.classList.add('active');
                    header.querySelector('span:last-child').textContent = '▲';
                } else {
                    content.classList.remove('active');
                    header.classList.remove('active');
                    header.querySelector('span:last-child').textContent = '▼';
                }
            };
            
            // Anexar listeners específicos da página
            const attachPageEventListeners = (pageId) => {
                // Listener para quizzes de módulo
                if (pageId.startsWith('modulo')) {
                    mainContent.addEventListener('click', e => {
                        if (e.target.matches('[data-quiz-id]')) {
                            const sectionId = e.target.dataset.quizId;
                            const quizData = courseData.quizzes[sectionId];
                            const section = courseData.modules.flatMap(m => m.sections).find(s => s.id === sectionId);
                            if (quizData && section) {
                                startQuiz(quizData, `Quiz: ${section.title}`);
                            }
                        }
                    });
                } else if (pageId === 'flashcards') {
                    initializeFlashcards();
                } else if (pageId === 'simulado') {
                    // Listener para o formulário do simulado
                    document.getElementById('custom-quiz-form').addEventListener('submit', e => {
                        e.preventDefault();
                        const formData = new FormData(e.target);
                        const selectedTopics = formData.getAll('topics');
                        const selectedDifficulties = formData.getAll('difficulty');
                        
                        if (selectedTopics.length === 0) { 
                            alert('Por favor, selecione pelo menos um assunto.'); 
                            return; 
                        }
                        
                        let questionPool = [];
                        selectedTopics.forEach(topicId => {
                            if (courseData.quizzes[topicId]) {
                                let topicQuestions = courseData.quizzes[topicId].filter(q => selectedDifficulties.includes(q.d));
                                topicQuestions.sort(() => 0.5 - Math.random()); // Embaralha as questões do tópico
                                questionPool.push(...topicQuestions.slice(0, 3)); // Pega as 3 primeiras
                            }
                        });

                        if (questionPool.length === 0) {
                            alert('Nenhuma questão encontrada para os critérios selecionados.');
                            return;
                        }

                        questionPool.sort(() => 0.5 - Math.random()); 
                        startQuiz(questionPool, 'Simulado Personalizado');
                    });
                }
                
                initializeTooltips();
            };

            // --- LÓGICA DE TOOLTIPS ---
            const initializeTooltips = () => {
                const tooltips = document.querySelectorAll('.tooltip');
                tooltips.forEach(tooltip => {
                    tooltip.addEventListener('mouseenter', (e) => {
                        const tooltipContent = e.currentTarget.querySelector('.tooltip-content');
                        if (!tooltipContent) return;

                        tooltipContent.style.visibility = 'hidden';
                        tooltipContent.style.display = 'block';

                        const mainRect = mainContent.getBoundingClientRect();
                        const tipRect = tooltipContent.getBoundingClientRect();

                        tooltipContent.style.left = '50%';
                        tooltipContent.style.transform = 'translateX(-50%)';
                        tooltipContent.style.right = 'auto';

                        if (tipRect.right > mainRect.right - 16) {
                           tooltipContent.style.left = 'auto';
                           tooltipContent.style.right = '0';
                           tooltipContent.style.transform = 'translateX(0)';
                        }

                        if (tipRect.left < mainRect.left + 16) {
                           tooltipContent.style.left = '0';
                           tooltipContent.style.right = 'auto';
                           tooltipContent.style.transform = 'translateX(0)';
                        }
                        
                        tooltipContent.style.display = '';
                        tooltipContent.style.visibility = 'visible';
                    });

                    tooltip.addEventListener('mouseleave', (e) => {
                         const tooltipContent = e.currentTarget.querySelector('.tooltip-content');
                         if(tooltipContent) tooltipContent.style.visibility = 'hidden';
                    });
                });
            };

            // --- LÓGICA DE FLASHCARDS ---
            const initializeFlashcards = () => {
                const allFlashcards = [];
                const tempDiv = document.createElement('div');
                
                courseData.modules.forEach(mod => {
                    mod.sections.forEach(sec => {
                        tempDiv.innerHTML = sec.content;
                        tempDiv.querySelectorAll('.tooltip').forEach(t => {
                            const term = t.firstChild.textContent.trim();
                            const definition = t.querySelector('.tooltip-content').textContent.trim();
                            allFlashcards.push({ term, definition });
                        });
                    });
                });

                const uniqueFlashcards = allFlashcards.filter((v, i, a) => a.findIndex(t => t.term === v.term) === i);
                const container = document.getElementById('flashcard-container');
                const noCardsMsg = document.getElementById('no-flashcards-msg');

                if (uniqueFlashcards.length > 0) {
                    container.style.display = 'flex';
                    noCardsMsg.style.display = 'none';
                    container.dataset.state = JSON.stringify({ cards: uniqueFlashcards, currentIndex: 0 });
                    updateFlashcardView();
                    
                    document.getElementById('flashcard').addEventListener('click', e => e.currentTarget.classList.toggle('flipped'));
                    document.getElementById('prev-card').addEventListener('click', () => navigateFlashcard(-1));
                    document.getElementById('next-card').addEventListener('click', () => navigateFlashcard(1));
                    document.getElementById('shuffle-cards').addEventListener('click', shuffleFlashcards);
                } else {
                    noCardsMsg.textContent = 'Nenhum flashcard disponível.';
                }
            };

            const updateFlashcardView = () => {
                const container = document.getElementById('flashcard-container');
                if (!container || !container.dataset.state) return;
                let state = JSON.parse(container.dataset.state);
                const card = state.cards[state.currentIndex];
                if (card) {
                    document.querySelector('.flashcard-front').textContent = card.term;
                    document.querySelector('.flashcard-back').textContent = card.definition;
                    document.getElementById('card-counter').textContent = `${state.currentIndex + 1} / ${state.cards.length}`;
                    document.getElementById('flashcard').classList.remove('flipped');
                }
            };

            const navigateFlashcard = (direction) => {
                const container = document.getElementById('flashcard-container');
                if (!container || !container.dataset.state) return;
                let state = JSON.parse(container.dataset.state);
                state.currentIndex += direction;
                if (state.currentIndex < 0) state.currentIndex = state.cards.length - 1;
                if (state.currentIndex >= state.cards.length) state.currentIndex = 0;
                container.dataset.state = JSON.stringify(state);
                updateFlashcardView();
            };

            const shuffleFlashcards = () => {
                const container = document.getElementById('flashcard-container');
                if (!container || !container.dataset.state) return;
                let state = JSON.parse(container.dataset.state);
                for (let i = state.cards.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [state.cards[i], state.cards[j]] = [state.cards[j], state.cards[i]];
                }
                state.currentIndex = 0;
                container.dataset.state = JSON.stringify(state);
                updateFlashcardView();
            };

            // --- LÓGICA DE QUIZZES ---
            const startQuiz = (quizData, title) => {
                let quizHtml = `<span class="close-button">&times;</span><h2>${title}</h2><form id="quiz-form">`;
                let startTime = Date.now();
                quizData.forEach((q, index) => {
                    quizHtml += `<div class="quiz-question"><p><b>${index + 1}. ${q.q}</b></p><div class="quiz-options">${q.options.map((opt, i) => `<label><input type="radio" name="question${index}" value="${i}"> ${opt}</label>`).join('')}</div></div>`;
                });
                quizHtml += `<button type="submit" class="btn">Finalizar</button></form>`;
                quizModalContent.innerHTML = quizHtml;
                quizModal.style.display = 'flex';

                quizModalContent.querySelector('.close-button').addEventListener('click', () => quizModal.style.display = 'none');
                
                document.getElementById('quiz-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    const endTime = Date.now();
                    const timeTaken = Math.round((endTime - startTime) / 1000);
                    const formData = new FormData(e.target);
                    let score = 0;
                    let results = [];
                    quizData.forEach((q, index) => {
                        const userAnswer = formData.get(`question${index}`);
                        const isCorrect = userAnswer !== null && parseInt(userAnswer) === q.a;
                        if (isCorrect) score++;
                        results.push({ question: q, userAnswer, isCorrect });
                    });
                    showQuizResult(score, quizData.length, results, title, timeTaken);
                });
            };

            const showQuizResult = (score, total, results, title, timeTaken) => {
                const percentage = total > 0 ? ((score / total) * 100).toFixed(1) : 0;
                const minutes = Math.floor(timeTaken / 60);
                const seconds = timeTaken % 60;
                let resultHtml = `<span class="close-button">&times;</span><h2>Resultado: ${title}</h2><div class="quiz-result"><h3>Sua pontuação: ${score} de ${total} (${percentage}%)</h3><p><b>Tempo gasto:</b> ${minutes} min e ${seconds} seg</p><p>${percentage >= 70 ? 'Parabéns, ótimo resultado!' : 'Continue estudando para melhorar!'}</p><hr><h4>Revisão das Questões:</h4></div>`;
                results.forEach(res => {
                    resultHtml += `<div class="review-question ${res.isCorrect ? 'correct' : 'incorrect'}">
                        <p><b>${res.question.q}</b></p>
                        <p>Sua resposta: ${res.userAnswer !== null ? res.question.options[res.userAnswer] : 'Não respondida'}</p>
                        ${!res.isCorrect ? `<p>Resposta correta: <b>${res.question.options[res.question.a]}</b></p>` : ''}
                    </div>`;
                });
                quizModalContent.innerHTML = resultHtml;
                quizModalContent.querySelector('.close-button').addEventListener('click', () => quizModal.style.display = 'none');
            };

            // --- RESPONSIVIDADE ---
            window.toggleSidebar = () => {
                sidebar.classList.toggle('visible');
                if (window.innerWidth <= 768) {
                    sidebar.classList.toggle('hidden');
                }
            };

            window.addEventListener('resize', () => {
                if (window.innerWidth > 768) {
                    sidebar.classList.remove('hidden', 'visible');
                    mainContent.classList.remove('expanded');
                } else {
                    if (!sidebar.classList.contains('visible')) {
                        sidebar.classList.add('hidden');
                    }
                }
            });

            // --- INICIALIZAÇÃO ---
            renderPage('home');
            if (window.innerWidth <= 768) {
                sidebar.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
